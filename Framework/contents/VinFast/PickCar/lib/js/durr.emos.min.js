/* durr.emos.js v1.0.6-010 | (c) 2016 DURR Systems GmbH | durr.com */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("emosWS requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(window,noGlobal){function SubscriberGroup(a,b){emosWS.topicNumber++,this.tag=a,this.tagId=this.getTagId(a,b),this.actualData=null,this.subscribers=[],this.tagType=b,this.live=!1,this.fromIDB=!1,this.callback=this.callback.bind(this),b!==emosWS.tagType.Diagnosis&&(emosWS.badQualityTags[this.tagId]=this),emosWS.dispatchEvent({type:"HMIplc",message:this})}SubscriberGroup.prototype.getTagId=function(a,b){try{return a+b.id}catch(a){console.error("[SubscriberGroup getTagId] : "+a)}},SubscriberGroup.prototype.updateBadQualityTags=function(a){var b=!1;if(a)switch(a.type){case"dataChange":b="IndexedDB"!==a.source&&192===a.quality;break;case"diagnosisWindow":b="EMOSDEFAULT"!==a.value.OPCVersionID}b&&delete emosWS.badQualityTags[this.tagId],this.checkBadQualityTags()},SubscriberGroup.prototype.checkBadQualityTags=function(){var a=0===Object.keys(emosWS.badQualityTags).length;emosWS.dispatchEvent({type:"Quality",message:{good:a,list:emosWS.badQualityTags}})},SubscriberGroup.prototype.callback=function(a){try{this.updateBadQualityTags(a),"IndexedDB"!==a.source?(emosWS.idb.updatePLC({plctag:this.tagId,value:a}),this.active=!0,this.fromIDB=!1):(this.onIDB(a),this.fromIDB=!0),this.active^this.fromIDB&&(this.actualData=a,"undefined"!=typeof a.classStateRec&&(a.classStateRec.ClassStateNew=intToBinary(a.classStateRec.ClassStateNew,32),a.classStateRec.ClassStateAck=intToBinary(a.classStateRec.ClassStateAck,32),a.newFault="0"===a.value&&"1"===a.classStateRec.ClassStateNew.charAt(30),a.newWarning="0"===a.value&&"1"===a.classStateRec.ClassStateNew.charAt(29),a.newEmergency="0"===a.value&&"1"===a.classStateRec.ClassStateNew.charAt(28),a.ackFault="1"===a.value&&"1"===a.classStateRec.ClassStateAck.charAt(30),a.ackWarning="1"===a.value&&"1"===a.classStateRec.ClassStateAck.charAt(29),a.ackEmergency="1"===a.value&&"1"===a.classStateRec.ClassStateAck.charAt(28),a.noFault="2"===a.value,a.newFault?a.classStateRec.state=0:a.ackFault?a.classStateRec.state=1:a.newEmergency?a.classStateRec.state=2:a.ackEmergency?a.classStateRec.state=3:a.newWarning?a.classStateRec.state=4:a.ackWarning?a.classStateRec.state=5:a.noFault?a.classStateRec.state=6:a.classStateRec.state=7),this.subscribers.forEach(function(b){if(b.callback)try{b.callback(a,b.param)}catch(a){console.error("[SubscriberGroup subscribers callback] failed: "+a)}}))}catch(a){console.error("[SubscriberGroup callback] failed: "+a)}},SubscriberGroup.prototype.getTagType=function(){return this.tagType.id},SubscriberGroup.prototype.register=function(a){try{this.subscribers.forEach(function(b){if(a.equals(b))return void(emosWS.animationData.stillInit||null!==this.actualData&&a.callback&&a.callback(this.actualData,a.param))}),this.subscribers.push(a),emosWS.animationData.stillInit||null!==this.actualData&&a.callback&&a.callback(this.actualData,a.param),1===this.subscribers.length&&this.advise()}catch(a){console.error("[SubscriberGroup register] : ",a)}},SubscriberGroup.prototype.unregister=function(a){this.subscribers.forEach(function(b,c){if(b.callback===a)return this.subscribers.splice(c,1),b=null,void(0===this.subscribers.length&&(this.unadvise(),delete emosWS.tagDestination[this.tagId],delete emosWS.badQualityTags[this.tagId],delete this))}.bind(this))},SubscriberGroup.prototype.advise=function(){var a=emosWS.getPLCTag(this.tag);a&&this.adviseData(a),emosWS.idb.addPLC({plctag:this.tagId,value:{}}),emosWS.idb.getPLC(this.tagId,this.callback)},SubscriberGroup.prototype.unadvise=function(){try{}catch(a){console.error("[SubscriberGroup unadvise] : ",a)}},SubscriberGroup.prototype.onIDB=function(a){},SubscriberGroup.prototype.adviseData=function(){},SubscriberGroup.prototype.toString=function(){var a="",b=this.actualData;return b&&(a+="type:\t"+b.type+"\nid:\t"+b.id+"\ntag:\t"+b.tag+"\nts:\t"+b.ts+"\nvalue:\t"+b.value+"\nquality:\t"+b.quality+"\nsource:\t"+b.source+"\n"),"tagid:\t"+this.tagId+"\nlisteners:\t"+this.subscribers.length+"\n\nActual value\n"+a},SubscriberGroup.prototype.setValue=function(a){};function SubscriberGroupIO(a){SubscriberGroup.call(this,a,Definition.tagType.IO)}SubscriberGroupIO.prototype=Object.create(SubscriberGroup.prototype),SubscriberGroupIO.prototype.constructor=SubscriberGroupIO,SubscriberGroupIO.prototype.adviseData=function(a){emosWS.sendAdvise(a.plc,a.tag,this.callback)},SubscriberGroupIO.prototype.setValue=function(a){a=String(a),a!==this.actualData.value&&emosWS.poke(this.tag,a)};function SubscriberGroupIOAlarm(a){SubscriberGroup.call(this,a,Definition.tagType.IOAlarm)}SubscriberGroupIOAlarm.prototype=Object.create(SubscriberGroup.prototype),SubscriberGroupIOAlarm.prototype.constructor=SubscriberGroupIOAlarm,SubscriberGroupIOAlarm.prototype.adviseData=function(a){emosWS.sendAdvise(a.plc,a.tag+".Alarm",this.callback)};function SubscriberGroupAlarm(a){SubscriberGroup.call(this,a,Definition.tagType.Alarm)}SubscriberGroupAlarm.prototype=Object.create(SubscriberGroup.prototype),SubscriberGroupAlarm.prototype.constructor=SubscriberGroupAlarm,SubscriberGroupAlarm.prototype.adviseData=function(a){emosWS.sendAdviseAlarm(a.plc,a.tag,this.callback)};function SubscriberGroupAlarmText(a){SubscriberGroup.call(this,a,Definition.tagType.AlarmText)}SubscriberGroupAlarmText.prototype=Object.create(SubscriberGroup.prototype),SubscriberGroupAlarmText.prototype.constructor=SubscriberGroupAlarmText;function SubscriberGroupDiagnosis(a){SubscriberGroup.call(this,a,Definition.tagType.Diagnosis)}SubscriberGroupDiagnosis.prototype=Object.create(SubscriberGroup.prototype),SubscriberGroupDiagnosis.prototype.constructor=SubscriberGroupDiagnosis,SubscriberGroupDiagnosis.prototype.adviseData=function(){this.tag.replace(/(.*)::(.*)::(.*)/,function(a,b,c,d){emosWS.sendGetDiagnosisWindow(b,c,d,this.callback)}.bind(this))};function SubscriberGroupProperty(a){SubscriberGroup.call(this,a,Definition.tagType.Property)}SubscriberGroupProperty.prototype=Object.create(SubscriberGroup.prototype),SubscriberGroupProperty.prototype.constructor=SubscriberGroupProperty,SubscriberGroupProperty.prototype.adviseData=function(a){emosWS.sendAdviseProperty(a.plc,a.tag,this.callback)};function SubscriberGroupIOObjectPLC(a){this.messages={io:null,property:null},this.UNKOWN="???",this.UNDEFINED="UNDEFINED",this.Temperature={CELSIUS:{symbol:["C","\xbaC","\xb0C"],convertTo:{FAHRENHEIT:this.CtoF.bind(this),KELVIN:this.CtoK.bind(this),RANKINE:this.CtoR.bind(this),UNDEFINED:this.toItSelf}},FAHRENHEIT:{symbol:["F","\xbaF","\xb0F"],convertTo:{CELSIUS:this.FtoC.bind(this),KELVIN:this.FtoK.bind(this),RANKINE:this.FtoR.bind(this),UNDEFINED:this.toItSelf}},KELVIN:{symbol:["K","\xbaK","\xb0K"],convertTo:{CELSIUS:this.KtoC.bind(this),FAHRENHEIT:this.KtoF.bind(this),RANKINE:this.KtoR.bind(this),UNDEFINED:this.toItSelf}},RANKINE:{symbol:["R","\xbaR","\xb0R"],convertTo:{CELSIUS:this.RtoC.bind(this),FAHRENHEIT:this.RtoF.bind(this),KELVIN:this.RtoK.bind(this),UNDEFINED:this.toItSelf}},UNDEFINED:{symbol:[],convertTo:{CELSIUS:this.toItSelf,FAHRENHEIT:this.toItSelf,KELVIN:this.toItSelf,RANKINE:this.toItSelf,UNDEFINED:this.toItSelf}}};var b=this.Temperature;this.tempArray={ALL:b.CELSIUS.symbol.concat(b.FAHRENHEIT.symbol,b.KELVIN.symbol),METRIC:b.CELSIUS.symbol.concat(b.KELVIN.symbol),IMPERIAL:b.FAHRENHEIT.symbol},this.value=null,this.plcValue=null,this.unit=null,this.unitSymbol=null,this.valueWithSymbol=null,this.factor=1,this.data={UnitPLC:null,FactorPLC:1,UnitMetric:null,FactorMetric:1,UnitImperial:null,FactorImperial:1,UnitLocale:null,FactorLocale:1,UnitDefault:null,Precision:null,TextKey:null,InputMin:null,InputMax:null},this.isTemperature=!1,this.setUnit(emosWS.getUnit()),this.onIO=this.onIO.bind(this),this.onUnitChange=this.onUnitChange.bind(this),this.onProperty=this.onProperty.bind(this),this.isIDB=!1,emosWS.addEventListener("unit",this.onUnitChange),SubscriberGroup.call(this,a,Definition.tagType.IOObjectPLC)}SubscriberGroupIOObjectPLC.prototype=Object.create(SubscriberGroup.prototype),SubscriberGroupIOObjectPLC.prototype.constructor=SubscriberGroupIOObjectPLC,SubscriberGroupIOObjectPLC.prototype.adviseData=function(){emosWS.advise(this.tag,this.onIO,"",Definition.tagType.IO),emosWS.advise(this.tag,this.onProperty,"",Definition.tagType.Property)},SubscriberGroupIOObjectPLC.prototype.areMessagesNull=function(){return null===this.messages.io&&null===this.messages.property},SubscriberGroupIOObjectPLC.prototype.onIO=function(a){this.messages.io=this.copy(a),this.plcValue=parseFloat("object"==typeof a.value?a.value.value:a.value),this.onDataChange()},SubscriberGroupIOObjectPLC.prototype.onIDB=function(a){this.areMessagesNull()&&(this.isIDB=!0,this.onIO(a),this.onProperty({value:a.properties}),this.isIDB=!1)},SubscriberGroupIOObjectPLC.prototype.onProperty=function(a){try{if(a.value){var b=this.messages.property=a.value,c=this.data;c.Precision=parseInt(b.disp_prec),c.UnitMetric=b.met_baseunit,c.UnitImperial=b.imp_baseunit,c.UnitLocale=b.loc_baseunit,c.UnitPLC=b.plc_baseunit,c.FactorMetric=parseFloat(b.met_factor),c.FactorImperial=parseFloat(b.imp_factor),c.FactorLocale=parseFloat(b.loc_factor),c.FactorPLC=parseFloat(b.plc_factor),c.TextKey=b.textkey,c.InputMin=parseFloat(b.input_min),c.InputMax=parseFloat(b.input_max),this.isTemperature=this.checkTemperature(c.UnitMetric,c.UnitImperial),this.setUnit(this.unit),this.onDataChange()}}catch(a){console.error("[SubscriberGroupIOObjectPLC.prototype.onProperty] : "+a)}},SubscriberGroupIOObjectPLC.prototype.onUnitChange=function(a){a!==this.unit&&(this.setUnit(a),this.onDataChange(!0))},SubscriberGroupIOObjectPLC.prototype.copy=function(a){var b={};for(var c in a)b[c]=a[c];return b},SubscriberGroupIOObjectPLC.prototype.onDataChange=function(){this.fromIDB=!1;var a=this.messages.io;a&&(this.value=this.getValue(),a.value={isTemperature:this.isTemperature,value:this.value,plcValue:this.plcValue,unit:this.unit,unitSymbol:this.unitSymbol,valueWithSymbol:this.value+" "+this.unitSymbol,factor:this.factor,properties:this.messages.property},this.isIDB||this.callback(a))},SubscriberGroupIOObjectPLC.prototype.unadvise=function(){emosWS.unadvise(emosWS.getTagId(this.tag,Definition.tagType.IO),this.onIO),emosWS.unadvise(emosWS.getTagId(this.tag,Definition.tagType.Property),this.onProperty),emosWS.removeEventListener("unit",this.onUnitChange)},SubscriberGroupIOObjectPLC.prototype.setUnit=function(a){var b=this.data;switch(this.unit=a,this.unit){case emosWS.unitID.Metric:this.unitSymbol=b.UnitMetric,this.factor=b.FactorMetric;break;case emosWS.unitID.UnitImperial:this.unitSymbol=b.UnitImperial,this.factor=b.FactorImperial;break;case emosWS.unitID.UnitLocale:this.unitSymbol=b.UnitLocale,this.factor=b.FactorLocale;break;default:return""}},SubscriberGroupIOObjectPLC.prototype.checkTemperature=function(a,b){var c=this.tempArray;return null!==this.data.UnitPLC&&c.ALL.indexOf(this.data.UnitPLC)>-1||null===this.data.UnitPLC&&(c.METRIC.indexOf(a)>-1||c.IMPERIAL.indexOf(b)>-1)},SubscriberGroupIOObjectPLC.prototype.getTemperatureType=function(a){try{for(var b=Object.keys(this.Temperature),c=0,d=b.length;c<d;c++){var e=b[c];if(this.Temperature[e].symbol.indexOf(a)>-1)return e}return this.UNDEFINED}catch(a){return console.error("[SubscriberGroupIOObjectPLC.prototype.getTemperatureType] : "+a),this.UNDEFINED}},SubscriberGroupIOObjectPLC.prototype.getValue=function(){try{var a=this.data,b=null;return b=this.isTemperature?this.convertTemperature(this.plcValue,a.UnitPLC,this.unitSymbol):this.plcValue*a.FactorPLC*this.factor,isNaN(a.Precision)||(b=b.toFixed(a.Precision)),b}catch(a){console.error("[SubscriberGroupIOObjectPLC.prototype.getValue] : "+a)}},SubscriberGroupIOObjectPLC.prototype.getWriteValue=function(a){var b=this.data;return this.isTemperature?this.convertTemperature(a,this.unitSymbol,b.UnitPLC):a/(b.FactorPLC*this.factor)},SubscriberGroupIOObjectPLC.prototype.setValue=function(a){var b=String(this.getWriteValue(a));b!==this.plcValue&&emosWS.poke(this.tag,b)},SubscriberGroupIOObjectPLC.prototype.convertTemperature=function(a,b,c){try{var d=this.getTemperatureType(b),e=this.getTemperatureType(c);return d===e?a:this.Temperature[d].convertTo[e](a)}catch(b){return console.error("[SubscriberGroupIOObjectPLC.prototype.convertTemperature] : "+b),a}},SubscriberGroupIOObjectPLC.prototype.CtoF=function(a){return 1.8*a+32},SubscriberGroupIOObjectPLC.prototype.CtoK=function(a){return a+273.15},SubscriberGroupIOObjectPLC.prototype.CtoR=function(a){return this.KtoR(this.CtoK(a))},SubscriberGroupIOObjectPLC.prototype.FtoC=function(a){return(a-32)/1.8},SubscriberGroupIOObjectPLC.prototype.FtoK=function(a){return(a-32)/1.8+273.15},SubscriberGroupIOObjectPLC.prototype.FtoR=function(a){return this.KtoR(this.FtoK(a))},SubscriberGroupIOObjectPLC.prototype.KtoC=function(a){return a-273.15},SubscriberGroupIOObjectPLC.prototype.KtoF=function(a){return 1.8*(a-273.15)+32},SubscriberGroupIOObjectPLC.prototype.KtoR=function(a){return 9*a/5},SubscriberGroupIOObjectPLC.prototype.RtoK=function(a){return 5*a/9},SubscriberGroupIOObjectPLC.prototype.RtoC=function(a){return this.KtoC(this.RtoK(a))},SubscriberGroupIOObjectPLC.prototype.RtoF=function(a){return this.KtoF(this.RtoK(a))},SubscriberGroupIOObjectPLC.prototype.toItSelf=function(a){return a};function SubscriberGroupIOObject(a,b,c,d,e,f,g,h,i,j,k,l){this.tag=a,this.value=null,this.oValue=null,this.unit=null,this.unitSymbol=null,this.properties=null,"undefined"==typeof l?(this.offset=0,this.factor=1):(this.offset=l,this.factor=d),this.data={UnitPLC:null,UnitMetric:c,FactorMetric:parseFloat(d),UnitImperial:e,FactorImperial:parseFloat(f),UnitLocale:g,FactorLocale:parseFloat(h),UnitDefault:i,Precision:parseInt(j),Stretch:parseInt(k),TextKey:null,InputMin:null,InputMax:null},this.setUnit(emosWS.getUnit()),this.onDataChange=this.onDataChange.bind(this),SubscriberGroup.call(this,a,Definition.tagType.IOObject),this.tagId=this.getTagId(a,b,c,d,e,f,g,h,i,j,k,l),this.onDataChange()}SubscriberGroupIOObject.prototype=Object.create(SubscriberGroup.prototype),SubscriberGroupIOObject.prototype.constructor=SubscriberGroupIOObject,SubscriberGroupIOObject.prototype.getTagId=function(a,b,c,d,e,f,g,h,i,j,k,l){var m="";return[a,c,d,e,f,g,h,i,j,k,l].forEach(function(a){m+="undefined"==typeof a?"":a+"_"}),m+b.id},SubscriberGroupIOObject.prototype.adviseData=function(){emosWS.advise(this.tag,this.onDataChange,"",Definition.tagType.IOObjectPLC)},SubscriberGroupIOObject.prototype.setUnit=SubscriberGroupIOObjectPLC.prototype.setUnit,SubscriberGroupIOObject.prototype.copy=SubscriberGroupIOObjectPLC.prototype.copy,SubscriberGroupIOObject.prototype.onDataChange=function(a){try{var b=null;if(a){var c=a.value;if(this.properties=c.properties,this.oValue=c.value,b=this.copy(a),this.properties){b.value=this.copy(a.value);var d=this.data;this.value=isNaN(d.Stretch)?this.oValue:this.toStretch(parseFloat(this.oValue),d.Stretch),b.value.value=this.value}else this.setUnit(c.unit),this.value=this.getValue(),b=this.copy(a),b.value={isTemperature:!1,value:this.value,plcValue:c.plcValue,unit:this.unit,unitSymbol:this.unitSymbol,valueWithSymbol:this.value+" "+this.unitSymbol,factor:this.factor,properties:null}}else this.value=null,b={quality:0,value:{isTemperature:!1,value:this.value,plcValue:null,unit:this.unit,unitSymbol:this.unitSymbol,valueWithSymbol:this.value+" "+this.unitSymbol,factor:this.factor,properties:null}};try{this.callback(b)}catch(a){console.error("[SubscriberGroupIOObject onDataChange callback] : "+a)}}catch(a){console.error("[SubscriberGroupIOObject onDataChange] : "+a)}},SubscriberGroupIOObject.prototype.getValue=function(){try{var a=this.data,b=this.oValue*this.factor+this.offset;return isNaN(a.Precision)||(b=b.toFixed(a.Precision)),isNaN(a.Stretch)||(b=this.toStretch(parseFloat(b),a.Stretch)),b}catch(a){console.error("[SubscriberGroupIOObject.getValue] : "+a)}},SubscriberGroupIOObject.prototype.setValue=function(a){if(this.properties)emosWS.pokeExt(this.tag,a);else{var b=this.data,c=(a-this.offset)/this.factor;emosWS.poke(this.tag,c)}},SubscriberGroupIOObject.prototype.unadvise=function(){emosWS.unadvise(emosWS.getTagId(this.tag,Definition.tagType.SubscriberGroupIOObject),this.onDataChange)},SubscriberGroupIOObject.prototype.toStretch=function(a,b){var c=a%1===0,d=a.toString(),e=d.length-(c?0:1);if(e>b){var f=parseInt(a),g=f.toString().length;return g>=b?f:parseFloat(d.substr(0,b+1))}return a};function SubscriberGroupText(a){SubscriberGroup.call(this,a+".name",Definition.tagType.Text)}SubscriberGroupText.prototype=Object.create(SubscriberGroup.prototype),SubscriberGroupText.prototype.constructor=SubscriberGroupText,SubscriberGroupText.prototype.adviseData=function(a){emosWS.sendAdviseText(a.plc,"name",this.callback)};var Definition={languageID:{DECP_German:{value:70,caption:"Deutsch"},DECP_English:{value:71,caption:"English"},DECP_Spanish:{value:72,caption:"Espa\xf1ol"},DECP_Portuguese:{value:73,caption:"Portugu\xeas"},DECP_French:{value:74,caption:"Fran\xe7ais"},DECP_Chinese:{value:75,caption:"\u4e2d\u56fd"},DECP_Local1:{value:76,caption:"Local1"},DECP_Local2:{value:77,caption:"Local2"}},unitID:{Metric:0,UnitImperial:1,UnitLocale:2},tagType:{IO:{value:0,id:".IO",subscriberGroup:SubscriberGroupIO},IOAlarm:{value:1,id:".IOAlarm",subscriberGroup:SubscriberGroupIOAlarm},Alarm:{value:2,id:".Alarm",subscriberGroup:SubscriberGroupAlarm},AlarmText:{value:3,id:".AlarmText",subscriberGroup:SubscriberGroupAlarmText},Diagnosis:{value:4,id:".Diagnosis",subscriberGroup:SubscriberGroupDiagnosis},Property:{value:5,id:".Property",subscriberGroup:SubscriberGroupProperty},IOObject:{value:6,id:".Object",subscriberGroup:SubscriberGroupIOObject},Text:{value:7,id:".Text",subscriberGroup:SubscriberGroupText},IOObjectPLC:{value:8,id:".ObjectPLC",subscriberGroup:SubscriberGroupIOObjectPLC}}};function Subscriber(a,b){this.callback=a,this.param=b}Subscriber.prototype.equals=function(a){return this.callback===a.callback&&(this.param===a.param||void 0)},Subscriber.prototype.checkEqual=function(a,b){return this.callback===a&&(this.param===b||void 0)};function GlobalVariable(a){emosWS.gvNumber++,emosWS.globalVariables.push(this),this.myValue=a,this.name=null,this.subscribers=[],this.previousSubscriber=null,this.init(),emosWS.dispatchEvent({type:"HMIgv"})}GlobalVariable.prototype.init=function(){Object.defineProperty(this,"value",{get:this._getValue.bind(this),set:this._setValue.bind(this)})},GlobalVariable.prototype._getValue=function(){if(emosWS.animationData.stillInit){var a=new Subscriber(emosWS.animationData.callback.initialize,emosWS.animationData.param);this.register(a),this.previousSubscriber=a}return this.myValue},GlobalVariable.prototype._setValue=function(a){this.myValue=a,emosWS.animationData.globalVariablesSetCallBackAble&&(emosWS.animationData.stillInit||emosWS.addGlobalVariablesChange(this.informListeners.bind(this,emosWS.clickData.event)))},GlobalVariable.prototype.toString=function(){return this.myValue},GlobalVariable.prototype.toDebugString=function(){return"name:\t"+this.getName()+"\nvalue:\t"+this.myValue+"\nlisteners:\t"+this.subscribers.length+"\n"},GlobalVariable.prototype.informListeners=function(a){try{for(var b=0,c=this.subscribers.length;b<c;b++){var d=this.subscribers[b];d.callback(this.myValue,d.param,a)}}catch(a){console.error("[GlobalVariable informListeners] :",a)}},GlobalVariable.prototype.register=function(a){try{for(var b=0,c=this.subscribers.length;b<c;b++){var d=this.subscribers[b];if(a.equals(d))return}this.subscribers.push(a)}catch(a){console.error("[GlobalVariable register] :",a)}},GlobalVariable.prototype.unregister=function(a){this.subscribers.forEach(function(b,c){if(b.callback===a)return this.subscribers.splice(c,1),void(b=null)}.bind(this))},GlobalVariable.prototype.getName=function(){if(this.name)return this.name;for(var a in window)try{if(window[a]===this)return this.name=a,a}catch(a){}return null},GlobalVariable.prototype.setValue=function(a){a=this.convertValue(a),this.setDirectValue(a)},GlobalVariable.prototype.setDirectValue=function(a){a!==this.myValue&&(emosWS.listenGlobalVariablesChange(),this.value=a,emosWS.callbackGlobalVariablesChange())},GlobalVariable.prototype.convertValue=function(a){var b=typeof this.myValue,c=typeof a;if(b===c)return a;switch(b){case"boolean":return"string"===c?GetAsBoolean(a):Boolean(a);case"number":return Number(a);default:return a}},window.GlobalVariable=GlobalVariable;function varInOut(a){var b=a;this.toString=function(){return b},Object.defineProperty(this,"value",{get:function(){return b},set:function(a){b=a}})}function ClientTest(){}ClientTest.prototype.testSVGRender=function(a){try{console.log("[Received TestSVGRender] : "+a.value);var b=JSON.parse(a.value),c=b.id,d=b.width,e=b.height,f=b.svg;console.log("[         TestSVGRender] id="+c+" / width="+d+" / height="+e+" / svg="+f);var g=document.createElement("canvas");document.body.appendChild(g);var h=g.getContext("2d"),i=new Image;i.src=f;var j=function(a){var b={};b.type="general",b.key="SVGRenderResult",b.value=JSON.stringify({id:c,image:a}),document.body.removeChild(g),emosWS.send(b)},k=function(){try{h.canvas.width=720,h.canvas.height=540,h.font="30px Arial",h.strokeText("SVG file has error!",10,50);var a="";a=g.toDataURL("image/jpeg",1),j(a)}catch(a){console.log("onerror error: "+a)}};i.onload=function(){try{h.canvas.width=i.naturalWidth||d,h.canvas.height=i.naturalHeight||e,h.drawImage(i,0,0);var a="";try{a=g.toDataURL("image/jpeg",1)}catch(a){console.log("canvas.toDataURL error: "+a),k()}j(a)}catch(a){console.log("Image onload error: "+a),k()}},i.onerror=function(){k()}}catch(a){console.log("testSVGRender error: "+a)}};function EventDispatcher(){this._listeners={}}EventDispatcher.prototype.addEventListener=function(a,b){var c=this._listeners;void 0===c[a]&&(c[a]=[]),c[a].indexOf(b)===-1&&c[a].push(b)},EventDispatcher.prototype.hasEventListener=function(a,b){var c=this._listeners;return void 0!==c[a]&&c[a].indexOf(b)!==-1},EventDispatcher.prototype.removeEventListener=function(a,b){var c=this._listeners,d=c[a];if(void 0!==d){var e=d.indexOf(b);e!==-1&&d.splice(e,1)}},EventDispatcher.prototype.dispatchEvent=function(a){var b=this._listeners,c=b[a.type];if(void 0!==c){for(var d=[],e=c.length,f=0;f<e;f++)d[f]=c[f];for(var f=0;f<e;f++)try{d[f].call(this,a.message)}catch(a){console.error("[dispatchEvent] :"+a)}}};function BINDX(a){this.name=a,window[a]=this,this.SLastSource=[],this.SQuality=0,this.SSecurityGroupRF=null,this.SSecurityPlant=null,this.SSecurityUserRF=null,this.STextValue=null,this.SDataChange=null;var b=null;Object.defineProperty(this,"STagname",{get:function(){return b},set:function(a){b=a}});var c=null;Object.defineProperty(this,"STextKey",{get:function(){return c},set:function(a){c=a}});var d=null;Object.defineProperty(this,"SDiagLib",{get:function(){return d},set:function(a){d=a;var b=a.split(";");new emosWS.ESDiagnosisWindow({conditionFunction:function(){return{DiagnosisLibID:parseInt(b[0]),PLC:b[1],ID:b[2],DiagnosisControl:b[3],GroupRightIndex:parseInt(b[4]),Enabled:!0}},PLACEHOLDER_USEHAND:!0,PLACEHOLDER_USESTROKE:!1,PLACEHOLDER_USEHIDE:!1,STDPLACEHOLDER_SHAPENAME:"DuMmY"}).onClick()}});var e=null;Object.defineProperty(this,"SValue",{get:function(){return e},set:function(a){e=a}});var f=null;Object.defineProperty(this,"SCommDiag",{get:function(){return f},set:function(a){f=a}})}BINDX.prototype.SAppendTag=function(a){},BINDX.prototype.SWriteTag=function(a,b,c,d,e){},BINDX.prototype.SReadTag=function(a,b,c,d){},BINDX.prototype.SAddHost=function(a,b,c,d){},BINDX.prototype.SRemoveHost=function(a,b,c,d){};function BlinkInterval(a){this.intervalLength=a,this.listeners=[],this.queueActive=[],this.queueInactive=[],this.interval=null,this.active=!0}BlinkInterval.prototype.addListener=function(a,b){this.listeners.indexOf(a)===-1&&this.queueActive.indexOf(a)===-1&&this.queueInactive.indexOf(a)===-1&&(b?this.queueActive.push(a):this.queueInactive.push(a)),this.refresh()},BlinkInterval.prototype.GBS=function(){return emosWS.animationData.stillInit&&emosWS.animationData.callback&&this.addListener(emosWS.animationData.callback.datachangeListener,!0),this.active},BlinkInterval.prototype.sync=function(){this.clearInterval(),this.setInterval()},BlinkInterval.prototype.setInterval=function(){var a=(new Date).getTime(),b=1e3*Math.ceil(a/1e3)-a;this.interval=a,setTimeout(function(){console.info("[BlinkInterval] started at: "+(new Date).getTime()),this.interval=setInterval(function(){this.active&&this.queueActive.length>0&&(this.listeners=this.listeners.concat(this.queueActive),this.queueActive=[]),!this.active&&this.queueInactive.length>0&&(this.listeners=this.listeners.concat(this.queueInactive),this.queueInactive=[]);for(var a=0,b=this.listeners.length;a<b;a++)this.listeners[a]();this.active=!this.active}.bind(this),this.intervalLength)}.bind(this),b)},BlinkInterval.prototype.clearInterval=function(){clearInterval(this.interval),this.interval=null,this.active=!0},BlinkInterval.prototype.refresh=function(){this.listeners.length+this.queueActive.length+this.queueInactive.length>0?this.interval||this.setInterval():this.clearInterval()},BlinkInterval.prototype.remove=function(a,b){var c=a.indexOf(b);c!==-1&&a.splice(c,1)},BlinkInterval.prototype.removeListener=function(a){this.remove(this.listeners,a),this.remove(this.queueActive,a),this.remove(this.queueInactive,a),this.refresh()};function AccessToken(a){this.data=a,this.token=a.access_token;var b=null;a.expires_in?(b=new Date,b.setMinutes(b.getMinutes()+a.expires_in)):a.expires_at&&(b=new Date(a.expires_at)),this.expireAt=b}AccessToken.prototype.getToken=function(){return this.token},AccessToken.prototype.getExpireIn=function(){return this.expireAt-Date.now()},AccessToken.prototype.getData=function(){return this.data},AccessToken.prototype.equals=function(a){return this.token===a.getToken()},AccessToken.prototype.toString=function(){return JSON.stringify({access_token:this.token,expires_at:this.expireAt})};function Cookie(){}Cookie.prototype.getItem=function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},Cookie.prototype.setItem=function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var g="";if(c)switch(c.constructor){case Number:g=c===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:g="; expires="+c;break;case Date:g="; expires="+c.toUTCString()}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":""),!0},Cookie.prototype.removeItem=function(a,b,c){return!!this.hasItem(a)&&(document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(c?"; domain="+c:"")+(b?"; path="+b:""),!0)},Cookie.prototype.hasItem=function(a){return!!a&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},Cookie.prototype.keys=function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=a.length,c=0;c<b;c++)a[c]=decodeURIComponent(a[c]);return a};function Cas(){this.WS_AUTH_STATUS_TEXT="EMOS_AUTH",this.WS_SESSION_COOKIE_TEXT="EMOS_WS_SESSION",this.ROUTE_COOKIE_TEXT="ROUTEID",this.CAS_ST_TICKET="CASSTTICKET",this.CAS_USER_LOGGED_IN="CASUSERLOGGEDIN",this.CAS_USER_LOGGED_OFF="CASUSERLOGGEDOFF",this.casServerURL="",this.checkCallbackURL="",this.trustedAppServers=window.trustedAppServers,this.cookie=new Cookie,this.currentCookie=null,this.hiddenIFrame=null,this.iframes={},this.init()}Cas.prototype.init=function(){window.addEventListener("load",function(){this.addHiddenIFrame()}.bind(this),!1),window.addEventListener("message",function(a){var b=JSON.parse(a.data);switch(b.type){case this.CAS_ST_TICKET:var c=function(){emosWS.sendLoginByKey(b.ticket,null,null,"ticket")}.bind(this);emosWS.getWebSocketStatus()?c():emosWS.addEventListener("open",c);break;case this.CAS_USER_LOGGED_IN:if(!this.currentCookie){var d=this.cookie.getItem(this.WS_SESSION_COOKIE_TEXT);d&&(this.currentCookie=d,emosWS.sendLoginByKey(this.cookie.getItem(this.WS_SESSION_COOKIE_TEXT),null,null,"cookie"))}break;case this.CAS_USER_LOGGED_OFF:this.currentCookie&&emosWS.sendLogoff()}}.bind(this),!1),window.addEventListener("storage",this.onLocalStorageChange.bind(this),!1)},Cas.prototype.getUrlVars=function(a){for(var b=[],c,d=a.slice(a.indexOf("?")+1).split("&"),e=0;e<d.length;e++)c=d[e].split("="),b.push(c[0]),b[c[0]]=c[1];return b},Cas.prototype.onActiveCasServer=function(a){this.casServerURL=a.host,this.checkCallbackURL=a.service,this.casLoginURL=a.host+"/login?service="+a.service,this.cookie.getItem(this.WS_SESSION_COOKIE_TEXT)||this.getCASServiceTicket(),console.info(a)},Cas.prototype.validateTicket=function(a){var b=this.casServerURL+"/serviceValidate?service="+this.checkCallbackURL+"&ticket="+a;$.get(b,function(a){console.log("*******validateTicket result************\n"+(new XMLSerializer).serializeToString(a))})},Cas.prototype.addHiddenIFrame=function(){this.hiddenIFrame=document.createElement("iframe"),this.hiddenIFrame.style.display="none",document.body.appendChild(this.hiddenIFrame)},Cas.prototype.setAuthLocalStorages=function(a){try{this.trustedAppServers.forEach(function(b){var c=this.iframes[b];c||(c=document.createElement("iframe"),c.style.display="none",document.body.appendChild(c),this.iframes[b]=c),c.setAttribute("src",b+"/SetAuthLocalStorage.html?action="+a)}.bind(this)),this.setAuthLocalStorage(a)}catch(a){console.log("setAuthLocalStorage failed: "+a)}},Cas.prototype.setAuthLocalStorage=function(a){try{"add"===a?localStorage.setItem(this.WS_AUTH_STATUS_TEXT,1):"delete"===a&&localStorage.removeItem(this.WS_AUTH_STATUS_TEXT)}catch(a){console.log("setAuthLocalStorage failed: "+a)}},Cas.prototype.informTrustedApps=function(){this.setAuthLocalStorages(this.currentCookie?"add":"delete")},Cas.prototype.getCASServiceTicket=function(){if(this.casServerURL&&this.checkCallbackURL){var a=this.casServerURL+"/login?service="+this.checkCallbackURL;this.hiddenIFrame.setAttribute("src",a)}},Cas.prototype.sendCASLogout=function(){var a=this.casServerURL+"/logout";this.hiddenIFrame.setAttribute("src",a)},Cas.prototype.onWSCookie=function(a){this.currentCookie=a,this.cookie.setItem(this.WS_SESSION_COOKIE_TEXT,a,null,"/"),emosWS.propagateMessage(JSON.stringify({type:this.CAS_USER_LOGGED_IN}))},Cas.prototype.onPassed=function(a){a.wscookie?(this.currentCookie=a.wscookie,this.cookie.setItem(this.WS_SESSION_COOKIE_TEXT,a.wscookie,null,"/"),this.setCookieForCurrentWSServer(a.wscookie),emosWS.propagateMessage(JSON.stringify({type:this.CAS_USER_LOGGED_IN}))):this.currentCookie="abc",this.setAuthLocalStorage("add"),this.informTrustedApps()},Cas.prototype.getHTTPURL=function(){var a=emosWS.getWSHostname(),b={ws:"http",wss:"https"},c=a.replace(/(.*)(:\/\/.*\/).*/,function(a,c,d){return b[c]+d+"setcookie.html"});return c},Cas.prototype.setCookieForCurrentWSServer=function(a){this.setCookieForDomain(this.getHTTPURL(),a)},Cas.prototype.deleteCookieForCurrentWSServer=function(){this.setCookieForDomain(this.getHTTPURL(),"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},Cas.prototype.setCookieForDomain=function(a,b){var c=document.createElement("iframe");c.className="abc",c.style.display="none",c.src=a+"?setcookie="+b,document.body.appendChild(c),setTimeout(function(){c.parentNode.removeChild(c)},4e3)},Cas.prototype.onFailed=function(a){switch(a.reason){case"Cookie":this.logoffSession(),this.getCASServiceTicket();break;case"ticket":}},Cas.prototype.onLogoff=function(){this.logoffSession(),this.logoffSSO(),this.informTrustedApps()},Cas.prototype.logoffSession=function(){this.currentCookie=null,this.cookie.removeItem(this.WS_SESSION_COOKIE_TEXT,"/"),
this.deleteCookieForCurrentWSServer()},Cas.prototype.logoffSSO=function(){this.sendCASLogout(),emosWS.propagateMessage(JSON.stringify({type:this.CAS_USER_LOGGED_OFF}))},Cas.prototype.onLocalStorageChange=function(a){a.key===this.WS_AUTH_STATUS_TEXT&&(!this.currentCookie&&a.newValue?setTimeout(function(){var a=this.cookie.getItem(this.WS_SESSION_COOKIE_TEXT);a?(this.currentCookie=a,emosWS.sendLoginByKey(this.cookie.getItem(this.WS_SESSION_COOKIE_TEXT),null,null,"cookie")):this.getCASServiceTicket()}.bind(this),1):this.currentCookie&&!a.newValue&&(emosWS.sendLogoff(),this.logoffSession()))};function Style(){this.fill=null,this.stroke=null,this["stroke-width"]=null,this.visibility=null,this.cursor=null}function Shape(a){emosWS.shapeNumber++,this.id=a,this.shape=null,this.shapeText=null,this.strokeWidth=null,this.animations=[],this.style=new Style,this.setShapes(a),this.inDebug=!1,this.ready=!1,this.JSJobs=[],this.ESJobs=[],emosWS.dispatchEvent({type:"HMIshape"})}Shape.prototype.add=function(a){return this.animations.push({animation:a,style:new Style})-1},Shape.prototype.executeJobs=function(a){this.ready&&(this.JSJobs.forEach(function(b){try{b(a)}catch(a){console.log("[Shape execute JSJobs]",a)}}),emosWS.listenGlobalVariablesChange(),this.ESJobs.forEach(function(b){try{b(a)}catch(a){console.log("[Shape execute ESJobs ]",a)}}),emosWS.callbackGlobalVariablesChange(),emosWS.clickData.event=null)},Shape.prototype.addJob=function(a,b,c){this.ready||setEvent(this.id,"click",this.executeJobs.bind(this),b?"pointer":"initial"),this.ready=!0,(c?this.JSJobs:this.ESJobs).push(a)},Shape.prototype.onContextMenu=function(a){emosWS.debug&&emosWS.debug.ctrlPressed&&emosWS.debug.animationTab&&(a.preventDefault(),emosWS.debug.animationTab.onShapeContextMenu(this))},Shape.prototype.setStyle=function(a,b){try{if(this.shape){var c=this.animations[b].style;for(var d in a){var e=d,f=a[d];c[e]=f;for(var g=0,h=this.animations.length;g<h;g++){var i=this.animations[g].style;if(f=i[e],null!==f){this.style[e]=f,this.setStyleDeep(this.shape,e,f);break}}}this.inDebug&&(emosWS.debug.animationTab.onAnimationChange(b,c),emosWS.debug.animationTab.onAnimationChange(-1,this.style))}}catch(a){console.error("[Shape setStyle] : ",a)}},Shape.prototype.setStyleDeep=function(a,b,c){try{if("g"===a.tagName&&c)if("visibility"===b){a.style.visibility=c;for(var d=0,e=a.childNodes.length;d<e;d++){var f=a.childNodes[d];f instanceof SVGForeignObjectElement&&this.setVisibility(f,c)}}else if(["fill","cursor"].indexOf(b)>-1)for(var d=0,e=a.childNodes.length;d<e;d++)this.setStyleDeep(a.childNodes[d],b,c);else a.style[b]=c;else if(c&&"undefined"!=typeof a.style)switch(b){case"fill":this.setFillColor(a,c);break;case"visibility":this.setVisibility(a,c);break;default:a.style[b]=c}}catch(a){console.error("[Shape setStyleDeep] : ",a)}},Shape.prototype.setFillColor=function(a,b){if(a.GradientStopColor||this.searchGradientStopColor(a),a.GradientStopColor)for(var c=0,d=a.GradientStopColor.length;c<d;c++)a.GradientStopColor[c].setAttribute("stop-color",b);else a.style.fill=b},Shape.prototype.setVisibility=function(a,b){a.style.visibility=b,"undefined"!=typeof a.shapeText&&(a.shapeText.style.visibility=b)},Shape.prototype.setShapes=function(a){if(!emosWS.attr.svg)return null;if(this.shape=emosWS.attr.svg.getElementById(a),this.shape){this.shape.addEventListener("contextmenu",this.onContextMenu.bind(this),!0);var b=this.shape.getAttribute("stroke-width");this.strokeWidth=null===b||""===b?1:Number(b)}this.searchGradientStopColor(this.shape),this.shapeText=emosWS.attr.svg.getElementById(a+".Text")||this.shape,this.shapeText&&(this.shape.shapeText=this.shapeText,this.tspans=this.shapeText.getElementsByTagName("tspan"),this.shapeTextContent=this.tspans[0]||this.shapeText)},Shape.prototype.setText=function(a){if(this.tspans)for(var b=0,c=this.tspans.length;b<c;b++)this.tspans[b].textContent="";this.shapeTextContent&&(this.shapeTextContent.textContent=a)},Shape.prototype.searchGradientStopColor=function(a){if(a){a.GradientStopColor=null;var b=a.getAttribute("fill");if(b){var c=b.match(/url\(#(.*)\)/);if(c){var d=emosWS.attr.svg.getElementById(c[1]);d.childNodes[1]&&(a.GradientStopColor=[],a.GradientStopColor.push(d.childNodes[1]),d.childNodes[5]&&a.GradientStopColor.push(d.childNodes[5]))}}}};function IDB(){this.version=2,this.databaseName="emos",this.db=null,this.plcStore={name:"plc",keyPath:"plctag"},this.init()}IDB.prototype.init=function(){try{if(window.indexedDB){var a=window.indexedDB.open(this.databaseName,this.version);a.onerror=function(a){console.error("[IDB onerror] : ",a)},a.onsuccess=function(a){this.db=a.target.result}.bind(this),a.onupgradeneeded=function(a){var b=this.db=a.target.result,c=b.createObjectStore(this.plcStore.name,{keyPath:this.plcStore.keyPath});c.transaction.oncomplete=function(a){var c=this.plcStore.store=b.transaction(this.plcStore.name,"readwrite").objectStore(this.plcStore.name)}.bind(this)}.bind(this)}else console.info("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.")}catch(a){console.error("[IDB.prototype.init] : ",a)}},IDB.prototype.addPLC=function(a){try{if(this.db){a.value.init=!0;var b=this.db.transaction(this.plcStore.name,"readwrite").objectStore(this.plcStore.name).add(a);b.onsuccess=function(a){}}}catch(a){console.error("[IDB.prototype.addPLC] : ",a)}},IDB.prototype.updatePLC=function(a){if(this.db){var b=this.db.transaction(this.plcStore.name,"readwrite").objectStore(this.plcStore.name).put(a);b.onerror=function(a){},b.onsuccess=function(a){}}},IDB.prototype.getPLC=function(a,b){if(this.db){var c=this.db.transaction(this.plcStore.name,"readwrite").objectStore(this.plcStore.name).get(a);c.onerror=function(a){},c.onsuccess=function(a){var d=c.result.value;d.source="IndexedDB","undefined"==typeof d.init&&b(c.result.value)}}},IDB.prototype.deletePLC=function(a){if(this.db){var b=this.db.transaction(this.plcStore.name,"readwrite").objectStore(this.plcStore.name).delete(a);b.onsuccess=function(a){}}};function Tab(a){this.tabIndex=a,this.active=!1,this.html="",this.init()}Tab.prototype.init=function(){console.info("[",this.constructor.name,"] init")},Tab.prototype.isActive=function(){var a=emosWS.debug;return a.activeTabId===this.tabIndex&&a.isOpen()},Tab.prototype.activate=function(){this.refresh()},Tab.prototype.setActive=function(){this.isActive()||emosWS.debug.dialog.emos.tabs.tabs({active:this.tabIndex})},Tab.prototype.setInactive=function(){},Tab.prototype.displayObject=function(a,b,c){["fill","stroke"].indexOf(b)>-1&&(c=c||"#FFFFFF",a.style["background-color"]=c,a.style.color=this.invertColor(c))},Tab.prototype.invertColor=function(a){var b=a;return b=b.substring(1),b=parseInt(b,16),b=16777215^b,b=b.toString(16),b=("000000"+b).slice(-6),b="#"+b},Tab.prototype.deactivate=function(){},Tab.prototype.getHTML=function(){return""},Tab.prototype.onHTMLReady=function(){},Tab.prototype.refresh=function(){},Tab.prototype.getId=function(){return"EDebug"+this.name+this.index++},Tab.prototype.showQR=function(a){var b=a.href},Tab.prototype.highlight=function(a){var b=250;if(!a.inEMOSHighLight){a.inEMOSHighLight=!0;var c=a.style["background-color"],d=a.style.color;a.style["background-color"]="#4d90fe",a.style.color="white",setTimeout(function(){a.style["background-color"]=c,a.style.color=d,a.inEMOSHighLight=!1},b)}};function AnimationTab(a){this.name="Shape",this.index=0,this.shape=null,this.elements={gui:{html:null,id:this.getId()},div:{html:null,id:this.getId()},shapename:{html:null,id:this.getId()},animationNo:{html:null,id:this.getId()},head:{html:null,id:this.getId()},shape:{html:null,id:this.getId()},table:{html:null,id:this.getId()}},Tab.call(this,a)}AnimationTab.prototype=Object.create(Tab.prototype),AnimationTab.prototype.constructor=AnimationTab,AnimationTab.prototype.init=function(){this.html=this.getHTML()},AnimationTab.prototype.getHTML=function(){var a='<div id="'+this.elements.gui.id+'">                <div id="'+this.elements.div.id+'">                    <table style="width:100%">                        <tr>                            <td width="20%">Shape name</td>                            <td width="60%"><input type="text" id="'+this.elements.shapename.id+'"/></td>                        </tr>                        <tr>                            <td width="20%">Animations</td>                            <td width="60%" id="'+this.elements.animationNo.id+'"></td>                        </tr>                    </table>                </div>                <div>                    <table class="DebugDataTable" style="width:100%">                        <thead>                            <tr id="'+this.elements.head.id+'" >                                <td>Animation</td>                            </tr>                            <tr id="'+this.elements.shape.id+'" >                                <td>&sum;</td>                            </tr>                        </thead>                        <tbody id="'+this.elements.table.id+'" ></tbody>                    </table>                </div>\n            </div>';return a},AnimationTab.prototype.onHTMLReady=function(){for(var a in this.elements){var b=this.elements[a];b.html=document.getElementById(b.id)}this.elements.shapename.html.addEventListener("change",function(){var a=emosWS.shapes[this.elements.shapename.html.value];a?this.onShapeContextMenu(a):this.elements.shapename.html.value=this.shape.id}.bind(this),!1),this.update()},AnimationTab.prototype.update=function(){this.updateShape()},AnimationTab.prototype.refresh=function(){this.update()},AnimationTab.prototype.deactivate=function(){this.shape&&(this.shape.inDebug=!1)},AnimationTab.prototype.updateShape=function(){if(this.isActive()&&this.shape){this.elements.gui.html.style.visibility="visible",this.shape.inDebug=!0,this.elements.shapename.html.value=this.shape.id,this.elements.animationNo.html.textContent=this.shape.animations.length;var a=this.elements.table.html;while(a.rows.length>0)a.deleteRow(0);var b=this.elements.head.html,c=this.elements.shape.html;while(b.cells.length>1)b.deleteCell(1),c.deleteCell(1);Object.keys(this.shape.style).forEach(function(a,d){var e=b.insertCell(d+1),f=c.insertCell(d+1);e.textContent=a,f.textContent=this.shape.style[a],this.displayObject(f,a,f.textContent)}.bind(this)),this.shape.animations.forEach(function(b,c){var d=a.insertRow(c),e=d.insertCell(0);e.textContent=b.animation.constructor.name,e.title=b.animation.getDetail(),Object.keys(this.shape.style).forEach(function(a,c){var e=d.insertCell(c+1);e.textContent=b.style[a],this.displayObject(e,a,e.textContent)}.bind(this))}.bind(this))}else this.elements.gui.html.style.visibility="hidden"},AnimationTab.prototype.onShapeContextMenu=function(a){emosWS.debug.isOpen()&&(this.deactivate(),this.setActive(),this.shape=a,this.shape.inDebug=!0,this.updateShape(),this.debugShape(a))},AnimationTab.prototype.onAnimationChange=function(a,b){if(this.isActive()){var c=a===-1?this.elements.shape.html:this.elements.table.html.rows[a];Object.keys(b).forEach(function(a,d){var e=c.cells[d+1];e.textContent=b[a],this.displayObject(e,a,e.textContent)}.bind(this))}},AnimationTab.prototype.debugShape=function(a){console.info("[AnimationTab debugShape]",a)};function DataTab(a){this.name="Data",this.index=0,this.shape=null,this.modeAll=!1,this.activated=!1,this.display={groupInfo:{no:"No.",tag:"Tag",tagType:"Type",listeners:"Listeners"},value:{source:"Source",value:"Value",quality:"Quality",ts:"Time"}},this.elements={radioDiv:{html:null,id:this.getId()},radioAll:{html:null,id:this.getId()},radioCustom:{html:null,id:this.getId()},addDiv:{html:null,id:this.getId()},addInput:{html:null,id:this.getId()},addIO:{html:null,id:this.getId()},addAlarm:{html:null,id:this.getId()},ioHead:{html:null,id:this.getId()},ioTable:{html:null,id:this.getId()}},this.radioId=this.getId(),this.datachangeListener=this.datachangeListener.bind(this),Tab.call(this,a)}DataTab.prototype=Object.create(Tab.prototype),DataTab.prototype.constructor=DataTab,DataTab.prototype.init=function(){this.html=this.getHTML()},DataTab.prototype.getHTML=function(){var a='<div>                    <div class="FloatLeft" id="'+this.elements.radioDiv.id+'">                        <input'+(this.modeAll?' checked="checked"':"")+' type="radio" id="'+this.elements.radioAll.id+'" name="'+this.radioId+'"><label for="'+this.elements.radioAll.id+'">All</label>                        <input'+(this.modeAll?"":' checked="checked"')+' type="radio" id="'+this.elements.radioCustom.id+'" name="'+this.radioId+'"><label for="'+this.elements.radioCustom.id+'">Custom</label>                    </div>                    <div class="FloatRight" id="'+this.elements.addDiv.id+'">                        <input type="text" id="'+this.elements.addInput.id+'">                        <button type="button" id="'+this.elements.addIO.id+'">+IO</button>                        <button type="button" id="'+this.elements.addAlarm.id+'">+AL</button>                    </div>                </div>                <div>                    <div class="debugDataTabFilter">                        Filter:                         <input class="DebugDataFilter" type="text" placeholder="any text to filter">                    </div>                    <table class="DebugDataTable DebugData" style="width:100%">                        <thead id="'+this.elements.ioHead.id+'" ></thead>                        <tbody id="'+this.elements.ioTable.id+'" ></tbody>                    </table>                </div>';return a},DataTab.prototype.refresh=function(){this.setMode(this.modeAll)},DataTab.prototype.showQualityBadTags=function(){$("#"+this.elements.radioAll.id).attr("checked",!0).button("refresh"),this.setMode(!0);var a="bad";$(".DebugDataFilter").val(a),$.uiTableFilter($(".DebugData"),a)},DataTab.prototype.insertTable=function(){this.setMode(this.modeAll)},DataTab.prototype.update=function(){this.activated=!0;var a=this.elements.ioTable.html;while(a.rows.length>0)a.deleteRow(0);this.modeAll&&Object.keys(emosWS.tagDestination).forEach(function(a){var b=emosWS.tagDestination[a];this.addRow(b)}.bind(this))},DataTab.prototype.addRow=function(a){var b=this.elements.ioTable.html.insertRow();this.updateRow(b,a),this.subscribe(b,a)},DataTab.prototype.updateRow=function(a,b,c){if(a.cells.length>0)while(a.cells.length>0)a.deleteCell(0);var d="debugBad",e=b.actualData;if(e)switch(e.type){case"dataChange":d="IndexedDB"===e.source?"debugCache":192===e.quality?"debugGood":"debugBad";break;case"diagnosisWindow":d="EMOSDEFAULT"===e.value.OPCVersionID?"debugBad":"debugGood"}a.className=d,Object.keys(this.display.groupInfo).forEach(function(c){var d=a.insertCell();switch(c){case"no":d.textContent=a.rowIndex;break;case"tagType":d.textContent=b.getTagType();break;case"listeners":d.textContent=b.subscribers.length;break;default:d.textContent=b[c]}}),Object.keys(this.display.value).forEach(function(c){var f=a.insertCell();switch(c){case"quality":f.textContent="debugGood"===d?"good":"bad";break;case"value":e&&this.processCell(f,b);default:if(e){f.textContent=e[c];break}}}.bind(this)),a.title=b.toString()},DataTab.prototype.processCell=function(a,b){a.contentEditable=!0,a.addEventListener("blur",function(){b.setValue(a.textContent)},!1)},DataTab.prototype.subscribe=function(a,b){var c=new Subscriber(this.datachangeListener,{row:a,sGroup:b});b.register(c),a.sGroup=b},DataTab.prototype.unsubscribeAll=function(){for(var a=this.elements.ioTable.html,b=0,c=a.rows.length;b<c;b++){var d=a.rows[b];d.sGroup.unregister(this.datachangeListener)}},DataTab.prototype.datachangeListener=function(a,b){this.updateRow(b.row,b.sGroup),this.highlight(b.row)},DataTab.prototype.setMode=function(a){this.modeAll===a&&this.activated||(this.modeAll=a,this.elements.addDiv.html.style.visibility=a?"hidden":"visible",this.elements.addInput.html.value="",this.unsubscribeAll(),this.update())},DataTab.prototype.onHTMLReady=function(){for(var a in this.elements){var b=this.elements[a];b.html=document.getElementById(b.id)}$("#"+this.elements.radioDiv.id).buttonset();var c=this.elements.ioHead.html;Object.keys(this.display).forEach(function(a){var b=this.display[a];Object.keys(b).forEach(function(a,d){var e=c.appendChild(document.createElement("th"));e.textContent=e.title=b[a],"tag"===a&&(e.className="debugHalf")})}.bind(this)),this.elements.radioAll.html.addEventListener("click",this.setMode.bind(this,!0)),this.elements.radioCustom.html.addEventListener("click",this.setMode.bind(this,!1)),this.elements.addIO.html.addEventListener("click",this.onAddButtonClick.bind(this,Definition.tagType.IO)),this.elements.addAlarm.html.addEventListener("click",this.onAddButtonClick.bind(this,Definition.tagType.Alarm)),emosWS.addEventListener("HMIplc",this.onNewSGroup.bind(this));var d=$(".DebugData");$(".DebugDataFilter").keyup(function(){$.uiTableFilter(d,this.value)}),$("th").css({position:"relative"}).resizable({resizeHeight:!1,handles:"e, w",handleSelector:"",onDragStart:function(a,b,c){return!!$(a.target).hasClass("resizer")}})},DataTab.prototype.onAddButtonClick=function(a){var b=this.elements.addInput.html.value.replace(/ /g,""),c=b+a.id,d=emosWS.tagDestination[c];if(d){for(var e=this.elements.ioTable.html,f=0,g=e.rows.length;f<g;f++){var h=e.rows[f];if(h.sGroup===d)return}this.elements.addInput.html.value=""}else d=new a.subscriberGroup(b,a),emosWS.tagDestination[c]=d;this.addRow(d)},DataTab.prototype.onNewSGroup=function(a){this.isActive()&&this.modeAll&&this.addRow(a)},DataTab.prototype.deactivate=function(){this.unsubscribeAll(),this.activated=!1};function LinkTab(a){this.name="Link",this.index=0,this.links={},this.elements={refreshButton:{html:null,id:this.getId()},linkTable:{html:null,id:this.getId()}},Tab.call(this,a)}LinkTab.prototype=Object.create(Tab.prototype),LinkTab.prototype.constructor=LinkTab,LinkTab.prototype.init=function(){this.html=this.getHTML()},LinkTab.prototype.getHTML=function(){var a='<div>                    <table class="DebugDataTable" style="width:100%">                        <thead>                            <tr>                                <td width="10%"><button id="'+this.elements.refreshButton.id+'">Refresh</button></td>                                <td width="75%">URL</td>                                <td width="15%">Status</td>                            </tr>                        </thead>                        <tbody id="'+this.elements.linkTable.id+'" ></tbody>                    </table>                </div>';return a},LinkTab.prototype.onHTMLReady=function(){for(var a in this.elements){var b=this.elements[a];b.html=document.getElementById(b.id)}var c=this;$("#"+this.elements.refreshButton.id).button({icons:{primary:"ui-icon-refresh"},text:!1}).click(function(){c.updateLinkTable()})},LinkTab.prototype.refresh=function(){this.updateLinkTable()},LinkTab.prototype.updateLinkTable=function(){var a=this.elements.linkTable.html;this.links={};while(a.rows.length>0)a.deleteRow(0);emosWS.links.forEach(function(a){this.links[a.page]=null}.bind(this)),Object.keys(this.links).forEach(function(b){var c=a.insertRow(),d=c.insertCell(),e=c.insertCell(),f=document.createElement("a");f.href=b,f.innerHTML=b,f.target="_blank",emosWS.debug.QR.setTooltip(f),e.appendChild(f);var g=c.insertCell();d.textContent=c.rowIndex,c.title=b,this.updateCasStatus(b,g)}.bind(this))},LinkTab.prototype.updateCasStatus=function(a,b){$.ajax({url:a,timeout:3e3,success:function(){this.refreshURLStatus(!0,b)}.bind(this),error:function(){this.refreshURLStatus(!1,b)}.bind(this)})},LinkTab.prototype.refreshURLStatus=function(a,b){b.textContent=String.fromCharCode(a?10004:10008),b.title=a?"reachable":"unreachable",b.style.color="white",b.style["background-color"]=a?"green":"red",b.style["text-align"]="center",this.casReachable=a};function OverviewTab(a){this.name="Overview",this.index=0,this.casReachable=null,this.elements={version:{html:null,id:this.getId()},diagnosisMode:{html:null,name:this.getId(),onclick:this.onDiagnosisModeClick},unit:{html:null,name:this.getId(),onclick:this.onUnitClick},allowPoke:{html:null,id:this.getId()},url:{html:null,id:this.getId()},urlparent:{html:null,id:this.getId()},wsServer:{html:null,id:this.getId()},wsStatus:{html:null,id:this.getId()},username:{html:null,id:this.getId()},login:{html:null,id:this.getId()},casCaption:{html:null,id:this.getId()},casServer:{html:null,id:this.getId()},casStatus:{html:null,id:this.getId()},plc:{html:null,id:this.getId()},shape:{html:null,id:this.getId()},animation:{html:null,id:this.getId()},text:{html:null,id:this.getId()},link:{html:null,id:this.getId()},gv:{html:null,id:this.getId()},glc:{html:null,id:this.getId()}},Tab.call(this,a)}OverviewTab.prototype=Object.create(Tab.prototype),OverviewTab.prototype.constructor=OverviewTab,OverviewTab.prototype.init=function(){this.html=this.getHTML()},OverviewTab.prototype.getHTML=function(){var a="";serverPool&&(a+="Server list:\n",serverPool.forEach(function(b){a+=b+"\n"}));var b=window.location!==window.parent.location?document.referrer:document.location,c='<div>\n                    <p class="debugP"><b>Version</b></p>\n                    <table class="DebugDataTable" style="width:100%">\n                        <tr>\n                            <td width="20%">emos.js</td>\n                            <td width="80%" id="'+this.elements.version.id+'"></td>\n                        </tr>\n                    </table>\n                </div>\n                <div>\n                    <p class="debugP"><b>URL</b></p>\n                    <table class="DebugDataTable" style="width:100%">\n                        <tr>\n                            <td width="20%">URL</td>\n                            <td width="80%"><a target="_blank" href="'+window.location.href+'" id="'+this.elements.url.id+'">'+window.location.href+'</a></td>\n                        </tr>\n                        <tr>\n                            <td width="20%">URL parent</td>\n                            <td width="80%"><a target="_blank" href="'+b+'" id="'+this.elements.urlparent.id+'">'+b+'</a></td>\n                        </tr>\n                    </table>\n                </div>\n                <div>\n                    <p class="debugP"><b>Authentication & User rights</b></p>\n                    <table class="DebugDataTable" style="width:100%">\n                        <tr>\n                            <td width="20%">Username</td>\n                            <td width="60%" id="'+this.elements.username.id+'"></td>\n                            <td width="20%"><button class="debugLogin" id="'+this.elements.login.id+'">Login</button></td>\n                        </tr>\n                    </table>\n                </div>\n                <div>\n                    <p class="debugP"><b>WebSocket connection</b></p>\n                    <table class="DebugDataTable" style="width:100%">\n                        <tr>\n                            <td width="20%" title="'+a+'">WS URI</td>\n                            <td width="60%" id="'+this.elements.wsServer.id+'"></td>\n                            <td width="20%" id="'+this.elements.wsStatus.id+'"></td>\n                        </tr>\n                    </table>\n                </div>\n                <div>\n                    <p class="debugP"><b>CAS Server</b></p>\n                    <table class="DebugDataTable" style="width:100%">\n                        <tr>\n                            <td width="20%" id="'+this.elements.casCaption.id+'">CAS URI</td>\n                            <td width="60%"><a target="_blank" href="" id="'+this.elements.casServer.id+'"></a></td>\n                            <td width="20%" id="'+this.elements.casStatus.id+'"></td>\n                        </tr>\n                    </table>\n                </div>\n                <div>\n                    <p class="debugP"><b>DiagnosisWindowMode</b></p>\n                    <input type="radio" name="'+this.elements.diagnosisMode.name+'" value="0"> Built-in\n                    <input type="radio" name="'+this.elements.diagnosisMode.name+'" value="1"> Framework\n                    <input type="radio" name="'+this.elements.diagnosisMode.name+'" value="2"> Both\n                </div>\n                <div>\n                    <p class="debugP"><b>Unit</b></p>\n                    <input type="radio" name="'+this.elements.unit.name+'" value="0"> Metric\n                    <input type="radio" name="'+this.elements.unit.name+'" value="1"> Imperial\n                    <input type="radio" name="'+this.elements.unit.name+'" value="2"> Locale\n                </div>\n                <div>\n                    <p class="debugP">\n                        <b>Allow poke</b>\n                        <input type="checkbox" id="'+this.elements.allowPoke.id+'">\n                    </p>\n                </div>\n                <div>\n                    <p class="debugP"><b>HMI</b></p>\n                    <table class="DebugDataTable" style="width:100%">\n                        <tr>\n                            <td title="Number of IO/Alarm topics" width="20%">PLC topics</td>\n                            <td width="60%" id="'+this.elements.plc.id+'"></td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <td title="Number of animated shapes" width="20%">Shapes</td>\n                            <td width="60%" id="'+this.elements.shape.id+'"></td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <td title="Number of Global animations" width="20%">Animations</td>\n                            <td width="60%" id="'+this.elements.animation.id+'"></td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <td title="Number of language texts" width="20%">Texts</td>\n                            <td width="60%" id="'+this.elements.text.id+'"></td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <td title="Number of links" width="20%">Links</td>\n                            <td width="60%" id="'+this.elements.link.id+'"></td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <td title="Number of Global variables" width="20%">GV</td>\n                            <td width="60%" id="'+this.elements.gv.id+'"></td>\n                            <td></td>\n                        </tr>\n                        <tr>\n                            <td title="Number of Global line codes" width="20%">GLC</td>\n                            <td width="60%" id="'+this.elements.glc.id+'"></td>\n                            <td></td>\n                        </tr>\n                    </table>\n                </div>';return c},OverviewTab.prototype.onHTMLReady=function(){for(var a in this.elements){var b=this.elements[a];if(b.id)b.html=document.getElementById(b.id);else if(b.name){b.html=document.getElementsByName(b.name);for(var c=0;c<b.html.length;c++){var d=b.html[c];d.addEventListener("click",function(a){this.onclick(a.value)}.bind(b,d),!1)}}}this.update(),emosWS.addEventListener("connecting",this.updateWSStatus.bind(this)),emosWS.addEventListener("openWS",this.updateWSStatus.bind(this)),emosWS.addEventListener("close",this.updateWSStatus.bind(this)),emosWS.addEventListener("UserRight",this.updateUser.bind(this)),emosWS.addEventListener("unit",this.updateUnit.bind(this)),emosWS.addEventListener("HMIplc",this.updateHMIplc.bind(this)),emosWS.addEventListener("HMIshape",this.updateHMIshape.bind(this)),emosWS.addEventListener("HMIanimation",this.updateHMIanimation.bind(this)),emosWS.addEventListener("HMItext",this.updateHMItext.bind(this)),emosWS.addEventListener("HMIlink",this.updateHMIlink.bind(this)),emosWS.addEventListener("HMIgv",this.updateHMIgv.bind(this)),emosWS.addEventListener("HMIglc",this.updateHMIglc.bind(this)),emosWS.addEventListener("ActiveCasServerReady",this.updateCasCaption.bind(this)),this.elements.login.html.addEventListener("click",function(){emosWS.login.au.showDialog()}.bind(this),!1),this.elements.allowPoke.html.addEventListener("click",function(a){emosWS.attr.allowPoke=a.target.checked}.bind(this),!1)},OverviewTab.prototype.onDiagnosisModeClick=function(a){emosWS.attr.DiagnosisWindowMode=parseInt(a)},OverviewTab.prototype.onUnitClick=function(a){emosWS.setUnit(parseInt(a))},OverviewTab.prototype.update=function(){this.updateVersion(),this.updateDiagnosisWindowMode(),this.updateUnit(),this.updateAllowPoke(),this.updateURL(),this.updateWSStatus(),this.updateCas(),this.updateCasCaption(),this.updateHMI()},OverviewTab.prototype.updateVersion=function(){this.elements.version.html.textContent=emosWS.version},OverviewTab.prototype.updateDiagnosisWindowMode=function(){try{this.elements.diagnosisMode.html[emosWS.attr.DiagnosisWindowMode].checked=!0}catch(a){console.error("[updateDiagnosisWindowMode] : "+a)}},OverviewTab.prototype.updateUnit=function(a){try{var b="undefined"!=typeof a?a:emosWS.getUnit();this.elements.unit.html[b].checked=!0}catch(a){console.error("[updateUnit] : "+a)}},OverviewTab.prototype.updateAllowPoke=function(){this.elements.allowPoke.html.checked=emosWS.attr.allowPoke},OverviewTab.prototype.updateHMI=function(){emosWS.debug.dialog&&(this.updateHMIplc(),this.updateHMIshape(),this.updateHMIanimation(),this.updateHMItext(),this.updateHMIlink(),this.updateHMIgv(),this.updateHMIglc())},OverviewTab.prototype.updateHMIplc=function(){this.isActive()&&(this.elements.plc.html.textContent=emosWS.topicNumber)},OverviewTab.prototype.updateHMIshape=function(){this.isActive()&&(this.elements.shape.html.textContent=emosWS.shapeNumber)},OverviewTab.prototype.updateHMIanimation=function(){this.isActive()&&(this.elements.animation.html.textContent=emosWS.animationNumber)},OverviewTab.prototype.updateHMItext=function(){this.isActive()&&(this.elements.text.html.textContent=emosWS.textNumber)},OverviewTab.prototype.updateHMIlink=function(){this.isActive()&&(this.elements.link.html.textContent=emosWS.linkNumber)},OverviewTab.prototype.updateHMIgv=function(){this.isActive()&&(this.elements.gv.html.textContent=emosWS.gvNumber)},OverviewTab.prototype.updateHMIglc=function(){this.isActive()&&(this.elements.glc.html.textContent=emosWS.glcNumber)},OverviewTab.prototype.updateWSStatus=function(a){this.elements.wsServer.html.textContent=emosWS.getWSHostname();var b=this.elements.wsStatus.html.textContent="connecting"===a?a:emosWS.getWebSocketStatus()?"connected":"closed";this.elements.wsStatus.html.style["background-color"]="connected"===b?"green":"red",this.elements.wsStatus.html.style.color="white"},OverviewTab.prototype.updateUser=function(a){this.elements.username.html.textContent=a.username;var b="";if(a.userright){var c=a.userright.rights;b="User rights:\n\n";for(var d in c)b+=d+" : \n"+c[d]+"\n\n"}this.elements.username.html.title=b,this.updateLogin(a)},OverviewTab.prototype.updateLogin=function(a){this.elements.login.html.textContent="in"===a.status?"Logout":"Login"},OverviewTab.prototype.updateCas=function(){this.updateCasStatus()},OverviewTab.prototype.updateURL=function(){emosWS.debug.QR.setTooltip(this.elements.url.html),emosWS.debug.QR.setTooltip(this.elements.urlparent.html)},OverviewTab.prototype.updateCasCaption=function(){var a=emosWS.Cas,b="HMI callback URL : \n"+a.checkCallbackURL+"\n\n";b+="Trusted App Servers : \n",a.trustedAppServers.forEach(function(a){b+=a+"\n"}),this.elements.casCaption.html.title=b,this.elements.casServer.html.textContent=this.elements.casServer.html.href=emosWS.Cas.casServerURL,emosWS.debug.QR.setTooltip(this.elements.casServer.html)},OverviewTab.prototype.refresh=function(){this.updateDiagnosisWindowMode(),this.updateUnit(),
this.updateAllowPoke(),this.updateCasStatus(),this.updateHMI()},OverviewTab.prototype.updateCasStatus=function(){this.isActive()&&$.ajax({url:emosWS.Cas.casServerURL,timeout:3e3,success:function(){this.refreshCasStatus(!0)}.bind(this),error:function(){this.refreshCasStatus(!1)}.bind(this)})},OverviewTab.prototype.refreshCasStatus=function(a){this.elements.casStatus.html.textContent=a?"reachable":"unreachable",this.elements.casStatus.html.style.color="white",this.elements.casStatus.html.style["background-color"]=a?"green":"red",this.casReachable=a,setTimeout(this.updateCasStatus.bind(this),3e3)};function VariableTab(a){this.name="Variable",this.index=0,this.modeAll=!1,this.activated=!1,this.elements={radioDiv:{html:null,id:this.getId()},radioAll:{html:null,id:this.getId()},radioCustom:{html:null,id:this.getId()},addDiv:{html:null,id:this.getId()},addInput:{html:null,id:this.getId()},add:{html:null,id:this.getId()},varTable:{html:null,id:this.getId()}},this.radioId=this.getId(),this.initialize=this.initialize.bind(this),Tab.call(this,a)}VariableTab.prototype=Object.create(Tab.prototype),VariableTab.prototype.constructor=VariableTab,VariableTab.prototype.init=function(){this.html=this.getHTML()},VariableTab.prototype.getHTML=function(){var a='<div>                    <div class="FloatLeft" id="'+this.elements.radioDiv.id+'">                        <input'+(this.modeAll?' checked="checked"':"")+' type="radio" id="'+this.elements.radioAll.id+'" name="'+this.radioId+'"><label for="'+this.elements.radioAll.id+'">All</label>                        <input'+(this.modeAll?"":' checked="checked"')+' type="radio" id="'+this.elements.radioCustom.id+'" name="'+this.radioId+'"><label for="'+this.elements.radioCustom.id+'">Custom</label>                    </div>                    <div class="FloatRight" id="'+this.elements.addDiv.id+'">                        <input type="text" id="'+this.elements.addInput.id+'">                        <button type="button" id="'+this.elements.add.id+'">Add</button>                    </div>                </div>                <div>                    <table class="DebugDataTable" style="width:100%">                        <thead>                            <tr>                                <td width="10%">No.</button></td>                                <td width="30%">Name</td>                                <td width="45%">Value</td>                                <td width="15%">Listeners</td>                            </tr>                        </thead>                        <tbody id="'+this.elements.varTable.id+'" ></tbody>                    </table>                </div>';return a},VariableTab.prototype.onHTMLReady=function(){for(var a in this.elements){var b=this.elements[a];b.html=document.getElementById(b.id)}$("#"+this.elements.radioDiv.id).buttonset(),this.elements.radioAll.html.addEventListener("click",this.setMode.bind(this,!0)),this.elements.radioCustom.html.addEventListener("click",this.setMode.bind(this,!1)),this.elements.add.html.addEventListener("click",this.onAddButtonClick.bind(this))},VariableTab.prototype.setMode=function(a){this.modeAll===a&&this.activated||(this.modeAll=a,this.elements.addDiv.html.style.visibility=a?"hidden":"visible",this.elements.addInput.html.value="",this.unsubscribeAll(),this.update())},VariableTab.prototype.unsubscribeAll=function(){for(var a=this.elements.ioTable.html,b=0,c=a.rows.length;b<c;b++){var d=a.rows[b];d.gv.unregister(this.initialize)}},VariableTab.prototype.update=function(){this.activated=!0;var a=this.elements.varTable.html;while(a.rows.length>0)a.deleteRow(0);this.modeAll&&emosWS.globalVariables.forEach(function(a){this.addRow(a)}.bind(this))},VariableTab.prototype.addRow=function(a){var b=a.getName();if(b){var c=this.elements.varTable.html.insertRow();this.updateRow(c,a),this.subscribe(c,a)}},VariableTab.prototype.updateRow=function(a,b){if(a.cells.length>0)while(a.cells.length>0)a.deleteCell(0);var c=a.insertCell(),d=a.insertCell(),e=a.insertCell(),f=a.insertCell();c.textContent=a.rowIndex,d.textContent=b.getName(),e.textContent=b.myValue,f.textContent=b.subscribers.length,a.title=b.toDebugString(),this.processCell(e,b)},VariableTab.prototype.processCell=function(a,b){a.contentEditable=!0,a.addEventListener("blur",function(){b.setValue(a.textContent)},!1)},VariableTab.prototype.subscribe=function(a,b){var c=new Subscriber(this.initialize,{row:a,gv:b});b.register(c),a.gv=b},VariableTab.prototype.unsubscribeAll=function(){for(var a=this.elements.varTable.html,b=0,c=a.rows.length;b<c;b++){var d=a.rows[b];d.gv.unregister(this.initialize)}},VariableTab.prototype.initialize=function(a,b){this.updateRow(b.row,b.gv),this.highlight(b.row)},VariableTab.prototype.refresh=function(){this.setMode(this.modeAll)},VariableTab.prototype.onAddButtonClick=function(){var a=this.elements.addInput.html.value.replace(/ /g,""),b=window[a];if(b instanceof GlobalVariable){for(var c=this.elements.varTable.html,d=0,e=c.rows.length;d<e;d++){var f=c.rows[d];if(f.gv===b)return}this.elements.addInput.html.value="",this.addRow(b)}},VariableTab.prototype.deactivate=function(){this.unsubscribeAll(),this.activated=!1};function QR(){this.size="150x150",this.api="https://api.qrserver.com/v1/create-qr-code/?",this.iframe=null,this.init()}QR.prototype.init=function(){var a="emosQR001";window.addEventListener("load",function(){var b="<iframe class='QR' src='' id='"+a+"'></iframe>";$("body").append($(b)),this.iframe=document.getElementById(a)}.bind(this),!1)},QR.prototype.showQR=function(a,b){var c=b||this.size;this.iframe.src=this.api+"size="+c+"&data="+a,this.iframe.style.visibility="visible"},QR.prototype.hideQR=function(){this.iframe.style.visibility="hidden"},QR.prototype.setTooltip=function(a){a.addEventListener("mouseover",this.showQR.bind(this,a.href,null),!1),a.addEventListener("mouseout",this.hideQR.bind(this),!1)};function Debug(){window.addEventListener("load",function(){emosWS.require({css:[],js:["/lib/js/jquery.uitablefilter.js"]},function(){emosWS.dispatchEvent({type:"DebugLibLoad"})})}.bind(this),!1);var a=0;this.SHOW_BADQUALITYTAGS=!0,this.QR=new QR,this.overviewTab=new OverviewTab((a++)),this.dataTab=new DataTab((a++)),this.variableTab=new VariableTab((a++)),this.animationTab=new AnimationTab((a++)),this.linkTab=new LinkTab((a++)),this.tabs=[this.overviewTab,this.dataTab,this.variableTab,this.animationTab,this.linkTab],this.activeTabId=null,this.dialog=null,this.symbol=null,this.ctrlPressed=!1,this.tabsUI=null,this.init()}Debug.prototype.init=function(){window.addEventListener("load",function(){document.addEventListener("keydown",this.onkeydown.bind(this),!1),document.addEventListener("keyup",this.onkeyup.bind(this),!1),emosWS.addEventListener("ready",function(){emosWS.attr.svg&&(emosWS.attr.svg.addEventListener("keydown",this.onkeydown.bind(this),!1),emosWS.attr.svg.addEventListener("keyup",this.onkeyup.bind(this),!1),this.symbol=this.createSymbol()),this.allowContextMenu(!1)}.bind(this)),this.dialog=this.createWindow()}.bind(this),!1)},Debug.prototype.onkeydown=function(a){this.ctrlPressed=a.ctrlKey,a.shiftKey&&a.ctrlKey?this.show():49===a.keyCode&&a.ctrlKey&&(emosWS.attr.DiagnosisWindowMode=2===emosWS.attr.DiagnosisWindowMode?1:2,console.info("[DiagnosisWindowMode] = "+emosWS.attr.DiagnosisWindowMode))},Debug.prototype.onkeyup=function(a){this.ctrlPressed=!1},Debug.prototype.isOpen=function(){return!!this.dialog&&this.dialog.dialog("isOpen")},Debug.prototype.createWindow=function(){var a=this,b="emosdebug"+Math.floor(1e6*Math.random()+1),c=b+"-tab",d=0,e="",f="",g='<div id="'+b+'"><div id="'+c+'"><ul>';this.tabs.forEach(function(a,b){var d=c+b;e+='<li><a href="#'+d+'">'+a.name+"</a></li>",f+='<div id="'+d+'">'+a.html+"</p></div>"}),g+=e+"</ul>"+f+"</div></div>",$("body").append($(g));var h=$("#"+b).dialog({title:"Debug window",width:480,height:450,resizable:!0,autoOpen:!1,close:this.onDialogClose.bind(this),open:this.onDialogOpen.bind(this),resize:function(){emosWS.attr.svgobject&&(emosWS.attr.svgobject.style["pointer-events"]="none")}}).mouseleave(function(){emosWS.attr.svgobject&&(emosWS.attr.svgobject.style["pointer-events"]="auto")});return h.emos={tabs:$("#"+c).tabs({activate:function(b,c){a.onTabActive($(this).tabs("option","active"))}})},this.tabsUI=h.emos.tabs,this.activeTabId=h.emos.tabs.tabs("option","active"),this.tabs.forEach(function(a){a.onHTMLReady()}),this.onTabActive(this.activeTabId),h},Debug.prototype.onDialogClose=function(){this.allowContextMenu(!1),this.tabs.forEach(function(a){a.deactivate()})},Debug.prototype.onDialogOpen=function(){this.allowContextMenu(!0)},Debug.prototype.allowContextMenu=function(a){a?(document.removeEventListener("contextmenu",this.turnContextMenuOff),emosWS.attr.svg&&emosWS.attr.svg.removeEventListener("contextmenu",this.turnContextMenuOff)):(document.addEventListener("contextmenu",this.turnContextMenuOff),emosWS.attr.svg&&emosWS.attr.svg.addEventListener("contextmenu",this.turnContextMenuOff))},Debug.prototype.turnContextMenuOff=function(a){a.preventDefault()},Debug.prototype.onTabActive=function(a){this.activeTabId=a,this.tabs.forEach(function(b,c){c===a?b.activate():b.deactivate()})},Debug.prototype.createSymbol=function(){var a=null,b=500,c=function(a){this.dialog.dialog("isOpen")||this.show(a)}.bind(this),d=function(){console.log("ontouchstart"),a=setTimeout(c,b)},e=function(){a&&clearTimeout(a)},f="emosQualityBadSymbol"+Math.floor(1e6*Math.random()+1),g='<div class="debugSymbol" id="'+f+'">                    <span class="dsBackground"></span>                    <span class="dsIcon"></span>                </div>';$("body").append($(g));var h=document.getElementById(f),i=function(a){h.style.display=a.good?"none":"block"};return h.addEventListener("click",c.bind(void 0,this.SHOW_BADQUALITYTAGS),!1),emosWS.attr.svg.addEventListener("touchstart",d,!1),emosWS.attr.svg.addEventListener("touchend",e,!1),emosWS.attr.svg.addEventListener("mousedown",d,!1),emosWS.attr.svg.addEventListener("mouseup",e,!1),emosWS.addEventListener("Quality",i),h},Debug.prototype.show=function(a){if(!this.isOpen()){this.dialog.dialog("open");var b=a?this.tabs.indexOf(this.dataTab):this.activeTabId;a&&(this.tabsUI.tabs({active:b}),this.dataTab.showQualityBadTags()),this.tabs[b].activate()}};function RestAlarm(){this.path="alarms",this.pathTop="top",this.pathFilter="filter",this.SYSTEM="$System"}RestAlarm.prototype.top=function(a,b,c){a=this.getQuerryAlarmGroup(a);var d=parseInt(emosWS.getLanguage(),16),e=this.getPathTop()+"?alg="+a+"&max="+b+"&language="+d;$.getJSON(e,function(a){c(this.classifyAlarms(a))}.bind(this))},RestAlarm.prototype.filter=function(a,b,c,d,e,f,g){a=this.getQuerryAlarmGroup(a);var h=parseInt(emosWS.getLanguage(),16),i=this.getPathFilter()+"?alg="+a+"&startDate="+b+"&endDate="+c+"&all="+(d?"true":"false")+"&first="+e+"&max="+f+"&language="+h;$.getJSON(i,function(a){g(this.classifyAlarms(a))}.bind(this))},RestAlarm.prototype.getQuerryAlarmGroup=function(a){return a===this.SYSTEM?a:a+"%25"},RestAlarm.prototype.getPath=function(){return emosWS.rest.getPath()+"/"+this.path},RestAlarm.prototype.getPathTop=function(){return this.getPath()+"/"+this.pathTop},RestAlarm.prototype.getPathFilter=function(){return this.getPath()+"/"+this.pathFilter},RestAlarm.prototype.classifyAlarms=function(a){return a.forEach(function(a){var b="NEW",c="OTHER";switch(a.ackDate&&(b="ACK"),a.endDate&&(b="GONE"),a.status=b,a.messageType){case"02":c="WARNING";break;case"00":case"01":case"03":c="ALARM"}a.type=c,a.class=a.messageType,delete a.messageType}),a};function Rest(){this.path="ws/admin",this.alarm=new RestAlarm}Rest.prototype.getPath=function(){return emosWS.getHostname()+"/"+this.path};function UserIdle(a,b,c){this.emosEvent=a,this.duration=b,this.handlers=c,this.recurrent="undefined"==typeof c.recurrent||c.recurrent,this.eventNameList=["mousemove","mousedown","keydown","DOMMouseScroll","mousewheel","touchmove","MSPointerMove"],this.timeoutID=null,this.resetTimer=this.resetTimer.bind(this),this.goInactive=this.goInactive.bind(this),this.isReset=!1,this.init()}UserIdle.prototype.init=function(){this.addEventListener(),this.startTimer()},UserIdle.prototype.startTimer=function(){this.timeoutID=window.setTimeout(this.goInactive,this.duration)},UserIdle.prototype.onSVGReady=function(){this.eventNameList.forEach(function(a){emosWS.attr.svg.addEventListener(a,this.resetTimer,!1)}.bind(this))},UserIdle.prototype.resetTimer=function(){this.clearTimeout(),this.goActive()},UserIdle.prototype.goInactive=function(){try{this.handlers.onInactive&&this.handlers.onInactive()}catch(a){console.error(a)}this.recurrent?(this.isReset=!0,this.resetTimer(),this.isReset=!1):this.removeEventListener()},UserIdle.prototype.goActive=function(){try{this.handlers.onActive&&!this.isReset&&this.handlers.onActive()}catch(a){console.error(a)}this.startTimer()},UserIdle.prototype.clearTimeout=function(){window.clearTimeout(this.timeoutID)},UserIdle.prototype.terminate=function(){this.clearTimeout(),this.removeEventListener()},UserIdle.prototype.addEventListener=function(){this.eventNameList.forEach(function(a){document.addEventListener(a,this.resetTimer,!1)}.bind(this)),emosWS&&emosWS.attr.svg?this.onSVGReady():this.emosEvent.addEventListener("ready",this.onSVGReady.bind(this))},UserIdle.prototype.removeEventListener=function(){this.eventNameList.forEach(function(a){document.removeEventListener(a,this.resetTimer,!1)}.bind(this)),emosWS.attr.svg&&this.eventNameList.forEach(function(a){emosWS.attr.svg.removeEventListener(a,this.resetTimer,!1)}.bind(this))};function UserIdleAction(a,b){this.init(b),this.userIdle=null,this.emosEvent=a,this.start()}UserIdleAction.prototype.init=function(a){},UserIdleAction.prototype.getDurationInMS=function(){},UserIdleAction.prototype.onInactive=function(){},UserIdleAction.prototype.start=function(){this.config.active&&this.initUserIdle()},UserIdleAction.prototype.setDuration=function(a){this.config.duration.default=a,this.userIdle&&this.initUserIdle()},UserIdleAction.prototype.initUserIdle=function(){this.clearCurrentUserIdle(),this.userIdle=new UserIdle(this.emosEvent,this.getDurationInMS(),{onInactive:this.onInactive.bind(this),recurrent:!1})},UserIdleAction.prototype.stop=function(){this.clearCurrentUserIdle()},UserIdleAction.prototype.clearCurrentUserIdle=function(){this.userIdle&&(this.userIdle.terminate(),this.userIdle=null)};function UserIdleActionLogout(a,b){UserIdleAction.call(this,a,b)}UserIdleActionLogout.prototype=Object.create(UserIdleAction.prototype),UserIdleActionLogout.prototype.constructor=UserIdleActionLogout,UserIdleActionLogout.prototype.init=function(a){this.config=a.userIdleAction.actionLogoff,this.waitingForLogoff=!1,this.onAuthentication=this.onAuthentication.bind(this)},UserIdleActionLogout.prototype.getDurationInMS=function(){return 6e4*this.config.duration.default},UserIdleActionLogout.prototype.onInactive=function(){emosWS.sendLogoff(),this.waitingForLogoff=!0},UserIdleActionLogout.prototype.start=function(){this.config.active&&(this.emosEvent.addEventListener("authentication",this.onAuthentication,!1),emosWS&&null!==emosWS.login.au.userName&&this.initUserIdle())},UserIdleActionLogout.prototype.stop=function(){this.emosEvent.removeEventListener("authentication",this.onAuthentication),this.clearCurrentUserIdle()},UserIdleActionLogout.prototype.onAuthentication=function(a){"PASSED"===a.status?this.onLogin():this.onLogoff()},UserIdleActionLogout.prototype.onLogin=function(){this.initUserIdle()},UserIdleActionLogout.prototype.onLogoff=function(){this.clearCurrentUserIdle(),this.waitingForLogoff&&(this.waitingForLogoff=!1,this.emosEvent.dispatchEvent({type:"Auto_Logoff_Reload"}))};function UserIdleActionReload(a,b){UserIdleAction.call(this,a,b)}UserIdleActionReload.prototype=Object.create(UserIdleAction.prototype),UserIdleActionReload.prototype.constructor=UserIdleActionReload,UserIdleActionReload.prototype.init=function(a){this.config=a.userIdleAction.actionLogoff},UserIdleActionReload.prototype.getDurationInMS=function(){return 36e5*this.config.duration.default},UserIdleActionReload.prototype.onInactive=function(){this.emosEvent.dispatchEvent({type:"4h_Reload"})};var version="1.0.6-010",emosWS=function(){var a=0,b=null,c=!1,d=!1,e=null,f=null,g=-1,h=3e3,i=-1,j={},k={},l={},m={},n={},o={},p={},q=Definition.languageID,r=Definition.unitID,s=Definition.tagType,t,u=3e3,v=void 0,w=null,x={au:null},y=void 0,z="",A=new ClientTest,B=new EventDispatcher,C=new Cas,D=new Rest,E=[],F=[],G=[],H=[],I={stillInit:!1,callback:null,param:null,globalVariablesSetCallBackAble:!1},J={event:null,param:null},K={onopen:[],onmessage:[],onclose:[],onerror:[],infoListener:[],systemInfoListener:[],languageListener:[]},L={svgobject:null,svg:null,supportForeignObject:document.implementation.hasFeature("www.http://w3.org/TR/SVG11/feature#Extensibility","1.1"),ready:!1,eventQueue:[],DiagnosisWindowMode:0,diagnosisMap:{},allowPoke:"undefined"==typeof emosAllowPoke||emosAllowPoke,site:{type:"SiteProperties",AckALM:"",QuitALM:"",BreadcrumbLevel:0,Trends:[]},userIdleAction:{actionLogoff:{active:!0,duration:{min:.5,max:30,default:10}},actionReload:{active:!0,duration:{min:.5,max:96,default:4}}}},M=[],N=new BlinkInterval(500),O={},P=new IDB,Q=new Debug,R=new UserIdleActionLogout(B,L),S=new UserIdleActionReload(B,L);new BINDX("DS_STATIC_BINDX_READ"),new BINDX("DS_STATIC_BINDX_WRITE"),new BINDX("DS_STATIC_BINDX_SUBSCRIPTION"),window.addEventListener("message",T);function T(a){var b=JSON.parse(a.data);switch(b.type){case"setLanguage":fa(b.languageID),B.dispatchEvent({type:"language",message:b.languageID});break;case"setUnit":ga(b.unitID);break;case"access_token":ha(b),B.dispatchEvent({type:"access_token",message:b});break;case"OpenDiagnosisWindow":B.dispatchEvent({type:"OpenDiagnosisWindow",message:b});break;case"SiteProperties":B.dispatchEvent({type:"SiteProperties",message:b});break;case"DiagnosisWindowClosed":U(b),B.dispatchEvent({type:"DiagnosisWindowClosed",message:b});break;case"DiagnosisWindowMode":W(b),B.dispatchEvent({type:"DiagnosisWindowMode",message:b})}}function U(a){var b=L.diagnosisMap[a.id];b&&b.unhighlight()}function V(){L.site&&(L.site.Links=zb(),Y(L.site))}function W(a){L.DiagnosisWindowMode=a.mode,L.userIdleAction.actionLogoff.active=!1,L.userIdleAction.actionReload.active=!1,R.stop(),V()}function X(a){try{if("undefined"!=typeof window.parent.postMessage){window.parent.postMessage(a,location.href);for(var b=0,c=window.parent.frames.length;b<c;b++)window.parent.frames[b].postMessage(a,"*")}}catch(a){console.error("propagateMessage() failed: "+a)}}function Y(a){try{"undefined"!=typeof window.parent.postMessage&&window.parent.postMessage(JSON.stringify(a),"*")}catch(a){console.error("informFramework() failed: "+a)}}function Z(){L.eventQueue.forEach(function(a){a.o.addEventListener(a.event,a.listener,a.capture)}),L.ready=!0,L.eventQueue=[]}function _(){fa(ba())}function aa(){ga(ca())}function ba(){return void 0===v?"undefined"!=typeof defaultLanguage?defaultLanguage:"undefined"!=typeof localStorage&&"undefined"!=typeof localStorage.emosLanguage?localStorage.emosLanguage:q.DECP_German.value:v}function ca(){return void 0===y?"undefined"!=typeof defaultUnit?defaultUnit:"undefined"!=typeof localStorage&&"undefined"!=typeof localStorage.emosUnit?parseInt(localStorage.emosUnit):r.Metric:y}function da(){return e}function ea(){return f}function fa(a){if("undefined"!=typeof a&&v!==a&&c){v=a,"undefined"!=typeof localStorage&&(localStorage.emosLanguage=a),_a(a);var b=new Object;b.type="setLanguage",b.languageID=a,X(JSON.stringify(b))}}function ga(a){if("undefined"!=typeof a&&y!==a&&c){y=a,"undefined"!=typeof localStorage&&(localStorage.emosUnit=a),B.dispatchEvent({type:"unit",message:a});var b=new Object;b.type="setUnit",b.unitID=a,X(JSON.stringify(b))}}function ha(a){"undefined"!=typeof a&&x.au.onAccesToken(a)}function ia(a){return"undefined"!=typeof a.quality&&192===a.quality}function ja(a){try{if(B.addEventListener("openWS",function(){}),B.addEventListener("connecting",function(){}),B.addEventListener("unit",function(){}),B.addEventListener("ready",Z),B.addEventListener("DiagnosisWindowMode",function(){}),B.addEventListener("Auto_Logoff_Reload",function(){}),B.addEventListener("4h_Reload",function(){}),B.addEventListener("ActiveCasServer",C.onActiveCasServer.bind(C)),B.addEventListener("Quality",function(){}),"undefined"!=typeof mainsvg&&(L.svgobject=document.getElementById(mainsvg),L.svgobject&&(L.svg=L.svgobject.getSVGDocument())),x.au=window.LoginDialog||new LoginDialog,"undefined"!=typeof a){if("undefined"!=typeof a.host&&(K.host=a.host),"undefined"!=typeof a.onopen)try{a.onopen(),B.dispatchEvent({type:"ready"})}catch(a){console.error("[config.onopen] : ",a)}"undefined"!=typeof a.onmessage&&B.addEventListener("message",a.onmessage),"undefined"!=typeof a.onclose&&B.addEventListener("close",a.onclose),"undefined"!=typeof a.onerror&&B.addEventListener("error",a.onerror),"undefined"!=typeof a.infoListener&&B.addEventListener("info",a.infoListener),"undefined"!=typeof a.systemInfoListener&&B.addEventListener("systemInfo",a.systemInfoListener),"undefined"!=typeof a.languageListener&&B.addEventListener("language",a.languageListener)}"undefined"==typeof K.host&&"undefined"!=typeof serverPool&&(K.host=hb());var c=ib(K.host);console.info("[",location.pathname,"] connecting to [",c,"]"),null===b||3===b.readyState?(e=c,f=location.protocol+"//"+K.host,B.dispatchEvent({type:"connecting",message:"connecting"}),b=new WebSocket(c),b.onopen=ka,b.onmessage=la,b.onclose=eb,b.onerror=fb):1===b.readyState&&"undefined"!=typeof a.onopen&&a.onopen()}catch(a){console.error("[connect() failed] : ",a)}}function ka(){try{c||(console.info("[",location.pathname,"] established a WS connection"),c=!0,rb(),lb(),t=!0,mb(),_(),aa(),B.dispatchEvent({type:"openWS"}),d&&Object.keys(n).length>0?Ca():B.dispatchEvent({type:"open"}))}catch(a){console.error("onEmosOpen() failed: "+a)}}function la(a){try{t&&(t=!1);var b=JSON.parse(a.data),c;switch(b.type){case"dataChange":case"alarmText":case"trendInfo":case"trendPlantList":case"trendItemList":case"trendItemValueList":case"diagnosisWindow":if("diagnosisWindow"===b.type&&(b.value=JSON.parse(b.value)),"undefined"!=typeof n[b.id]){var d=n[b.id];c=d.parameter,d.callback(b,c)}break;case"systemInfo":B.dispatchEvent({type:"systemInfo",message:b});break;case"info":B.dispatchEvent({type:"info",message:b});break;case"general":switch(b.key){case"TestSVGRender":A.testSVGRender(b);break;case"Authentication":B.dispatchEvent({type:"authentication",message:JSON.parse(b.value)});break;case"ActiveCasServer":B.dispatchEvent({type:"ActiveCasServer",message:JSON.parse(b.value)}),B.dispatchEvent({type:"ActiveCasServerReady",message:JSON.parse(b.value)})}}B.dispatchEvent({type:"message",message:b})}catch(a){console.error("onEmosMessage() failed: "+a)}}function ma(a,b,c,d,e,f,g,h,i,j,k,l){return b=b?b:s.IO.id,b.subscriberGroup.prototype.getTagId(a,b,c,d,e,f,g,h,i,j,k,l)}function na(a,b,c,d,e,f,g,h,i,j,l,m,n,o){try{if(""===a)return;d=d||Definition.tagType.IO;var p=ma(a,d,e,f,g,h,i,j,l,m,n,o),q=k[p];"undefined"==typeof q&&(q=new d.subscriberGroup(a,d,e,f,g,h,i,j,l,m,n,o),k[p]=q);var r=new Subscriber(b,c);return q.register(r),q}catch(a){console.error("advise() error: "+a)}}function oa(a){var b,c=a.lastIndexOf(".");return c>0&&(b=a.substring(c+1,a.length),a=a.substring(0,c)),Object.keys(s).forEach(function(a){if(s[a].id===b)return s[a]}),s.IO}function pa(a,b){try{var c=k[a];c&&c.unregister(b)}catch(a){console.error("unAdvise() error: "+a)}}function qa(a,b){var c=wa(a,b);return c?c.value:null}function ra(a,b,c,d,e,f,g,h,i,j,k,l){var m=xa(a,b,c,d,e,f,g,h,i,j,k,l);return m?m.value:null}function sa(a,b,c){var d=ya(a,b,s.Text);return d?d.value:c?c:"N/A"}function ta(a,b){try{var c=ya(a,"",s.Alarm);if(c){b=b.toLowerCase();var d=!1,e=null;if(e=b.replace(/PrioMin(\d+)/i,function(a,b){return d=!0,b=parseInt(b),c.classStateRec.prioFrom[b]}),d)return e;if(e=b.replace(/PrioMax(\d+)/i,function(a,b){return d=!0,b=parseInt(b),c.classStateRec.prioTo[b]}),d)return e;if(e=b.replace(/State(\d+)/i,function(a,b){d=!0;var e=intToBinary(c.classStateRec.ClassStateNew,32);return"1"===e.charAt(31-b)?0:(e=intToBinary(c.classStateRec.ClassStateAck,32),"1"===e.charAt(31-b)?1:2)}),d)return e;if(e=b.replace(/State(New|Ack)/i,function(a,b){d=!0;var e="new"===b.toLowerCase()?c.classStateRec.ClassStateNew:c.classStateRec.ClassStateAck;return"string"==typeof e&&(e=parseInt(e,2)),e}),d)return e}return null}catch(a){return console.error("[getAlarmGroupProperty] failed: "+a),null}}function ua(a,b){try{var c=ya(a,"",s.Property);return c?c.value[b]:null}catch(a){return console.error("[getTagProperty] failed: "+a),null}}function va(a,b){var c=wa(a,b);return!!c&&192===c.quality}function wa(a,b){return ya(a,b,s.IO)}function xa(a,b,c,d,e,f,g,h,i,j,k,l){return ya(a,b,s.IOObject,c,d,e,f,g,h,i,j,k,l)}function ya(a,b,c,d,e,f,g,h,i,j,l,m,n){try{if(a="undefined"==typeof b?a:a+b,I.stillInit)return na(a,I.callback?I.callback.datachangeListener:null,I.param,c,d,e,f,g,h,i,j,l,m,n),null;var o=k[ma(a,c,d,e,f,g,h,i,j,l,m,n)];return"undefined"==typeof o?null:o.actualData}catch(a){console.error("getTagData() error: "+a)}}function za(a,d,e){var f;try{"function"==typeof d&&(a.id=Aa(d,a,e)),f=JSON.stringify(a);var g=function(){b.send(f)};return c?g():B.addEventListener("open",g),a.id}catch(a){console.log("send failed: "+a)}}function Aa(a,b,c){try{b.id=++i;var d=new Object;return d.callback=a,d.parameter=c,d.message=b,n[i]=d,"undefined"!=typeof c&&(j[c]=i),i}catch(a){console.error("addDatachangCallback failed: "+a)}}function Ba(a){try{delete n[a]}catch(a){console.error("removeDatachangCallback failed: "+a)}}function Ca(){console.log("readviseHistory");try{for(var a in n)za(n[a].message)}catch(a){console.error("readviseHistory failed: "+a)}}function Da(a,b,c,d){if(!a||""===a&&""===b)console.error("plc / tag is not valid: plc = "+a+" / tag = "+b);else{var e={};e.id="",e.type="advise",e.plc=a,e.tag=b,za(e,c,d)}}function Ea(a,b,c,d){if(!a||""===a&&""===b)console.error("plc / tag is not valid: plc = "+a+" / tag = "+b);else{var e={};e.id="",e.type="adviseAlarm",e.plc=a,e.tag=b,za(e,c,d)}}function Fa(a,b,c,d){if(a){var e={};return e.id="",e.type="adviseAlarmText",e.alarmGroup=a,e.languageID=b,za(e,c,d)}console.error("alarmGroup is not valid: alarmGroup = "+a)}function Ga(a){try{if("*** tag not found ***"===a||""===a)return null;var b={};return props=a.split(";"),props.forEach(function(a){pair=a.split("="),pair&&(b[pair[0]]=pair[1])}),b}catch(a){return console.error("[convertPropertyStringToObject] failed: "+a),null}}function Ha(a,b,c,d){if(!a||""===a&&""===b)console.error("plc / tag is not valid: plc = "+a+" / tag = "+b);else{var e={};e.id="",e.type="adviseProperty",e.plc=a,e.tag=b,za(e,function(a,b){a.value=Ga(a.value),c(a,b)},d)}}function Ia(a,b){var c={};c.id="",c.type="trendRegister",za(c,a,b)}function Ja(a,b,c){var d={};d.type="trendGetPlantList",d.trendId=a,za(d,b,c)}function Ka(a,b,c,d){var e={};e.type="trendGetItemList",e.trendId=a,e.plc=b,za(e,c,d)}function La(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r={};r.type="trendGetItemValueList",r.trendId=a,r.plc=b,r.tag=c,r.startYear=d,r.startMonth=e,r.startDay=f,r.startHour=g,r.startMinute=h,r.startSecond=i,r.endYear=j,r.endMonth=k,r.endDay=l,r.endHour=m,r.endMinute=n,r.endSecond=o,za(r,p,q)}function Ma(a,b,c,d){var e={};e.id="",e.type="adviseText",e.textID=a,e.subID=b,za(e,c,d)}function Na(a,b,c,d){if(d&&d.plc){var e=a;e.replace(/^(T0[1,3,5]_)(&(.)_)?((\.)?.*\.)?([E,G])(7\d{3,})(_.*)?$/,function(a,e,f,g,h,i,j,k,l){h?i||(h+="."):h=".GP.";var m=d.plc+h+j+k+l;emosWS.advise(m,function(a){var h=f?g:"S",i=e+h+a.value;["A","B","F","W"].indexOf(h)>-1&&(b="message"),Ma(i,b,c,d)},"",emosWS.tagType.IO)})}Ma(a,b,c,d)}function Oa(a,b,c){var d={},e=0;"undefined"!=typeof c&&(e=j[c],Ba(e)),d.type="unadvise",d.id=e,d.plc=a,d.tag=b,za(d)}function Pa(a){if("undefined"!=typeof a){var b={};Ba(a),b.type="unadvise",b.id=a,b.plc="",b.tag="",za(b)}}function Qa(a,b,c,d){try{var e=document.getElementById(d).value;Ra(a,b,c,e)}catch(a){console.error("sendPokeByIdValue failed: "+a)}}function Ra(a,b,c,d){if(L.allowPoke){var e={};e.type="poke",e.id=a,e.plc=b,e.tag=c,e.value=d,za(e)}}function Sa(a,b,c,d){var e={};e.id="",e.type="login",e.username=a,e.password=b,za(e,c,d)}function Ta(a,b,c,d){var e={};e.id="",e.type="loginByKey",e.key=a,e.keytype=d||"ticket",za(e,b,c)}function Ua(a,b){var c={};c.id="",c.type="logoff",za(c,a,b)}function Va(a,b,c,d,e){var f={id:"",type:"getDiagnosisWindow",lib:a,wintype:b,name:c};za(f,d,e)}function Wa(a){try{if(a){var b=new Object;b.plc="",b.tag="";var c=a.indexOf(".");return c>0?(b.plc=a.substring(0,c),b.tag=a.substring(c,a.length)):(b.plc=a,b.tag=""),b}return null}catch(a){console.error("getPLCTag failed: "+a)}}function Xa(a){try{if(a){var b=new Object;b.plc="",b.tag="";var c=a.lastIndexOf(".");return c>0?(b.plc=a.substring(0,c),b.tag=a.substring(c,a.length)):(b.plc=a,b.tag=""),b}return null}catch(a){console.error("getPLCTagLast() failed: "+a)}}function Ya(a,b){try{if("string"==typeof a){var c=Xa(a);null!==b&&null!==a&&Ra("0",c.plc,c.tag,String(b))}}catch(a){console.error("poke() failed: "+a)}}function Za(a,b){try{var c=$a(a,s.IOObjectPLC);"undefined"!=typeof c&&c.setValue(b)}catch(a){console.error("[pokeExt()] failed: "+a)}}function $a(a,b){return k[ma(a,b)]}function _a(a){var b={};b.type="setLanguage",b.languageID=a,za(b)}function ab(a,b,d,e){try{var f=0,g=500;"undefined"==typeof e&&(e=g);var h=setInterval(function(){c?(f++,Ra(0,b,d,f)):clearInterval(this)},e);m[a]=h}catch(b){console.error("autoPoke() failed: "+b),bb(a)}}function bb(a){try{clearInterval(m[a])}catch(a){console.error("stopAutoPoke failed: "+a)}}function cb(){if(confirm("Be careful! This action will terminate the server service. Do you really want to do this?")){var a={};a.type="info",a.info="stopMainThread",za(a)}}function db(){if(confirm("Do you really want to reload the CommLib.dll at server?")){var a={};a.type="info",a.info="reloadCommLib",za(a)}}function eb(a){c=!1,console.log("The connection is disconnected!"),B.dispatchEvent({type:"close",message:a});try{gb()}catch(a){console.error("onClose() failed: "+a)}}function fb(a,c){console.log("The connection gets error: "+a.data+" readyState = "+b.readyState),B.dispatchEvent({type:"error",message:a})}function gb(){try{d=!0,"undefined"==typeof serverPool?ja():ja({host:hb()})}catch(a){console.error("reconnect() failed: "+a)}}function hb(){try{if("undefined"!=typeof serverPool)return g>serverPool.length-1?g=0:g++,serverPool[g]}catch(a){console.error("getNextServer() failed: "+a)}}function ib(a){var b,c="https:"===location.protocol?"wss://":"ws://",d=""===document.location.port?"":":"+document.location.port,e="undefined"==typeof endpointName?"/emosweb":"/"+endpointName;if("undefined"==typeof a)a=document.location.hostname,b=c+(""===document.location.hostname?"localhost":document.location.hostname)+d+e;else{var f=a,g="",h=a.indexOf("/");h>0&&(f=a.substring(0,h),g=a.substring(h));var i="ws://"===c?serverPort:serverHttpsPort;"undefined"!=typeof i&&(d=":"+i),b=c+f+d+g+e}return z=d,b}function jb(){var a="https://"+document.location.hostname+z+"/authentication.htm?url="+encodeURIComponent(document.location.href)+"&id="+Math.floor(1e9*Math.random()+1);return a}function kb(){c&&(b.close(),c=!1)}function lb(){try{setInterval(function(){if(c){var a={};a.type="info",a.info="alive",za(a)}else clearInterval(this)},h)}catch(a){console.error("sendAliveMessage() failed: "+a)}}function mb(){try{setTimeout(function(){t&&b.close()},u)}catch(a){console.error("checkConnection() failed: "+a)}}function nb(a){"function"==typeof a&&B.addEventListener("language",a)}function ob(a,b){try{var c=0,d=a.length,e=function(){c===d&&b()};a.forEach(function(a){"undefined"==typeof o[a]?$.when($.get(a)).done(function(a){$("head").append("<style>"+a+"</style>"),c++,e()}):d--}),e()}catch(a){console.error("getCSS() failed: "+a)}}function pb(a,b){try{var c=0,d=a.length;$.ajaxSetup({
cache:!0});var e=function(){c===d&&b()};a.forEach(function(a){"undefined"==typeof p[a]?$.getScript(a,function(a,b,d){c++,e()}):d--}),e()}catch(a){console.error("getJS() failed: "+a)}}function qb(a,b){try{var c=a.js,d=a.css,e=!0,f=!0,g=function(){e&&f&&b()};"undefined"!=typeof c&&(f=!1,pb(c,function(){f=!0,g()})),"undefined"!=typeof d&&(e=!1,ob(d,function(){e=!0,g()}))}catch(a){console.error("getJS() failed: "+a)}}function rb(){try{var a={};a.type="general",a.key="UserAgent",a.value=navigator.userAgent,za(a)}catch(a){console.error("sendUserAgent() failed: "+a)}}function sb(a){return a?stack=M.slice(-a):stack=M,M=[],stack}function tb(a){100===M.length&&(M=[]),M.push(a)}function ub(){return c}function vb(){I.globalVariablesSetCallBackAble=!0,I.stillInit=!1,I.callback=null}function wb(a){F.push(a)}function xb(){I.globalVariablesSetCallBackAble=!1;while(F.length>0)try{F.shift()()}catch(a){}F.length=0}function yb(a,b){var c=null,d=null;if(b&&a){var c=O[b];c||(c=new Shape(b),O[b]=c),d=c.add(a)}return{shape:c,index:d}}function zb(){var a=[],b={};return G.forEach(function(a){b[a.page]=null}),Object.keys(b).forEach(function(b){a.push(b)}),a}function Ab(a){try{a&&(Object.keys(L.site).forEach(function(b){"undefined"==typeof a[b]&&(a[b]=L.site[b])}),L.site=a)}catch(a){console.error("setSiteProperties() failed: "+a)}}function Bb(a,b){var c={};c.type="general",c.key="WriteFrameworkConfiguration",c.value=JSON.stringify({path:a,configuration:b}),za(c)}function Cb(){return[{alg:"$System",text:"$System_Text"},{alg:"110_02F",text:"110_02F_Text"},{alg:"110_02V",text:"110_02V_Text"},{alg:"115_06V",text:"115_06V_Text"},{alg:"120_03V",text:"120_03V_Text"},{alg:"140_05V",text:"140_05V_Text"},{alg:"150_06V",text:"150_06V_Text"},{alg:"198_01V",text:"198_01V_Text"},{alg:"198_02V",text:"198_02V_Text"},{alg:"198_03V",text:"198_03V_Text"},{alg:"210_01V",text:"210_01V_Text"},{alg:"CT_CC01_319101",text:"CT_CC01_319101_Text"},{alg:"CT_CC02_319102",text:"CT_CC02_319102_Text"},{alg:"CT_CC03_319103",text:"CT_CC03_319103_Text"},{alg:"CT_CC04_319104",text:"CT_CC04_319104_Text"},{alg:"CT_CC05_319105",text:"CT_CC05_319105_Text"},{alg:"CT_DEMO_319101",text:"CT_DEMO_319101_Text"},{alg:"CT_PSP",text:"CT_PSP_Text"},{alg:"PT_ECO_312241",text:"PT_ECO_312241_Text"},{alg:"PT_ECP_312221",text:"PT_ECP_312221_Text"},{alg:"PT_ECR_312226",text:"PT_ECR_312226_Text"},{alg:"PT_PTP_312213",text:"PT_PTP_312213_Text"},{alg:"PT_WWP_310212",text:"PT_WWP_310212_Text"},{alg:"PT_DEMO_3316231",text:"PT_DEMO_3316231_Text"},{alg:"Benchmark_PLC1",text:"Benchmark_PLC1_Text"},{alg:"Benchmark_PLC2",text:"Benchmark_PLC2_Text"},{alg:"Benchmark_PLC3",text:"Benchmark_PLC3_Text"},{alg:"Benchmark_PLC4",text:"Benchmark_PLC4_Text"},{alg:"L1GHB1",text:"L1GHB1_Text"},{alg:"L1VFU1",text:"L1VFU1_Text"},{alg:"L1VHK1",text:"L1VHK1_Text"},{alg:"L1VKT1",text:"L1VKT1_Text"},{alg:"L1VTD1",text:"L1VTD1_Text"},{alg:"L1VTF1",text:"L1VTF1_Text"},{alg:"L1VTK1",text:"L1VTK1_Text"},{alg:"L1VVB1",text:"L1VVB1_Text"},{alg:"PT_DS1_316233",text:"PT_DS1_316233_Text"}]}function Db(a,b){return new UserIdle(B,a,b)}return{version:version,Subscriber:Subscriber,GlobalVariable:GlobalVariable,InOut:varInOut,languageID:q,unitID:r,tagType:s,animationData:I,globalID:a,globalStack:M,blinkInterval:N,login:x,Cas:C,tagDestination:k,badQualityTags:l,shapes:O,callbacks:F,attr:L,clickData:J,idb:P,debug:Q,gvNumber:0,glcNumber:0,textNumber:0,animationNumber:0,linkNumber:0,topicNumber:0,shapeNumber:0,links:G,globalVariables:H,rest:D,userIdleActionLogout:R,userIdleActionReload:S,connect:ja,advise:na,unadvise:pa,unadviseById:Pa,poke:Ya,pokeExt:Za,getPLCTag:Wa,getPLCTagLast:Xa,getTagValue:qa,getTagQualityAsBoolean:va,getTagData:wa,getTagObject:ra,getTagProperty:ua,getText:sa,getAlarmGroupProperty:ta,getTagId:ma,getSubscriberGroup:$a,send:za,sendAdvise:Da,sendAdviseText:Na,sendAdviseAlarm:Ea,sendAdviseAlarmText:Fa,sendAdviseProperty:Ha,sendUnadvise:Oa,sendPokeByIdValue:Qa,sendPoke:Ra,sendSetLanguage:_a,sendTrendRegister:Ia,sendTrendGetPlantList:Ja,sendTrendGetItemList:Ka,sendTrendGetItemValueList:La,sendLogin:Sa,sendLoginByKey:Ta,sendLogoff:Ua,sendGetDiagnosisWindow:Va,autoPoke:ab,stopAutoPoke:bb,stopMainThread:cb,reloadCommLib:db,getEndPointURI:ib,closeWebSocket:kb,getLanguage:ba,getUnit:ca,setLanguage:fa,setUnit:ga,hasQualityGood:ia,addLanguageChangeListener:nb,getCSS:ob,getJS:pb,require:qb,getGlobalStack:sb,pushGlobalStack:tb,propagateMessage:X,addEventListener:B.addEventListener.bind(B),removeEventListener:B.removeEventListener.bind(B),dispatchEvent:B.dispatchEvent.bind(B),getWebSocketStatus:ub,listenGlobalVariablesChange:vb,callbackGlobalVariablesChange:xb,addGlobalVariablesChange:wb,addAnimation:yb,getWSHostname:da,getHostname:ea,informParent:Y,writeData:Bb,setSiteProperties:Ab,getAlarmList:Cb,setUserIdle:Db}}();window.emosWS=emosWS,emosWS.EventDispatcher=EventDispatcher,emosWS.fn={getElementGlobalID:function(){return"EMOSUI"+emosWS.globalID++},formatNumber:function(a){return a<10?(100+a).toString().slice(-2):a.toString()},_openWindow:function(a,b,c){privateCallback("window",a,b,c)},_modelessDialog:function(a,b,c){privateCallback("modeless",a,b,c)},_modalDialog:function(a,b,c){privateCallback("modal",a,b,c)},getSVGElement:function(a){try{if(null===a)return;if("undefined"==typeof mainsvg)return document.getElementById(a);var b=document.getElementById(mainsvg).getSVGDocument();return b.getElementById(a)}catch(a){console.log("getSVGElement failed: "+a)}},setStyle:function(a,b){try{if(null===a)return;if("undefined"==typeof mainsvg){var c=document.getElementById(a);for(var d in b)c.style[d]=b[d]}else{var e=document.getElementById(mainsvg).getSVGDocument(),f=e.getElementById(a);for(var d in b)setStyleDeep(f,d,b[d])}}catch(a){console.log("setStyle failed: "+a)}},setStyleDeep:function(a,b,c){if(null!==a)if("g"===a.tagName)for(var d=0,e=a.childNodes.length;d<e;d++)setStyleDeep(a.childNodes[d],b,c);else if("undefined"!=typeof a.style)switch(b){case"fill":var f=a.getAttribute("fill"),g=f.match(/url\(#(.*)\)/);if(g){var h=document.getElementById(mainsvg).getSVGDocument().getElementById(g[1]),i=h.childNodes[1];i.setAttribute("stop-color",c)}else a.style.fill=c;break;default:a.style[b]=c}},setFillColor:function(a,b){try{if("undefined"==typeof mainsvg)document.getElementById(a).style.backgroundColor=b;else{var c=document.getElementById(mainsvg).getSVGDocument(),d=c.getElementById(a);d.style.fill=b}}catch(a){console.log("setFillColor failed: "+a)}},setStrokeColor:function(a,b){try{if("undefined"==typeof mainsvg)document.getElementById(a).style.backgroundColor=b;else{var c=document.getElementById(mainsvg).getSVGDocument(),d=c.getElementById(a);d.style.stroke=b}}catch(a){console.log("setFillColor failed: "+a)}},setSize:function(a,b,c,d,e,f,g,h,i,j,k,l){try{if("undefined"!=typeof mainsvg){var m=document.getElementById(mainsvg).getSVGDocument(),n=m.getElementById(a),o=d-c;switch(b<c?b=c:b>d&&(b=d),l){case"Top":var p=(b-c)/o*i;k+=i-p,n.setAttribute("height",p),n.setAttribute("y",k);break;case"Bottom":var p=(b-c)/o*i;n.setAttribute("height",p);break;case"Right":var q=(b-c)/o*i;n.setAttribute("width",q);break;case"Left":var q=(b-c)/o*i;j+=i-q,n.setAttribute("width",q),n.setAttribute("x",j)}}}catch(a){console.log("setFillColor failed: "+a)}},setText:function(a,b){try{if("undefined"!=typeof mainsvg){var c=document.getElementById(mainsvg).getSVGDocument(),d=c.getElementById(a);if(d){var e=d.getElementsByTagName("tspan");if(e){for(var f=0,g=e.length;f<g;f++)e[f].textContent="";e[0].textContent=b}else d.textContent=b}}}catch(a){console.log("setText failed: "+a)}},setVisibility:function(a,b){try{if("undefined"==typeof mainsvg)document.getElementById(a).style.backgroundColor=color;else{var c=document.getElementById(mainsvg).getSVGDocument(),d=c.getElementById(a);d.style.visibility=b?"visible":"hidden"}}catch(a){console.log("setFillColor failed: "+a)}},setEvent:function(a,b,c,d,e){try{var f=!1;if(null===a)return;if("undefined"==typeof mainsvg&&"undefined"==typeof e)document.getElementById(a).addEventListener(b,c,f);else{var g=e?document:document.getElementById(mainsvg).getSVGDocument(),h=g.getElementById(a);if(null===h)return;h.style.cursor=d,h.addEventListener(b,c,f)}}catch(a){console.log("setEvent failed: "+a)}},MaxDouble:function(a,b){var c;try{c=Math.max(a,b)}catch(a){c=null}return c},MinDouble:function(a,b){var c;try{c=Math.min(a,b)}catch(a){c=null}return c},MaxInteger:function(a,b){return MaxDouble(a,b)},MinInteger:function(a,b){return MinDouble(a,b)},Modulo:function(a,b){var c;try{c=a%b}catch(a){c=null}return c},modulo:function(a,b){return Modulo(a,b)},AbsDouble:function(a){var b;try{b=Math.abs(a)}catch(a){b=null}return b},AbsInteger:function(a){return AbsDouble(a)},GetAsStringWithoutQuality:function(a,b){return GetAsString(a,b)},GetAsDoubleWithoutQuality:function(a,b){return GetAsDouble(a,b)},GetAsIntegerWithoutQuality:function(a,b){return GetAsInteger(a,b)},GetAsBooleanWithoutQuality:function(a,b){return GetAsBoolean(a,b)},GetDoubleAsFormattedString:function(a,b){try{switch(typeof b){case"number":return parseFloat(a).toFixed(b);case"string":default:return a}}catch(a){console.error("[GetDoubleAsFormattedString] :",a)}},RoundDouble:function(a,b){var c;try{c=Math.round(a)}catch(a){c=null}return c},RoundInteger:function(a,b){return RoundDouble(a)},GetRegularExpressionReplaced:function(a,b){try{return a+="","null"!==a?b.replace(/(.*)!(.*)/,function(b,c,d){return alert("re="+c+" / rp="+d),a.replace(new RegExp(c,"g"),d)}):null}catch(a){console.error("[GetRegularExpressionReplaced] :",a)}},GetRegularExpressionMatchTest:function(a,b){return a},GetSubStringAsString:function(a,b){return GetSubString(a,b)},getSubStringAsString:function(a,b){return GetSubStringAsString(a,b)},GetSubString:function(a,b){if("string"==typeof a){var c=/\[(R?)(\d+)([-,])(\d*)\]/;return b.replace(c,function(b,c,d,e,f){if(c){var g=a.length;return"-"===e?f?a.substring(g-f+1,g-d+2):a.substring(0,g-d):a.substr(g-d+2-f,g-d+2)}return"-"===e?f?a.substring(d-1,f):a.substring(d-1):a.substr(d-1,f)})}return null},AdviseTag:function(a,b){emosWS.animationData.stillInit=!0,emosWS.animationData.callback=null,emosWS.animationData.param=null,emosWS.getTagValue(a,b),emosWS.animationData.stillInit=!1},GetTagQualityAsBoolean:function(a,b){emosWS.getTagQualityAsBoolean(a,b)},getTagQualityAsBoolean:function(a,b){console.info("[API is not yet implemented] getTagQualityAsBoolean")},getTagQualityAsString:function(a,b){console.info("[API is not yet implemented] getTagQualityAsString")},getTagLastSourceAsString:function(a,b){console.info("[API is not yet implemented] getTagLastSourceAsString")},getTagQualityAsNumber:function(a,b){console.info("[API is not yet implemented] getTagQualityAsNumber")},GetTagProperty:function(a,b){return emosWS.getTagProperty(a,b)},GetTagPropertyAsBoolean:function(a,b){var c=GetTagProperty(a,b);return GetAsBoolean(c)},GetTagPropertyAsInteger:function(a,b){var c=GetTagProperty(a,b);return GetAsInteger(c)},GetTagPropertyAsDouble:function(a,b){var c=GetTagProperty(a,b);return GetAsDouble(c)},GetTagPropertyAsString:function(a,b){var c=GetTagProperty(a,b);return GetAsString(c)},SetTagValue:function(a,b,c){"undefined"==typeof c?SetTagValue(!0,a,b):a&&emosWS.poke(b,c)},ForceTagValue:function(a,b){SetTagValue(a,b)},SetBitInTagValue:function(a,b){console.info("[API is not yet implemented] SetBitInTagValue")},ResetBitInTagValue:function(a,b){console.info("[API is not yet implemented] ResetBitInTagValue")},ToggleBitInTagValue:function(a,b){console.info("[API is not yet implemented] ToggleBitInTagValue")},ForceSetBitInTagValue:function(a,b){SetBitInTagValue(a,b)},ForceResetBitInTagValue:function(a,b){ResetBitInTagValue(a,b)},ForceToggleBitInTagValue:function(a,b){ToggleBitInTagValue(a,b)},SetVariableAs:function(a,b,c){a&&(b instanceof varInOut?b.value=c:b instanceof GlobalVariable&&b.setDirectValue(c))},SetVariableAsString:function(a,b,c){SetVariableAs(a,b,c)},SetVariableAsDouble:function(a,b,c){SetVariableAs(a,b,c)},SetVariableAsInteger:function(a,b,c){SetVariableAs(a,b,c)},SetVariableAsBoolean:function(a,b,c){SetVariableAs(a,b,c)},SetJSVar:function(a,b,c){b&&a&&(window[a]=c)},SetJavaScriptVariable:function(a,b,c){SetJSVar(a,b,c)},SetJSVariableAsString:function(a,b,c){SetJSVar(a,b,c)},SetJSVariableAsDouble:function(a,b,c){SetJSVar(a,b,c)},SetJSVariableAsInteger:function(a,b,c){SetJSVar(a,b,c)},SetJSVariableAsBoolean:function(a,b,c){SetJSVar(a,b,c)},ForceJSVariableAsString:function(a,b,c){SetJSVar(a,b,c)},ForceJSVariableAsDouble:function(a,b,c){SetJSVar(a,b,c)},ForceJSVariableAsInteger:function(a,b,c){SetJSVar(a,b,c)},ForceJSVariableAsBoolean:function(a,b,c){SetJSVar(a,b,c)},GetText:function(a,b,c){return emosWS.getText(a,b,c)},gettext:function(a,b){return GetText(a,b)},GetAlarmGroupStateAsInteger:function(a,b){console.info("[API is not yet implemented] GetAlarmGroupStateAsInteger")},GetAlarmGroupsStateAsInteger:function(a,b){console.info("[API is not yet implemented] GetAlarmGroupsStateAsInteger")},GetAlarmGroupPropertyAsBoolean:function(a,b){return GetAsBoolean(emosWS.getAlarmGroupProperty(a,b))},GetAlarmGroupPropertyAsInteger:function(a,b){return GetAsInteger(emosWS.getAlarmGroupProperty(a,b))},GetAlarmGroupPropertyAsDouble:function(a,b){return GetAsDouble(emosWS.getAlarmGroupProperty(a,b))},GetAlarmGroupPropertyAsString:function(a,b){return GetAsString(emosWS.getAlarmGroupProperty(a,b))},AcknowledgeAlarmGroup:function(a,b){console.info("[API is not yet implemented] AcknowledgeAlarmGroup")},AcknowledgeAlarmGroups:function(a,b){console.info("[API is not yet implemented] AcknowledgeAlarmGroups")},Test:function(a){console.info("[API is not yet implemented] Test")},TST:function(a){console.info("[API is not yet implemented] TST")},TestAndReset:function(a){console.info("[API is not yet implemented] TestAndReset")},TAR:function(a){console.info("[API is not yet implemented] TAR")},Trigger:function(a){console.info("[API is not yet implemented] Trigger")},GetBlinkState:function(a,b){console.info("[API is not yet implemented] GetBlinkState")},GBS:function(a,b){return a&&emosWS.blinkInterval.GBS()},GetObjectPropertyAsString:function(a,b){console.info("[API is not yet implemented] GetObjectPropertyAsString")},GetTagObject:function(a,b,c,d,e,f,g,h,i,j,k,l){return emosWS.getTagObject(a,b,c,d,e,f,g,h,i,j,k,l)},GetTagValueAsBoolean:function(a,b){var c=emosWS.getTagValue(a,b);return GetAsBoolean(c)},GetTagValueasBoolean:function(a,b){return GetTagValueAsBoolean(a,b)},GetTagValueAsboolean:function(a,b){return GetTagValueAsBoolean(a,b)},getTagValueAsBoolean:function(a,b){return GetTagValueAsBoolean(a,b)},getTagValueasBoolean:function(a,b){var c=GetTagValueAsBoolean(a);return c?c:b},getTagValueAsBitByMask:function(a,b,c){console.info("[API is not yet implemented] getTagValueAsBitByMask")},GetTagValueAsInteger:function(a,b){var c=emosWS.getTagValue(a,b);return GetAsInteger(c)},GetTagValueAsiNTEGER:function(a,b){return GetTagValueAsInteger(a,b)},GetTAgValueASInteger:function(a,b){return GetTagValueAsInteger(a,b)},GetTagValueAsinteger:function(a,b){return GetTagValueAsInteger(a,b)},getTagValueAsInteger:function(a,b){return GetTagValueAsInteger(a,b)},getTagValueAsNumber:function(a,b){var c=GetTagValueAsDouble(a);return c?c:b},GetTagValueAsDouble:function(a,b){var c=emosWS.getTagValue(a,b);return GetAsDouble(c)},GetTagValueAsdouble:function(a,b){return GetTagValueAsDouble(a,b)},getTagValueAsDouble:function(a,b){return GetTagValueAsDouble(a,b)},GetTagValueAsString:function(a,b){var c=emosWS.getTagValue(a,b);return GetAsString(c)},gettagvalueasstring:function(a,b){return GetTagValueAsString(a,b)},getTagValueAsString:function(a,b){var c=GetTagValueAsString(a);return c?c:b},GetAsString:function(a,b){var c;try{c=String(a)}catch(a){c=GetAsString(b,null)}return c},getValueAsString:function(a,b){return GetAsString(a,b)},getValueAsNumber:function(a,b){console.info("[API is not yet implemented] getValueAsNumber")},GetAsDouble:function(a,b){var c=parseFloat(a);return isNaN(c)&&(c=c?GetAsDouble(b):null),c},getValueAsDouble:function(a,b){return GetAsDouble(a,b)},GetAsInteger:function(a,b){var c=parseInt(a);return isNaN(c)&&(c=c?GetAsInteger(b):null),c},getValueAsInteger:function(a,b){return GetAsInteger(a,b)},GetAsBoolean:function(a,b){var c=String(a).toLowerCase();switch(c){case"true":case"1":case"-1":c=!0;break;case"false":case"0":c=!1;break;case"null":case"undefined":c=null;break;default:c=GetAsBoolean(b)}return c},getValueAsBoolean:function(a,b){return GetAsBoolean(a,b)},getValueAsBitByMask:function(a,b,c){console.info("[API is not yet implemented] getValueAsBitByMask")},getChildNodes:function(a,b){console.info("[API is not yet implemented] getChildNodes")},getElementByTagNameAndAttribute:function(a,b,c){console.info("[API is not yet implemented] getElementByTagNameAndAttribute")},getElementsFromObject:function(a,b,c){console.info("[API is not yet implemented] getElementsFromObject")},setElementsAttribute:function(a,b,c){console.info("[API is not yet implemented] setElementsAttribute")},setElementsStyleAttribute:function(a,b,c){console.info("[API is not yet implemented] setElementsStyleAttribute")},enrolFunctionToInterval:function(FunctionName,IntervalTime){isNaN(IntervalTime)&&(IntervalTime=500),setInterval(function(){try{eval(FunctionName)}catch(a){console.error("[enrolFunctionToInterval] : ",a)}},IntervalTime<100?100:IntervalTime)},stopFunctionEnrolledAtInterval:function(a){console.info("[API is not yet implemented] stopFunctionEnrolledAtInterval")},startFunctionEnrolledAtInterval:function(a){console.info("[API is not yet implemented] startFunctionEnrolledAtInterval")},enrolFunctionToTrigger:function(a){console.info("[API is not yet implemented] enrolFunctionToTrigger")},enrolFunctionToReadyTrigger:function(a){console.info("[API is not yet implemented] enrolFunctionToReadyTrigger")},stopFunctionEnrolledAtTrigger:function(a){console.info("[API is not yet implemented] stopFunctionEnrolledAtTrigger")},startFunctionEnrolledAtTrigger:function(a){console.info("[API is not yet implemented] startFunctionEnrolledAtTrigger")},appendTag4Reading:function(a,b){AdviseTag(a,b)},appendTag4ReadingByTag:function(a){AdviseTag(a)},getProcessData:function(a,b){console.info("[API is not yet implemented] getProcessData")},getProcessDataByTag:function(a){console.info("[API is not yet implemented] getProcessDataByTag")},browseFrameName:function(a,b){for(var c=0;c<a.frames.length;c++)if(a.frames[c].name===b)return a.frames[c];for(var d=null,c=0;c<a.frames.length;c++)if(d=browseFrameName(a.frames[c],b))return d;return null},loadHREF:function(a,b){var c=window,d=null;"_top"===b.toLowerCase()?c=top:""!==b&&(d=browseFrameName(top,b),d&&(c=d)),c.location.href=a},intToBinary:function(a,b){for(var c=a.toString(2),d=c.length,e=0;e<b-d;e++)c="0"+c;return c},getMainSVGDocument:function(a){var b="undefined"==typeof a?"mainsvg":a,c=null,d=document.getElementById(b);if(d&&d.contentDocument)c=d.contentDocument;else try{c=d.getSVGDocument()}catch(a){return console.log("getMainSVGDocument error: "+a),c}return c},emosExtend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},CheckUserRight:function(a,b){return emosWS.login.au.hasRight(a,b)},getVisibility:function(a){return"visible"===a},getNumberAsFormattedString:function(a,b,c){console.info("[API is not yet implemented] getNumberAsFormattedString")},appendTag4Writing:function(a,b){console.info("[API is not yet implemented] appendTag4Writing")},appendTag4WritingByTag:function(a){console.info("[API is not yet implemented] appendTag4WritingByTag")},writeTagValue:function(a,b,c,d,e,f){console.info("[API is not yet implemented] writeTagValue")},writeTagValueByTag:function(a,b,c,d,e){SetTagValue(a,b)},GetSubstring:function(a,b){return GetSubString(a,b)},GetSubStringAsBoolean:function(a,b){return GetAsBoolean(GetSubString(a,b))},GetSubStringAsInteger:function(a,b){return GetAsInteger(GetSubString(a,b))},GetSubStringAsDouble:function(a,b){return GetAsDouble(GetSubString(a,b))},bitSet:function(a,b){var c=1<<b;return 0!==(a&c)},bitNotSet:function(a,b){return bitSet(a,b)},getUrlVars:function(a){for(var b=[],c,d=a.slice(a.indexOf("?")+1).split("&"),e=0;e<d.length;e++)c=d[e].split("="),b.push({Name:c[0],Value:c[1]}),b[c[0]]=c[1];return b},ReadParametersFromDialogArguments:function(){return window.dialogArguments?getUrlVars(window.dialogArguments):[]},sortHashArray:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}};for(var i in emosWS.fn)window[i]=emosWS.fn[i];window.G_Params=getUrlVars(window.location.search),window.G_DialogArgs=ReadParametersFromDialogArguments();var DS_HMI=function(){function a(a,b,c){try{if(c){var d=window[a.replace(".value","")];d&&d.setValue(b)}}catch(a){console.log("DS_HMI SetVariable() failed: "+a)}}function b(a){emosWS.debug.show()}function c(a){emosWS.debug.show()}function d(a){emosWS.debug.show()}function e(a){emosWS.debug.show()}function f(a){emosWS.debug.show()}function g(a){emosWS.debug.show()}function h(a){alert("Sorry, emos.js currently does not support DebugGlobalVariables!")}return{SetVariable:a,DebugJSCode:b,DebugIOTags:c,DebugCommLib:d,DebugCommLibData:e,DebugCommLibCalls:f,DebugMessages:g,DebugGlobalVariables:h}}();window.DS_HMI=DS_HMI,emosWS.DS_HMI=DS_HMI;function ESAnimation(){if(emosWS.animationNumber++,this.data=null,this.qualityGood=!1,this.badQualityTagList={},this.advisedTagList={},this.shape=null,this.shapeText=null,this.shapeTextContent=null,this.strokeWidthBad=1.5,"undefined"!=typeof this.target){var a=emosWS.addAnimation(this,this.target);this.SHAPE=a.shape,this.index=a.index,this.shape=this.SHAPE.shape,this.shapeText=this.SHAPE.shapeText,this.shapeTextContent=this.SHAPE.shapeTextContent}this.datachangeListener=this.datachangeListener.bind(this),this.initialize=this.initialize.bind(this),this.initialize(),emosWS.dispatchEvent({type:"HMIanimation"})}ESAnimation.prototype.updateTagList=function(a){"undefined"!=typeof a&&(this.advisedTagList[a.tag]=0,emosWS.hasQualityGood(a)?"undefined"!=typeof this.badQualityTagList[a.tag]&&delete this.badQualityTagList[a.tag]:this.badQualityTagList[a.tag]=0,this.qualityGood=0===Object.keys(this.badQualityTagList).length)},ESAnimation.prototype.checkQuality=function(){try{var a={};this.useQuality&&(a.stroke=this.qualityGood?this.strokeColorQualityGood:this.strokeColorQualityBad,a["stroke-width"]=this.qualityGood?this.SHAPE.strokeWidth:this.strokeWidthBad),this.hideIfQualityBad&&!this.qualityGood&&(a.visibility="hidden"),this.setStyle(a)}catch(a){console.error("[",this.constructor.name,"] checkQuality failed: ",a)}},ESAnimation.prototype.setCallback=function(){emosWS.animationData.callback=this},ESAnimation.prototype.datachangeListener=function(a){try{emosWS.animationData.stillInit&&this.setCallback(),this.updateTagList(a),this.datachangeListenerMore(a)}catch(a){console.log(this.constructor.name+": datachangeListener failed: "+a)}},ESAnimation.prototype.datachangeListenerMore=function(){},ESAnimation.prototype.initialize=function(){try{emosWS.animationData.stillInit=!0,this.setCallback(),this.unadvise(),this.initializeMore()}catch(a){console.log(this.constructor.name+": initialize failed: "+a)}},ESAnimation.prototype.initializeMore=function(){},ESAnimation.prototype.unadvise=function(){try{for(var a in this.advisedTagList)emosWS.unadvise(a,this);this.badQualityTagList={},this.advisedTagList={},this.unadviseMore()}catch(a){console.log(this.constructor.name+": unadvise failed: "+a)}},ESAnimation.prototype.unadviseMore=function(){},ESAnimation.prototype.setStyle=function(a){this.SHAPE&&this.SHAPE.setStyle(a,this.index)},ESAnimation.prototype.getDetail=function(){return this.constructor.name+"\n\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\xaf\n"+this.toString()},ESAnimation.prototype.toString=function(){var a=this,b={};for(var c in a)a.hasOwnProperty(c)&&"object"!=typeof a[c]&&"function"!=typeof a[c]&&(b[c]=a[c]);var d=JSON.stringify(b);return d},emosWS.ESAnimation=ESAnimation;function ESAnimation2(){ESAnimation.call(this)}ESAnimation2.prototype=Object.create(ESAnimation.prototype),ESAnimation2.prototype.constructor=ESAnimation2,ESAnimation2.prototype.datachangeListenerMore=function(){try{this.condition=this.conditionFunction(),this.startAnimate()}catch(a){console.log(this.constructor.name+"datachangeListenerMore failed: "+a)}},ESAnimation2.prototype.initializeMore=function(){try{this.condition=this.conditionFunction(),emosWS.animationData.stillInit=!1,null!==this.condition?this.startAnimate():this.checkQuality()}catch(a){console.log("initializeMore failed: "+a)}},emosWS.ESAnimation2=ESAnimation2;function ESAnimation3(){ESAnimation.call(this)}ESAnimation3.prototype=Object.create(ESAnimation.prototype),ESAnimation3.prototype.constructor=ESAnimation3,ESAnimation3.prototype.datachangeListenerMore=function(){try{this.doCondition(),this.startAnimate()}catch(a){console.log(this.constructor.name+": datachangeListenerMore failed: "+a)}},ESAnimation3.prototype.doCondition=function(){},ESAnimation3.prototype.initializeMore=function(){try{this.doCondition(),emosWS.animationData.stillInit=!1,null!==this.condition&&this.startAnimate()}catch(a){console.log("initializeMore failed: "+a)}};var EScriptGlobal=function(a){this.globalScript=a,this.timeout=100,this.timeoutJob=null,this.initialized=!1,this.index=1,this.globalFunction=function(){this.initialized?(null!==this.timeoutJob&&clearTimeout(this.timeoutJob),this.scheduleJob()):this.runGlobalScript()}.bind(this),ESAnimation.call(this)};EScriptGlobal.prototype=Object.create(ESAnimation.prototype),EScriptGlobal.prototype.constructor=EScriptGlobal,EScriptGlobal.prototype.scheduleJob=function(){this.timeoutJob=setTimeout(function(){this.runGlobalScript(),this.timeoutJob=null}.bind(this),this.timeout)},EScriptGlobal.prototype.runGlobalScript=function(){console.info("[Calling EScriptGlobal: ",this.index++,"]"),this.globalScript()},EScriptGlobal.prototype.datachangeListenerMore=function(){try{this.globalFunction()}catch(a){console.log(this.constructor.name+"datachangeListenerMore failed: "+a)}},EScriptGlobal.prototype.initialize=function(){try{emosWS.animationData.stillInit=!0,emosWS.animationData.callback=this,this.initializeMore()}catch(a){console.log(this.constructor.name+": initialize failed: "+a)}},EScriptGlobal.prototype.initializeMore=function(){try{this.globalFunction(),this.initialized=!0,emosWS.animationData.stillInit=!1}catch(a){console.log("initializeMore failed: "+a)}},window.EScriptGlobal=EScriptGlobal,emosWS.EScriptGlobal=EScriptGlobal;var TAlarmRecord=function(a,b,c){this.Name=a,this.Color=b,this.Actioncode=c};emosWS.AlarmRecord=TAlarmRecord;function AColorBlink(a){this.conditionFunction=a.conditionFunction,this.condition=!1,this.swapFillcolor=a.PLACEHOLDER_SWAP_FILLCOLOR,this.swapStrokecolor=a.PLACEHOLDER_SWAP_STROKECOLOR,this.swapVisibility=a.PLACEHOLDER_SWAP_VISIBILITY,this.useFalse=a.PLACEHOLDER_SWAP_USEFALSE,this.useQuality=a.PLACEHOLDER_SWAP_USEQUALITY,this.fillColorOn=a.PLACEHOLDER_FILLCOLORON,this.fillColorOff=a.PLACEHOLDER_FILLCOLOROFF,this.fillColorFalse=a.PLACEHOLDER_FILLCOLORFALSE,this.fillColor,this.strokeColor,this.strokeColorQualityGood=a.PLACEHOLDER_STROKECOLORQUALITYGOOD,this.strokeColorQualityBad=a.PLACEHOLDER_STROKECOLORQUALITYBAD,this.strokeColorOn=a.PLACEHOLDER_STROKECOLORON,this.strokeColorOff=a.PLACEHOLDER_STROKECOLOROFF,this.strokeColorFalse=a.PLACEHOLDER_STROKECOLORFALSE,this.visibilityOn=a.PLACEHOLDER_VISIBILITYON,this.visibilityOff=a.PLACEHOLDER_VISIBILITYOFF,this.visibilityFalse=a.PLACEHOLDER_VISIBILITYFALSE,this.target=a.STDPLACEHOLDER_SHAPENAME,this.interval=0,this.trigger=function(){this.animate()}.bind(this),ESAnimation2.call(this)}AColorBlink.prototype=Object.create(ESAnimation2.prototype),AColorBlink.prototype.constructor=AColorBlink,AColorBlink.prototype.startAnimate=function(){this.condition?0===this.interval&&(this.interval=1,emosWS.blinkInterval.addListener(this.trigger,!0)):(0!==this.interval&&(emosWS.blinkInterval.removeListener(this.trigger),this.interval=0),this.animate(this))},AColorBlink.prototype.animate=function(){var a={fill:null,stroke:null,visibility:null};this.useQuality&&(a.stroke=this.qualityGood?this.strokeColorQualityGood:this.strokeColorQualityBad,a["stroke-width"]=this.qualityGood?this.SHAPE.strokeWidth:this.strokeWidthBad),this.condition?emosWS.blinkInterval.active?(this.swapFillcolor&&(a.fill=this.fillColorOn),this.swapStrokecolor&&(a.stroke=this.strokeColorOn),this.swapVisibility&&(a.visibility=this.visibilityOn?"visible":"hidden")):(this.swapFillcolor&&(a.fill=this.fillColorOff),this.swapStrokecolor&&(a.stroke=this.strokeColorOff),this.swapVisibility&&(a.visibility=this.visibilityOff?"visible":"hidden")):this.useFalse&&(this.swapFillcolor&&(a.fill=this.fillColorFalse),this.swapStrokecolor&&(a.stroke=this.strokeColorFalse),this.swapVisibility&&(a.visibility=this.visibilityFalse?"visible":"hidden")),this.setStyle(a)},AColorBlink.prototype.toString=function(){return"conditionFunction\n"+this.conditionFunction+"\n\ncondition = "+this.condition+"\n\nswapFillcolor = "+this.swapFillcolor+"\nswapStrokecolor = "+this.swapStrokecolor+"\nswapVisibility = "+this.swapVisibility+"\n\nuseFalse = "+this.useFalse+"\nuseQuality = "+this.useQuality+"\n\nfillColorOn = "+this.fillColorOn+"\nfillColorOff = "+this.fillColorOff+"\nfillColorFalse = "+this.fillColorFalse+"\n\nstrokeColorQualityGood = "+this.strokeColorQualityGood+"\nstrokeColorQualityBad = "+this.strokeColorQualityBad+"\nstrokeColorOff = "+this.strokeColorOff+"\nstrokeColorFalse = "+this.strokeColorFalse+"\n\nvisibilityOn = "+this.visibilityOn+"\nvisibilityOff = "+this.visibilityOff+"\nvisibilityFalse = "+this.visibilityFalse+"\n"},emosWS.ESColorBlink=AColorBlink;function AColorSwap(a){this.conditionFunction=a.conditionFunction,this.condition=!1,this.swapFillcolor=a.PLACEHOLDER_SWAP_FILLCOLOR,this.swapStrokecolor=a.PLACEHOLDER_SWAP_STROKECOLOR,this.swapVisibility=a.PLACEHOLDER_SWAP_VISIBILITY,this.useTrue=a.PLACEHOLDER_SWAP_USETRUE,this.useFalse=a.PLACEHOLDER_SWAP_USEFALSE,this.useQuality=a.PLACEHOLDER_SWAP_USEQUALITY,this.fillColorTrue=a.PLACEHOLDER_FILLCOLOR,this.fillColorFalse=a.PLACEHOLDER_FILLCOLORFALSE,this.fillColor,this.strokeColor,this.strokeColorQualityGood=a.PLACEHOLDER_STROKECOLORQUALITYGOOD,this.strokeColorQualityBad=a.PLACEHOLDER_STROKECOLORQUALITYBAD,this.strokeColorTrue=a.PLACEHOLDER_STROKECOLOR,this.strokeColorFalse=a.PLACEHOLDER_STROKECOLORFALSE,this.visibilityTrue=a.PLACEHOLDER_VISIBILITY,this.visibilityFalse=a.PLACEHOLDER_VISIBILITYFALSE,this.hideIfQualityBad=a.PLACEHOLDER_SWAP_HIDEIFQUALITYBAD,this.target=a.STDPLACEHOLDER_SHAPENAME,ESAnimation2.call(this)}AColorSwap.prototype=Object.create(ESAnimation2.prototype),AColorSwap.prototype.constructor=AColorSwap,AColorSwap.prototype.startAnimate=function(){var a={fill:null,stroke:null,visibility:null};this.useQuality&&(a.stroke=this.qualityGood?this.strokeColorQualityGood:this.strokeColorQualityBad,a["stroke-width"]=this.qualityGood?this.SHAPE.strokeWidth:this.strokeWidthBad),this.hideIfQualityBad&&(a.visibility=this.qualityGood?"visible":"hidden"),this.condition?this.useTrue&&(this.swapFillcolor&&(a.fill=this.fillColorTrue),this.swapStrokecolor&&(a.stroke=this.strokeColorTrue),this.swapVisibility&&(a.visibility=this.visibilityTrue?"visible":"hidden")):this.useFalse&&(this.swapFillcolor&&(a.fill=this.fillColorFalse),this.swapStrokecolor&&(a.stroke=this.strokeColorFalse),this.swapVisibility&&(a.visibility=this.visibilityFalse?"visible":"hidden")),this.setStyle(a)},AColorSwap.prototype.toString=function(){return"conditionFunction\n"+this.conditionFunction+"\n\ncondition = "+this.condition+"\n\nswapFillcolor = "+this.swapFillcolor+"\nswapStrokecolor = "+this.swapStrokecolor+"\nswapVisibility = "+this.swapVisibility+"\n\nuseTrue = "+this.useTrue+"\nuseFalse = "+this.useFalse+"\nuseQuality = "+this.useQuality+"\n\nfillColorTrue = "+this.fillColorTrue+"\nfillColorFalse = "+this.fillColorFalse+"\nfillColorFalse = "+this.fillColorFalse+"\n\nstrokeColorQualityGood = "+this.strokeColorQualityGood+"\nstrokeColorQualityBad = "+this.strokeColorQualityBad+"\nstrokeColorTrue = "+this.strokeColorTrue+"\nstrokeColorFalse = "+this.strokeColorFalse+"\n\nvisibilityTrue = "+this.visibilityTrue+"\nvisibilityFalse = "+this.visibilityFalse+"\nhideIfQualityBad = "+this.hideIfQualityBad+"\n";
},emosWS.ESColorSwap=AColorSwap;function AFaultWarning(a){this.conditionFunction=a.conditionFunction,this.AlarmGroup="",this.previousAlarmGroup="",this.enabled=!0,this.enabledAck=!1,this.target=a.STDPLACEHOLDER_SHAPENAME,this.svgElement=getSVGElement(this.target),this.svgElement&&(this.originalFillColor=this.svgElement.getAttribute("fill"),this.originalStrokeColor=this.svgElement.getAttribute("stroke")),this.newFaultEnabled=a.PLACEHOLDER_NEWFLT_ENABLED,this.newFaultFillcolor=a.PLACEHOLDER_NEWFLT_FILLCOLOR,this.newFaultVisible=a.PLACEHOLDER_NEWFLT_VISIBLE,this.newFaultBlinking=a.PLACEHOLDER_NEWFLT_BLINKING,this.newFaultProperty={Enabled:this.newFaultEnabled,Fillcolor:this.newFaultFillcolor,Visible:this.newFaultVisible,Blinking:this.newFaultBlinking},this.ackFaultEnabled=a.PLACEHOLDER_ACKFLT_ENABLED,this.ackFaultFillcolor=a.PLACEHOLDER_ACKFLT_FILLCOLOR,this.ackFaultVisible=a.PLACEHOLDER_ACKFLT_VISIBLE,this.ackFaultBlinking=a.PLACEHOLDER_ACKFLT_BLINKING,this.ackFaultProperty={Enabled:this.ackFaultEnabled,Fillcolor:this.ackFaultFillcolor,Visible:this.ackFaultVisible,Blinking:this.ackFaultBlinking},this.newEMSEnabled=a.PLACEHOLDER_NEWEMS_ENABLED,this.newEMSFillcolor=a.PLACEHOLDER_NEWEMS_FILLCOLOR,this.newEMSVisible=a.PLACEHOLDER_NEWEMS_VISIBLE,this.newEMSBlinking=a.PLACEHOLDER_NEWEMS_BLINKING,this.newEMSProperty={Enabled:this.newEMSEnabled,Fillcolor:this.newEMSFillcolor,Visible:this.newEMSVisible,Blinking:this.newEMSBlinking},this.ackEMSEnabled=a.PLACEHOLDER_ACKEMS_ENABLED,this.ackEMSFillcolor=a.PLACEHOLDER_ACKEMS_FILLCOLOR,this.ackEMSVisible=a.PLACEHOLDER_ACKEMS_VISIBLE,this.ackEMSBlinking=a.PLACEHOLDER_ACKEMS_BLINKING,this.ackEMSProperty={Enabled:this.ackEMSEnabled,Fillcolor:this.ackEMSFillcolor,Visible:this.ackEMSVisible,Blinking:this.ackEMSBlinking},this.newWRNEnabled=a.PLACEHOLDER_NEWWRN_ENABLED,this.newWRNFillcolor=a.PLACEHOLDER_NEWWRN_FILLCOLOR,this.newWRNVisible=a.PLACEHOLDER_NEWWRN_VISIBLE,this.newWRNBlinking=a.PLACEHOLDER_NEWWRN_BLINKING,this.newWRNProperty={Enabled:this.newWRNEnabled,Fillcolor:this.newWRNFillcolor,Visible:this.newWRNVisible,Blinking:this.newWRNBlinking},this.ackWRNEnabled=a.PLACEHOLDER_ACKWRN_ENABLED,this.ackWRNFillcolor=a.PLACEHOLDER_ACKWRN_FILLCOLOR,this.ackWRNVisible=a.PLACEHOLDER_ACKWRN_VISIBLE,this.ackWRNBlinking=a.PLACEHOLDER_ACKWRN_BLINKING,this.ackWRNProperty={Enabled:this.ackWRNEnabled,Fillcolor:this.ackWRNFillcolor,Visible:this.ackWRNVisible,Blinking:this.ackWRNBlinking},this.NOEnabled=a.PLACEHOLDER_NO_ENABLED,this.NOFillcolor=a.PLACEHOLDER_NO_FILLCOLOR,this.NOVisible=a.PLACEHOLDER_NO_VISIBLE,this.NOBlinking=a.PLACEHOLDER_NO_BLINKING,this.NOProperty={Enabled:this.NOEnabled,Fillcolor:this.NOFillcolor,Visible:this.NOVisible,Blinking:this.NOBlinking},this.fillcolorNoBlink=a.PLACEHOLDER_FILLCOLORNOBLINK,this.useQuality=a.PLACEHOLDER_SWAP_USEQUALITY,this.strokeColorQualityGood=a.PLACEHOLDER_STROKECOLORQUALITYGOOD,this.strokeColorQualityBad=a.PLACEHOLDER_STROKECOLORQUALITYBAD,this.UnknownProperty={Enabled:!0,Fillcolor:this.originalFillColor,Visible:!0,Blinking:!1},this.useHand=a.PLACEHOLDER_USEHAND,this.useStroke=a.PLACEHOLDER_USESTROKE,this.useHide=a.PLACEHOLDER_USEHIDE,this.fillColor,this.interval=0,this.stateMap={0:this.newFaultProperty,1:this.ackFaultProperty,2:this.newEMSProperty,3:this.ackEMSProperty,4:this.newWRNProperty,5:this.ackWRNProperty,6:this.NOProperty,7:this.NOProperty},this.currentProperty=this.stateMap[0],this.alarmStateList={},this.alarmState=null,this.alarmValue=null,this.trigger=function(){this.animate()}.bind(this),ESAnimation.call(this),this.originalStrokeWidth=null,this.originalFill=null,this.shape&&(this.originalStrokeWidth=this.shape.getAttribute("stroke-width"),this.originalFill=this.shape.getAttribute("fill"))}AFaultWarning.prototype=Object.create(ESAnimation.prototype),AFaultWarning.prototype.constructor=AFaultWarning,AFaultWarning.prototype.updateAlarmStateList=function(a){try{if("undefined"!=typeof a&&"undefined"!=typeof a.classStateRec){var b={value:parseInt(a.value),state:a.classStateRec.state};this.alarmStateList[a.tag]=b;var c=100,d=100;for(var e in this.alarmStateList)alarmItem=this.alarmStateList[e],alarmItem.value<d&&(d=alarmItem.value),alarmItem.state<c&&(c=alarmItem.state);this.alarmState=c,this.alarmValue=d}}catch(a){console.log("updateAlarmStateList failed: "+a)}},AFaultWarning.prototype.datachangeListenerMore=function(a){try{this.doCondition(),this.AlarmGroup&&this.AlarmGroup!==this.previousAlarmGroup&&this.adviseData(),"undefined"!=typeof a&&"undefined"!=typeof a.classStateRec&&(this.updateAlarmStateList(a),this.startAnimate(a))}catch(a){console.log("AFaultWarning datachangeListenerMore failed: "+a)}},AFaultWarning.prototype.startAnimate=function(a){try{this.currentProperty=this.stateMap[this.alarmState]||this.currentProperty,this.currentProperty.Blinking?0===this.interval&&(this.interval=1,emosWS.blinkInterval.addListener(this.trigger,!1)):this.animate()}catch(a){console.log("AFaultWarning startAnimate failed: "+a)}},AFaultWarning.prototype.animate=function(){try{var a={fill:null,stroke:null,visibility:null,cursor:null,"stroke-width":null};if(this.useQuality&&(a.stroke=this.qualityGood?this.strokeColorQualityGood:this.strokeColorQualityBad,a["stroke-width"]=this.qualityGood?this.SHAPE.strokeWidth:this.strokeWidthBad),this.enabled){if(this.useHand&&(a.cursor="pointer"),this.useHide&&(a.visibility="visible"),this.currentProperty.Blinking?emosWS.blinkInterval.active?this.currentProperty.Enabled&&(a.fill=this.currentProperty.Fillcolor):this.currentProperty.Enabled&&(a.fill=this.fillcolorNoBlink):this.currentProperty.Enabled&&(a.fill=this.currentProperty.Fillcolor),this.useStroke&&(a["stroke-width"]=3),this.useVisible||this.currentProperty.useVisible){var b=this.currentProperty.Visible?"visible":"hidden";a.visibility=b,this.svgTextElement&&(this.svgTextElement.style.visibility=b)}}else this.useHand&&(a.cursor="auto"),this.useHide&&(a.visibility="hidden"),this.useStroke&&(a["stroke-width"]=this.originalStrokeWidth);this.setStyle(a)}catch(a){console.log("AFaultWarning animate failed: "+a)}},AFaultWarning.prototype.adviseData=function(){try{this.previousAlarmGroup=this.AlarmGroup;var a=this;emosWS.advise(this.AlarmGroup,this.datachangeListener,"",emosWS.tagType.Alarm)}catch(a){console.log("adviseData failed: "+a)}},AFaultWarning.prototype.doCondition=function(){try{var a=this.conditionFunction();this.AlarmGroup=this.getAlarmGroup(a.AlarmGroup),this.enabled=a.Enabled,this.enabledAck=a.EnabledAck}catch(a){console.log("doCondition failed: "+a)}},AFaultWarning.prototype.getAlarmGroup=function(a){return a?a.replace(/.alarm\s*\b/gi,""):null},AFaultWarning.prototype.initializeMore=function(){emosWS.blinkInterval.removeListener(this.trigger),this.interval=0;var a={fill:null,stroke:null,visibility:null,cursor:null,"stroke-width":null};this.setStyle(a),this.doCondition(),emosWS.animationData.stillInit=!1,this.doCondition(),this.adviseData(),this.startAnimate()},AFaultWarning.prototype.unadviseMore=function(){this.alarmStateList={}},AFaultWarning.prototype.toString=function(){return"AlarmGroup\n"+this.getAlarmGroupString()+"\nenabled = "+this.enabled+"\nenabledAck = "+this.enabledAck+"\n\nnewFaultEnabled = "+this.stateMap+"\nnewFaultFillcolor = "+this.newFaultFillcolor+"\nnewFaultVisible = "+this.newFaultVisible+"\nnewFaultBlinking = "+this.newFaultBlinking+"\n\nackFaultEnabled = "+this.ackFaultEnabled+"\nackFaultFillcolor = "+this.ackFaultFillcolor+"\nackFaultVisible = "+this.ackFaultVisible+"\nackFaultBlinking = "+this.ackFaultBlinking+"\n\nnewEMSEnabled = "+this.newEMSEnabled+"\nnewEMSFillcolor = "+this.newEMSEnabled+"\nnewEMSVisible = "+this.newEMSVisible+"\nnewEMSBlinking = "+this.newEMSBlinking+"\n\nackEMSEnabled = "+this.ackEMSEnabled+"\nackEMSFillcolor = "+this.ackEMSFillcolor+"\nackEMSVisible = "+this.ackEMSVisible+"\nackEMSBlinking = "+this.ackEMSBlinking+"\n\nnewWRNEnabled = "+this.newWRNEnabled+"\nnewWRNFillcolor = "+this.newWRNFillcolor+"\nnewWRNVisible = "+this.newWRNVisible+"\nnewWRNBlinking = "+this.newWRNBlinking+"\n\nackWRNEnabled = "+this.ackWRNEnabled+"\nackWRNFillcolor = "+this.ackWRNFillcolor+"\nackWRNVisible = "+this.ackWRNVisible+"\nackWRNBlinking = "+this.ackWRNBlinking+"\n\nNOEnabled = "+this.NOEnabled+"\nNOFillcolor = "+this.NOFillcolor+"\nNOVisible = "+this.NOVisible+"\nNOBlinking = "+this.NOBlinking+"\n\nfillcolorNoBlink = "+this.fillcolorNoBlink+"\nuseQuality = "+this.useQuality+"\nstrokeColorQualityGood = "+this.strokeColorQualityGood+"\nstrokeColorQualityBad = "+this.strokeColorQualityBad+"\nuseHand = "+this.useHand+"\nuseStroke = "+this.useStroke+"\nuseHide = "+this.useHide+"\n"},AFaultWarning.prototype.getAlarmGroupString=function(){return this.AlarmGroup},window.AFaultWarning=AFaultWarning,emosWS.ESFaultWarning=AFaultWarning;function AFaultsWarnings(a){this.alarmGroups=a.PLACEHOLDER_ALARMGROUPS.split("; "),this.trimAlarmGroups(),AFaultWarning.call(this,a)}AFaultsWarnings.prototype=Object.create(AFaultWarning.prototype),AFaultsWarnings.prototype.constructor=AFaultsWarnings,AFaultsWarnings.prototype.trimAlarmGroups=function(){try{for(var a=0;a<this.alarmGroups.length;a++)""===this.alarmGroups[a]?(this.alarmGroups.splice(a,1),a--):this.alarmGroups[a]=this.alarmGroups[a].replace(".Alarm","")}catch(a){console.log("AFaultsWarnings trimAlarmGroups failed: "+a)}},AFaultsWarnings.prototype.adviseData=function(){try{for(var a=0,b=this.alarmGroups.length;a<b;a++)emosWS.advise(this.alarmGroups[a],this.datachangeListener,"",emosWS.tagType.Alarm)}catch(a){console.log("adviseData failed: "+a)}},AFaultsWarnings.prototype.getAlarmGroupString=function(){var a="";return this.alarmGroups.forEach(function(b){a+=b+"\n"}),a},window.AFaultsWarnings=AFaultsWarnings,emosWS.ESFaultsWarnings=AFaultsWarnings;function AColorSwapMulti(a){this.conditionFunction=a.conditionFunction,this.condition1=!1,this.condition2=!1,this.condition3=!1,this.condition4=!1,this.condition5=!1,this.condition6=!1,this.condition7=!1,this.condition8=!1,this.useQuality=a.PLACEHOLDER_SWAP_USEQUALITY,this.useElse=a.PLACEHOLDER_SWAP_USEELSE,this.swapFillcolor=a.PLACEHOLDER_SWAP_FILLCOLOR,this.swapStrokecolor=a.PLACEHOLDER_SWAP_STROKECOLOR,this.swapVisibility=a.PLACEHOLDER_SWAP_VISIBILITY,this.strokeColorQualityGood=a.PLACEHOLDER_STROKECOLORQUALITYGOOD,this.strokeColorQualityBad=a.PLACEHOLDER_STROKECOLORQUALITYBAD,this.fillColor1=a.PLACEHOLDER_FILLCOLOR1,this.fillColor2=a.PLACEHOLDER_FILLCOLOR2,this.fillColor3=a.PLACEHOLDER_FILLCOLOR3,this.fillColor4=a.PLACEHOLDER_FILLCOLOR4,this.fillColor5=a.PLACEHOLDER_FILLCOLOR5,this.fillColor6=a.PLACEHOLDER_FILLCOLOR6,this.fillColor7=a.PLACEHOLDER_FILLCOLOR7,this.fillColor8=a.PLACEHOLDER_FILLCOLOR8,this.fillColorElse=a.PLACEHOLDER_FILLCOLORELSE,this.strokeColor1=a.PLACEHOLDER_STROKECOLOR1,this.strokeColor2=a.PLACEHOLDER_STROKECOLOR2,this.strokeColor3=a.PLACEHOLDER_STROKECOLOR3,this.strokeColor4=a.PLACEHOLDER_STROKECOLOR4,this.strokeColor5=a.PLACEHOLDER_STROKECOLOR5,this.strokeColor6=a.PLACEHOLDER_STROKECOLOR6,this.strokeColor7=a.PLACEHOLDER_STROKECOLOR7,this.strokeColor8=a.PLACEHOLDER_STROKECOLOR8,this.strokeColorElse=a.PLACEHOLDER_STROKECOLORELSE,this.visibility1=a.PLACEHOLDER_VISIBILITY1,this.visibility2=a.PLACEHOLDER_VISIBILITY2,this.visibility3=a.PLACEHOLDER_VISIBILITY3,this.visibility4=a.PLACEHOLDER_VISIBILITY4,this.visibility5=a.PLACEHOLDER_VISIBILITY5,this.visibility6=a.PLACEHOLDER_VISIBILITY6,this.visibility7=a.PLACEHOLDER_VISIBILITY7,this.visibility8=a.PLACEHOLDER_VISIBILITY8,this.visibilityElse=a.PLACEHOLDER_VISIBILITYELSE,this.fillColor=null,this.strokeColor=null,this.visibility=!0,this.target=a.STDPLACEHOLDER_SHAPENAME,ESAnimation3.call(this)}AColorSwapMulti.prototype=Object.create(ESAnimation3.prototype),AColorSwapMulti.prototype.constructor=AColorSwapMulti,AColorSwapMulti.prototype.doCondition=function(){try{var a=this.conditionFunction();this.condition1=a.Condition1,this.condition2=a.Condition2,this.condition3=a.Condition3,this.condition4=a.Condition4,this.condition5=a.Condition5,this.condition6=a.Condition6,this.condition7=a.Condition7,this.condition8=a.Condition8}catch(a){console.log("doCondition failed: "+a)}},AColorSwapMulti.prototype.setColor=function(a,b,c){this.swapFillcolor&&(this.fillColor=a),this.swapStrokecolor&&(this.strokeColor=b),this.swapVisibility&&(this.visibility=c)},AColorSwapMulti.prototype.startAnimate=function(){var a={};this.useQuality&&this.qualityGood&&(this.strokeColor=this.strokeColorQualityGood,a["stroke-width"]=this.qualityGood?this.SHAPE.strokeWidth:this.strokeWidthBad),this.condition1?this.setColor(this.fillColor1,this.strokeColor1,this.visibility1):this.condition2?this.setColor(this.fillColor2,this.strokeColor2,this.visibility2):this.condition3?this.setColor(this.fillColor3,this.strokeColor3,this.visibility3):this.condition4?this.setColor(this.fillColor4,this.strokeColor4,this.visibility4):this.condition5?this.setColor(this.fillColor5,this.strokeColor5,this.visibility5):this.condition6?this.setColor(this.fillColor6,this.strokeColor6,this.visibility6):this.condition7?this.setColor(this.fillColor7,this.strokeColor7,this.visibility7):this.condition8?this.setColor(this.fillColor8,this.strokeColor8,this.visibility8):this.useElse&&this.setColor(this.fillColorElse,this.strokeColorElse,this.visibilityElse),this.useQuality&&!this.qualityGood&&(this.strokeColor=this.strokeColorQualityBad),this.swapFillcolor&&this.fillColor&&(a.fill=this.fillColor),(this.swapStrokecolor&&this.strokeColor||this.useQuality)&&(a.stroke=this.strokeColor),this.swapVisibility&&(a.visibility=this.visibility?"visible":"hidden"),this.hideIfQualityBad&&!this.qualityGood&&(a.visibility="hidden"),this.setStyle(a)},emosWS.ESColorSwapMulti=AColorSwapMulti;function AColorState(a){new emosWS.ESColorSwapMulti({conditionFunction:function(){var b=a.conditionFunction(),c=b<a.PLACEHOLDER_LIMIT12,d=b<a.PLACEHOLDER_LIMIT23,e=b<a.PLACEHOLDER_LIMIT34,f=b<a.PLACEHOLDER_LIMIT45,g=b<a.PLACEHOLDER_LIMIT56,h=b<a.PLACEHOLDER_LIMIT67,i=b<a.PLACEHOLDER_LIMIT78,j=!1;return{Condition1:c,Condition2:d,Condition3:e,Condition4:f,Condition5:g,Condition6:h,Condition7:i,Condition8:j}},PLACEHOLDER_SWAP_USEQUALITY:a.PLACEHOLDER_USEQUALITY,PLACEHOLDER_SWAP_USEELSE:!0,PLACEHOLDER_SWAP_FILLCOLOR:a.PLACEHOLDER_USEFILLCOLOR,PLACEHOLDER_SWAP_STROKECOLOR:a.PLACEHOLDER_USESTROKECOLOR,PLACEHOLDER_SWAP_VISIBILITY:a.PLACEHOLDER_USEVISIBILITY,PLACEHOLDER_STROKECOLORQUALITYGOOD:a.PLACEHOLDER_STROKECOLORQUALITYGOOD,PLACEHOLDER_STROKECOLORQUALITYBAD:a.PLACEHOLDER_STROKECOLORQUALITYBAD,PLACEHOLDER_FILLCOLOR1:a.PLACEHOLDER_FILLCOLOR1,PLACEHOLDER_FILLCOLOR2:a.PLACEHOLDER_FILLCOLOR2,PLACEHOLDER_FILLCOLOR3:a.PLACEHOLDER_FILLCOLOR3,PLACEHOLDER_FILLCOLOR4:a.PLACEHOLDER_FILLCOLOR4,PLACEHOLDER_FILLCOLOR5:a.PLACEHOLDER_FILLCOLOR5,PLACEHOLDER_FILLCOLOR6:a.PLACEHOLDER_FILLCOLOR6,PLACEHOLDER_FILLCOLOR7:a.PLACEHOLDER_FILLCOLOR7,PLACEHOLDER_FILLCOLOR8:a.PLACEHOLDER_FILLCOLOR8,PLACEHOLDER_FILLCOLORELSE:a.PLACEHOLDER_FILLCOLOR8,PLACEHOLDER_STROKECOLOR1:a.PLACEHOLDER_STROKECOLOR1,PLACEHOLDER_STROKECOLOR2:a.PLACEHOLDER_STROKECOLOR2,PLACEHOLDER_STROKECOLOR3:a.PLACEHOLDER_STROKECOLOR3,PLACEHOLDER_STROKECOLOR4:a.PLACEHOLDER_STROKECOLOR4,PLACEHOLDER_STROKECOLOR5:a.PLACEHOLDER_STROKECOLOR5,PLACEHOLDER_STROKECOLOR6:a.PLACEHOLDER_STROKECOLOR6,PLACEHOLDER_STROKECOLOR7:a.PLACEHOLDER_STROKECOLOR7,PLACEHOLDER_STROKECOLOR8:a.PLACEHOLDER_STROKECOLOR8,PLACEHOLDER_STROKECOLORELSE:a.PLACEHOLDER_STROKECOLOR8,PLACEHOLDER_VISIBILITY1:a.PLACEHOLDER_VISIBILITY1,PLACEHOLDER_VISIBILITY2:a.PLACEHOLDER_VISIBILITY2,PLACEHOLDER_VISIBILITY3:a.PLACEHOLDER_VISIBILITY3,PLACEHOLDER_VISIBILITY4:a.PLACEHOLDER_VISIBILITY4,PLACEHOLDER_VISIBILITY5:a.PLACEHOLDER_VISIBILITY5,PLACEHOLDER_VISIBILITY6:a.PLACEHOLDER_VISIBILITY6,PLACEHOLDER_VISIBILITY7:a.PLACEHOLDER_VISIBILITY7,PLACEHOLDER_VISIBILITY8:a.PLACEHOLDER_VISIBILITY8,PLACEHOLDER_VISIBILITYELSE:a.PLACEHOLDER_VISIBILITY8,STDPLACEHOLDER_SHAPENAME:a.STDPLACEHOLDER_SHAPENAME})}emosWS.ESColorState=AColorState;function AColorScript(a){this.conditionFunction=a.conditionFunction,this.fillColor=null,this.strokeColor=null,this.visibility=!0,this.enabled=!0,this.swapFillcolor=a.PLACEHOLDER_SWAP_FILLCOLOR,this.swapStrokecolor=a.PLACEHOLDER_SWAP_STROKECOLOR,this.swapVisibility=a.PLACEHOLDER_SWAP_VISIBILITY,this.useQuality=a.PLACEHOLDER_SWAP_USEQUALITY,this.strokeColorQualityGood=a.PLACEHOLDER_STROKECOLORQUALITYGOOD,this.strokeColorQualityBad=a.PLACEHOLDER_STROKECOLORQUALITYBAD,this.target=a.STDPLACEHOLDER_SHAPENAME,ESAnimation3.call(this)}AColorScript.prototype=Object.create(ESAnimation3.prototype),AColorScript.prototype.constructor=AColorScript,AColorScript.prototype.doCondition=function(){try{var a=this.conditionFunction();this.fillColor=a.Fillcolor,this.strokeColor=a.Strokecolor,this.visibility=a.Visibility,this.enabled=a.Enabled}catch(a){console.log("doCondition failed: "+a)}},AColorScript.prototype.startAnimate=function(){var a={},b=null,c=null,d=null;this.useQuality&&this.qualityGood&&(b=this.strokeColorQualityGood,a["stroke-width"]=this.qualityGood?this.SHAPE.strokeWidth:this.strokeWidthBad),this.enabled&&(this.swapFillcolor&&this.fillColor&&(c=this.fillColor),this.swapStrokecolor&&this.strokeColor&&(b=this.strokeColor),this.swapVisibility&&null!==this.visibility&&(d=this.visibility?"visible":"hidden")),this.useQuality&&!this.qualityGood&&(b=this.strokeColorQualityBad),c&&(a.fill=this.fillColor=c),b&&(a.stroke=this.strokeColor=b),d&&(a.visibility=this.visibility=d),this.setStyle(a)},emosWS.ESColorScript=AColorScript;function ASize(a){this.conditionFunction=a.conditionFunction,this.postFunction=a.postFunction,this.orientation=a.PLACEHOLDER_ORIENTATION,this.target=a.STDPLACEHOLDER_SHAPENAME,this.svgElement=getSVGElement(this.target),this.useQuality=a.PLACEHOLDER_SWAP_USEQUALITY,this.strokeColorQualityGood=a.PLACEHOLDER_STROKECOLORQUALITYGOOD,this.strokeColorQualityBad=a.PLACEHOLDER_STROKECOLORQUALITYBAD,this.valueMin=0,this.valueMax=0,this.sizeFactorMin=0,this.sizeFactorMax=1,this.valueLimitMin=this.valueMin,this.valueLimitMax=this.valueMax,this.value=0,this.svgElement&&(this.maxSize=parseFloat(this.svgElement.getAttribute("Top"===this.orientation||"Bottom"===this.orientation?"height":"width")),this.x=parseFloat(this.svgElement.getAttribute("x")),this.y=parseFloat(this.svgElement.getAttribute("y"))),ESAnimation.call(this)}ASize.prototype=Object.create(ESAnimation.prototype),ASize.prototype.constructor=ASize,ASize.prototype.doCondition=function(){try{var a=this.conditionFunction();this.value=a.Value,this.valueMin=parseFloat(a.ValueMin),this.valueMax=parseFloat(a.ValueMax),this.sizeFactorMin=parseFloat(a.SizeFactorMin),this.sizeFactorMax=parseFloat(a.SizeFactorMax),this.valueLimitMin=parseFloat(a.ValueLimitMin),this.valueLimitMax=parseFloat(a.ValueLimitMax)}catch(a){console.log("ASize doCondition failed: "+a)}},ASize.prototype.datachangeListenerMore=function(){try{this.doCondition(),this.startAnimate(),this.postFunction()}catch(a){console.log("datachangeListenerMore failed: "+a)}},ASize.prototype.startAnimate=function(){try{if(this.useQuality){var a={};a.stroke=this.qualityGood?this.strokeColorQualityGood:this.strokeColorQualityBad,a["stroke-width"]=this.qualityGood?this.SHAPE.strokeWidth:this.strokeWidthBad,this.setStyle(a)}}catch(a){console.log("startAnimate failed: "+a)}this.startAnimateMore()},ASize.prototype.startAnimateMore=function(){try{this.value&&this.setSize(this.value,this.valueMin,this.valueMax,this.valueLimitMin,this.valueLimitMax,this.sizeFactorMin,this.sizeFactorMax,this.maxSize,this.x,this.y,this.orientation)}catch(a){console.log("startAnimateMore failed: "+a)}},ASize.prototype.initializeMore=function(){try{this.doCondition(),emosWS.animationData.stillInit=!1,this.doCondition(),this.startAnimate()}catch(a){console.log("initializeMore failed: "+a)}},ASize.prototype.setSize=function(a,b,c,d,e,f,g,h,i,j,k){try{if(this.shape){var l=c-b;switch(a<b?a=b:a>c&&(a=c),k){case"Top":var m=(a-b)/l*h;j+=h-m,this.shape.setAttribute("height",m),this.shape.setAttribute("y",j);break;case"Bottom":var m=(a-b)/l*h;this.shape.setAttribute("height",m);break;case"Right":var n=(a-b)/l*h;this.shape.setAttribute("width",n);break;case"Left":var n=(a-b)/l*h;i+=h-n,this.shape.setAttribute("width",n),this.shape.setAttribute("x",i)}}}catch(a){console.log("setSize failed: "+a)}},emosWS.ESSize=ASize;function APosition(a){if(this.conditionFunction=a.conditionFunction,this.postFunction=a.postFunction,this.orientation=a.PLACEHOLDER_ORIENTATION,this.orientationR=a.PLACEHOLDER_ORIENTATIONR,this.orientationFlag=a.PLACEHOLDER_ORIENTATIONFLAG,this.expansion=a.PLACEHOLDER_EXPANSION,this.useQuality=a.PLACEHOLDER_SWAP_USEQUALITY,this.strokeColorQualityGood=a.PLACEHOLDER_STROKECOLORQUALITYGOOD,this.strokeColorQualityBad=a.PLACEHOLDER_STROKECOLORQUALITYBAD,this.useHide=a.PLACEHOLDER_HIDEIFVALUEEXCESSIVE,this.target=a.STDPLACEHOLDER_SHAPENAME,this.svgElement=getSVGElement(this.target),this.svgTextElement=getSVGElement(this.target+".Text"),this.valueMin=0,this.valueMax=0,this.positionMin=0,this.positionMax=0,this.valueLimitMin=this.valueMin,this.valueLimitMax=this.valueMax,this.value=0,this.svgElement&&(this.maxSize=parseFloat(this.svgElement.getAttribute("Top"===this.orientation||"Bottom"===this.orientation?"height":"width")),this.x=parseFloat(this.svgElement.getAttribute("x")),this.y=parseFloat(this.svgElement.getAttribute("y"))),this.svgTextElement){this.textY=parseFloat(this.svgTextElement.getAttribute("y"));var b=this.svgTextElement.getElementsByTagName("tspan");"undefined"!=typeof b[0]&&(this.svgTextTSpanElement=b[0],this.svgTextTSpanElement&&(this.textX=parseFloat(this.svgTextTSpanElement.getAttribute("x"))))}ESAnimation.call(this)}APosition.prototype=Object.create(ESAnimation.prototype),APosition.prototype=emosWS.fn.emosExtend(APosition.prototype,ASize.prototype),APosition.prototype.constructor=APosition,APosition.prototype.doCondition=function(){try{var a=this.conditionFunction();this.value=a.Value,this.valueMin=parseFloat(a.ValueMin),this.valueMax=parseFloat(a.ValueMax),this.positionMin=parseFloat(a.PositionMin),this.positionMax=parseFloat(a.PositionMax),this.valueLimitMin=parseFloat(a.ValueLimitMin),this.valueLimitMax=parseFloat(a.ValueLimitMax),this.Enabled=a.Enabled}catch(a){console.log("APosition doCondition failed: "+a)}},APosition.prototype.startAnimateMore=function(){try{if(this.value<this.valueMin||this.value>this.valueMax)this.useHide&&this.svgElement.setAttribute("visibility","hidden");else{this.useHide&&this.svgElement.setAttribute("visibility","visible");var a=this.valueMax-this.valueMin,b=this.positionMax-this.positionMin,c,d,e,f;"Top"===this.orientation?(c="y",d=this.y,e=this.textY,f=this.svgTextElement):(c="x",d=this.x,e=this.textX,f=this.svgTextTSpanElement);var g=this.positionMin+(this.value-this.valueMin)/a*b,h=d+g,i=e+g;isNaN(h)||this.svgElement.setAttribute(c,h),this.svgTextElement&&(isNaN(h)||f.setAttribute(c,i))}}catch(a){console.log("startAnimateMore failed: "+a)}},emosWS.ESPosition=APosition;function AAlarm(a){this.conditionFunction=a.conditionFunction,this.AlarmGroup="",this.enabled=!0,this.enabledAck=!1,this.target=a.STDPLACEHOLDER_SHAPENAME,this.svgElement=getSVGElement(this.target),this.svgElement&&(this.originalFillColor=this.svgElement.getAttribute("fill"),this.originalStrokeColor=this.svgElement.getAttribute("stroke")),this.newEnabled=a.PLACEHOLDER_NEW_ENABLED,this.newFillcolor=a.PLACEHOLDER_NEW_FILLCOLOR,this.newBlinking=a.PLACEHOLDER_NEW_BLINKING,this.newVisible=a.PLACEHOLDER_NEW_VISIBLE,this.newProperty={Enabled:this.newEnabled,Fillcolor:this.newFillcolor,Visible:this.newVisible,Blinking:this.newBlinking},this.ackEnabled=a.PLACEHOLDER_ACK_ENABLED,this.ackFillcolor=a.PLACEHOLDER_ACK_FILLCOLOR,this.ackBlinking=a.PLACEHOLDER_ACK_BLINKING,this.ackVisible=a.PLACEHOLDER_ACK_VISIBLE,this.ackProperty={Enabled:this.ackEnabled,Fillcolor:this.ackFillcolor,Visible:this.ackVisible,Blinking:this.ackBlinking},this.NOEnabled=a.PLACEHOLDER_NO_ENABLED,this.NOFillcolor=a.PLACEHOLDER_NO_FILLCOLOR,this.NOBlinking=a.PLACEHOLDER_NO_BLINKING,this.NOVisible=a.PLACEHOLDER_NO_VISIBLE,this.NOProperty={Enabled:this.NOEnabled,Fillcolor:this.NOFillcolor,Visible:this.NOVisible,Blinking:this.NOBlinking},this.fillcolorNoBlink=a.PLACEHOLDER_FILLCOLORNOBLINK,this.useQuality=a.PLACEHOLDER_SWAP_USEQUALITY,this.strokeColorQualityGood=a.PLACEHOLDER_STROKECOLORQUALITYGOOD,this.strokeColorQualityBad=a.PLACEHOLDER_STROKECOLORQUALITYBAD,this.useHand=a.PLACEHOLDER_USEHAND,this.useStroke=a.PLACEHOLDER_USESTROKE,this.useHide=a.PLACEHOLDER_USEHIDE,this.useVisible=a.useVisible,this.fillColor,this.swapState=0,this.interval=0,this.stateMap={0:this.newProperty,1:this.ackProperty,2:this.NOProperty},this.currentProperty=this.stateMap[2],this.alarmStateList={},this.alarmState=null,this.alarmValue=null,ESAnimation.call(this)}AAlarm.prototype=Object.create(ESAnimation.prototype),AAlarm.prototype=emosWS.fn.emosExtend(AAlarm.prototype,AFaultWarning.prototype),AAlarm.prototype.constructor=AAlarm,AAlarm.prototype.toString=function(){return"AlarmGroup\n"+this.getAlarmGroupString()+"\nenabled = "+this.enabled+"\nenabledAck = "+this.enabledAck+"\n\nnewEnabled = "+this.newEnabled+"\nnewFillcolor = "+this.newFillcolor+"\nnewVisible = "+this.newVisible+"\nnewBlinking = "+this.newBlinking+"\n\nackEnabled = "+this.ackEnabled+"\nackFillcolor = "+this.ackFillcolor+"\nackVisible = "+this.ackVisible+"\nackBlinking = "+this.ackBlinking+"\n\nNOEnabled = "+this.NOEnabled+"\nNOFillcolor = "+this.NOFillcolor+"\nNOVisible = "+this.NOVisible+"\nNOBlinking = "+this.NOBlinking+"\n\nfillcolorNoBlink = "+this.fillcolorNoBlink+"\nuseQuality = "+this.useQuality+"\nstrokeColorQualityGood = "+this.strokeColorQualityGood+"\nstrokeColorQualityBad = "+this.strokeColorQualityBad+"\nuseHand = "+this.useHand+"\nuseStroke = "+this.useStroke+"\nuseHide = "+this.useHide+"\nuseVisible = "+this.useVisible+"\nfillcolorNoBlink = "+this.fillcolorNoBlink+"\n"},emosWS.ESAlarm=AAlarm;function AAlarms(a){this.alarmGroups=a.PLACEHOLDER_ALARMGROUPS.split("; "),this.trimAlarmGroups(),AAlarm.call(this,a)}AAlarms.prototype=Object.create(AAlarm.prototype),AAlarms.prototype=emosWS.fn.emosExtend(AAlarms.prototype,AFaultsWarnings.prototype),AAlarms.prototype.constructor=AAlarms,emosWS.ESAlarms=AAlarms;function AAlarmPropertyMulti(a){this.configuration=a,this.conditionFunction=a.conditionFunction,this.conditionFunction=a.conditionFunction,this.fillcolorNoBlink=a.PLACEHOLDER_FILLCOLORNOBLINK,this.useElse=a.PLACEHOLDER_SWAP_USEELSE,this.useQuality=a.PLACEHOLDER_SWAP_USEQUALITY,this.strokeColorQualityGood=a.PLACEHOLDER_STROKECOLORQUALITYGOOD,this.strokeColorQualityBad=a.PLACEHOLDER_STROKECOLORQUALITYBAD,this.target=a.STDPLACEHOLDER_SHAPENAME,this.svgElement=getSVGElement(this.target),this.svgTextElement=getSVGElement(this.target+".Text"),this.svgElement&&(this.originalFillColor=this.svgElement.getAttribute("fill"),this.originalStrokeColor=this.svgElement.getAttribute("stroke")),this.AlarmGroup="",this.enabled=!0,this.alarmActionList=[],this.alarmElseAction={},this.initAlarmActionList(),this.currentProperty={Enabled:!0,Fillcolor:this.originalFillColor,Visible:!0,Blinking:!1,useVisible:!0},this.swapState=0,this.interval=0,this.useStroke=!1,this.useHand=!1,this.useHide=!1,this.stateMap=[],this.alarmState=0,ESAnimation.call(this)}AAlarmPropertyMulti.prototype=Object.create(ESAnimation.prototype),AAlarmPropertyMulti.prototype=emosWS.fn.emosExtend(AAlarmPropertyMulti.prototype,AFaultWarning.prototype),AAlarmPropertyMulti.prototype.constructor=AAlarmPropertyMulti,AAlarmPropertyMulti.prototype.initAlarmActionList=function(){for(var a=1;a<17;a++){var b={};this.configuration["PLACEHOLDER_P"+a+"_CLASS"]!==-1&&(b={class:this.configuration["PLACEHOLDER_P"+a+"_CLASS"],prioFrom:this.configuration["PLACEHOLDER_P"+a+"_PRIOFROM"],prioTo:this.configuration["PLACEHOLDER_P"+a+"_PRIOTO"],useAck:this.configuration["PLACEHOLDER_P"+a+"_USEACK"],useBlink:this.configuration["PLACEHOLDER_P"+a+"_USEBLINK"],useNew:this.configuration["PLACEHOLDER_P"+a+"_USENEW"],fillColor:this.configuration["PLACEHOLDER_P"+a+"_FILLCOLOR"],visibility:this.configuration["PLACEHOLDER_P"+a+"_VISIBILITY"]},this.alarmActionList.push(b))}this.alarmElseAction={useBlink:this.configuration.PLACEHOLDER_USEBLINKELSE,fillColor:this.configuration.PLACEHOLDER_FILLCOLORELSE,visibility:this.configuration.PLACEHOLDER_VISIBILITYELSE}},AAlarmPropertyMulti.prototype.updateAlarmStateList=function(a){try{if("undefined"!=typeof a&&"undefined"!=typeof a.classStateRec){for(var b=this.useElse?this.alarmElseAction:null,c=0;c<this.alarmActionList.length;c++){var d=this.alarmActionList[c],e=parseInt(a.value);if(0===e&&d.useNew&&"1"===a.classStateRec.ClassStateNew.charAt(31-d.class)||1===e&&d.useAck&&"1"===a.classStateRec.ClassStateAck.charAt(31-d.class)){var f=a.classStateRec.prioFrom[d.class],g=a.classStateRec.prioTo[d.class];if(Math.min(f,g)>=d.prioFrom&&Math.max(f,g)<=d.prioTo){b=d;break}}}this.currentProperty=b?{Enabled:!0,Fillcolor:b.fillColor,Visible:b.visibility,Blinking:b.useBlink,useVisible:!0}:{Enabled:!0,Fillcolor:this.originalFillColor,Visible:!0,Blinking:!1,useVisible:!0}}}catch(a){console.log("updateAlarmStateList failed: "+a)}},AAlarmPropertyMulti.prototype.doCondition=function(){try{var a=this.conditionFunction();this.AlarmGroup=a.AlarmGroup,this.enabled=a.Enabled}catch(a){console.log("doCondition failed: "+a)}},emosWS.ESAlarmPropertyMulti=AAlarmPropertyMulti;function ADynamicText(a){this.conditionFunction=a.conditionFunction,this.Text="",this.Enabled=!0,this.useQuality=a.PLACEHOLDER_SWAP_USEQUALITY,this.strokeColorQualityGood=a.PLACEHOLDER_STROKECOLORQUALITYGOOD,this.strokeColorQualityBad=a.PLACEHOLDER_STROKECOLORQUALITYBAD,this.target=a.STDPLACEHOLDER_SHAPENAME,this.qualityGood=!1,this.prefix=a.PREFIX||"",this.suffix=a.SUFFIX||"",ESAnimation.call(this)}ADynamicText.prototype=Object.create(ESAnimation.prototype),ADynamicText.prototype.constructor=ADynamicText,ADynamicText.prototype.doCondition=function(){try{var a=this.conditionFunction();a.Text+="",this.Text=this.prefix+a.Text+this.suffix,this.Enabled=a.Enabled&&"null"!==a.Text}catch(a){console.log("DynamicText doCondition failed: "+a)}},ADynamicText.prototype.datachangeListenerMore=function(){try{this.doCondition(),this.startAnimate()}catch(a){console.log("datachangeListenerMore failed: "+a)}},ADynamicText.prototype.startAnimate=function(){try{if(this.Enabled){var a={};this.useQuality&&this.qualityGood&&(a.stroke=this.qualityGood?this.strokeColorQualityGood:this.strokeColorQualityBad),this.setStyle(a),this.setText(this.Text)}}catch(a){console.log("Dynamictext startAnimate failed: "+a)}},ADynamicText.prototype.initializeMore=function(){try{this.doCondition(),emosWS.animationData.stillInit=!1,this.doCondition(),this.startAnimate()}catch(a){console.log("initializeMore failed: "+a)}},ADynamicText.prototype.setText=function(a){this.shapeTextContent&&this.SHAPE.setText(a)},window.ADynamicText=ADynamicText,emosWS.ESDynamicText=ADynamicText;function AClickWrite(a){this.conditionFunction=a.conditionFunction,this.function=a.PLACEHOLDER_FUNCTION,this.useStroke=a.PLACEHOLDER_USESTROKE,this.useHand=a.PLACEHOLDER_USESHAND||a.PLACEHOLDER_USEHAND,this.useHide=a.PLACEHOLDER_USESHIDE||a.PLACEHOLDER_USEHIDE,this.target=a.STDPLACEHOLDER_SHAPENAME,this.Tag="",this.Value="",this.Enabled=!0,this.onClickNotInitialized=!0,this.setValue=this.setValue.bind(this),this.callback={datachangeListener:this.setValue},ESAnimation.call(this)}AClickWrite.prototype=Object.create(ESAnimation.prototype),AClickWrite.prototype.constructor=AClickWrite,AClickWrite.prototype.adviseData=function(){},AClickWrite.prototype.doCondition=function(){try{var a=this.conditionFunction();this.Tag=a.Tag,this.Value=String(a.Value),this.Enabled=a.Enabled}catch(a){console.log("doCondition failed: "+a)}},AClickWrite.prototype.datachangeListenerMore=function(){try{this.doCondition(),this.startAnimate()}catch(a){console.log("datachangeListenerMore failed: "+a)}},AClickWrite.prototype.setValue=function(){if(this.Enabled){var a=emosWS.tagDestination[this.Tag+".IO"];
a?(a.unregister(this.callback.datachangeListener),a.setValue(this.Value)):(emosWS.animationData.stillInit=!0,emosWS.animationData.callback=this.callback,emosWS.animationData.param=null,emosWS.getTagValue(this.Tag),emosWS.animationData.stillInit=!1)}},AClickWrite.prototype.onClick=function(){this.doCondition(),this.setValue()},AClickWrite.prototype.handleOnClick=function(){setEvent(this.target,"click",function(a){this.onClick(a)}.bind(this),this.useHand?"pointer":"initial")},AClickWrite.prototype.initOnClick=function(){this.onClickNotInitialized&&(this.handleOnClick(),this.useStroke&&(setEvent(this.target,"mouseover",function(){setStyle(this.target,{"stroke-width":4})}.bind(this),this.useHand?"pointer":"default"),setEvent(this.target,"mouseout",function(){setStyle(this.target,{"stroke-width":1})}.bind(this),this.useHand?"pointer":"default")),this.onClickNotInitialized=!1)},AClickWrite.prototype.startAnimate=function(){try{var a=this;a.Enabled?a.useHide&&(setStyle(this.target,{visibility:"visible"}),setStyle(this.target+".Text",{visibility:"visible"})):(a.useHide&&(setStyle(this.target,{visibility:"hidden"}),setStyle(this.target+".Text",{visibility:"hidden"})),this.setClicked=!1)}catch(a){console.log("AClickWrite startAnimate failed: "+a)}},AClickWrite.prototype.initializeMore=function(){try{this.doCondition(),emosWS.animationData.stillInit=!1,this.doCondition(),this.adviseData(),this.initOnClick(),null!==this.Enable&&this.startAnimate()}catch(a){console.log("initializeMore failed: "+a)}},emosWS.ESClickWrite=AClickWrite;function AClickWriteBit(a){this.force=a.PLACEHOLDER_FORCE,this.bitMode=a.PLACEHOLDER_BITMODE,this.BitNr="",this.tagValue=null,AClickWrite.call(this,a)}AClickWriteBit.prototype=Object.create(AClickWrite.prototype),AClickWriteBit.prototype.constructor=AClickWriteBit,AClickWriteBit.prototype.adviseData=function(){try{var a=this;emosWS.advise(this.Tag,function(b){a.tagValue=parseInt(b.value)},"")}catch(a){console.log("adviseData failed: "+a)}},AClickWriteBit.prototype.doCondition=function(){try{var a=this.conditionFunction();this.Tag=a.Tag,this.BitNr=a.BitNr,this.Enabled=a.Enabled}catch(a){console.log("doCondition failed: "+a)}},AClickWriteBit.prototype.onClick=function(){try{var a,b=1<<this.BitNr;switch(this.bitMode){case"Set":a=this.tagValue|b;break;case"Reset":a=this.tagValue&~b;break;case"Toggle":a=this.tagValue^b}emosWS.poke(this.Tag,a),console.log("setTag "+this.Tag+" = "+a)}catch(a){console.log("AClickWriteBit onClick failed: "+a)}},emosWS.ESClickWriteBit=AClickWriteBit;function GlobalVariable(a){emosWS.gvNumber++,emosWS.globalVariables.push(this),this.myValue=a,this.name=null,this.subscribers=[],this.previousSubscriber=null,this.init(),emosWS.dispatchEvent({type:"HMIgv"})}GlobalVariable.prototype.init=function(){Object.defineProperty(this,"value",{get:this._getValue.bind(this),set:this._setValue.bind(this)})},GlobalVariable.prototype._getValue=function(){if(emosWS.animationData.stillInit){var a=new Subscriber(emosWS.animationData.callback.initialize,emosWS.animationData.param);this.register(a),this.previousSubscriber=a}return this.myValue},GlobalVariable.prototype._setValue=function(a){this.myValue=a,emosWS.animationData.globalVariablesSetCallBackAble&&(emosWS.animationData.stillInit||emosWS.addGlobalVariablesChange(this.informListeners.bind(this,emosWS.clickData.event)))},GlobalVariable.prototype.toString=function(){return this.myValue},GlobalVariable.prototype.toDebugString=function(){return"name:\t"+this.getName()+"\nvalue:\t"+this.myValue+"\nlisteners:\t"+this.subscribers.length+"\n"},GlobalVariable.prototype.informListeners=function(a){try{for(var b=0,c=this.subscribers.length;b<c;b++){var d=this.subscribers[b];d.callback(this.myValue,d.param,a)}}catch(a){console.error("[GlobalVariable informListeners] :",a)}},GlobalVariable.prototype.register=function(a){try{for(var b=0,c=this.subscribers.length;b<c;b++){var d=this.subscribers[b];if(a.equals(d))return}this.subscribers.push(a)}catch(a){console.error("[GlobalVariable register] :",a)}},GlobalVariable.prototype.unregister=function(a){this.subscribers.forEach(function(b,c){if(b.callback===a)return this.subscribers.splice(c,1),void(b=null)}.bind(this))},GlobalVariable.prototype.getName=function(){if(this.name)return this.name;for(var a in window)try{if(window[a]===this)return this.name=a,a}catch(a){}return null},GlobalVariable.prototype.setValue=function(a){a=this.convertValue(a),this.setDirectValue(a)},GlobalVariable.prototype.setDirectValue=function(a){a!==this.myValue&&(emosWS.listenGlobalVariablesChange(),this.value=a,emosWS.callbackGlobalVariablesChange())},GlobalVariable.prototype.convertValue=function(a){var b=typeof this.myValue,c=typeof a;if(b===c)return a;switch(b){case"boolean":return"string"===c?GetAsBoolean(a):Boolean(a);case"number":return Number(a);default:return a}},window.GlobalVariable=GlobalVariable;function AClickSetESVariable(a){var b=a.PLACEHOLDER_VARIABLE;switch(this.variableName=null,this.ESVariable=null,b.constructor.name){case"String":this.variableName=a.PLACEHOLDER_VARIABLE.split(".")[0],this.ESVariable=window[this.variableName];break;case"GlobalVariable":this.ESVariable=b}AClickWrite.call(this,a)}AClickSetESVariable.prototype=Object.create(AClickWrite.prototype),AClickSetESVariable.prototype.constructor=AClickSetESVariable,AClickSetESVariable.prototype.doCondition=function(){try{var a=this.conditionFunction();this.Value=a.Value,this.Enabled=a.Enabled}catch(a){console.log("doCondition failed: "+a)}},AClickSetESVariable.prototype.handleOnClick=function(){this.SHAPE.addJob(function(a){this.onClick(a)}.bind(this),this.useHand)},AClickSetESVariable.prototype.onClick=function(a){try{var b=this.conditionFunction();this.ESVariable instanceof GlobalVariable?emosWS.clickData.event===a&&emosWS.clickData.param===this.ESVariable||b.Enabled&&(emosWS.clickData.event=a,emosWS.clickData.param=this.ESVariable,this.ESVariable.value=b.Value):this.ESVariable=b.Value}catch(a){console.error("AClickSetESVariable onClick failed: "+a)}},emosWS.ESClickSetESVariable=AClickSetESVariable;function AClickSetJSVariable(a){new AClickSetESVariable({conditionFunction:function(){var b=a.conditionFunction(),c=b.Value,d=b.Value;return{Value:c,Enabled:d}},PLACEHOLDER_VARIABLE:a.PLACEHOLDER_VARIABLE,PLACEHOLDER_TYPE:a.PLACEHOLDER_TYPE,PLACEHOLDER_USESTROKE:a.PLACEHOLDER_USESTROKE,PLACEHOLDER_USEHAND:a.PLACEHOLDER_USEHAND,PLACEHOLDER_USEHIDE:a.PLACEHOLDER_USEHIDE,STDPLACEHOLDER_SHAPENAME:a.STDPLACEHOLDER_SHAPENAME})}emosWS.ESClickSetJSVariable=AClickSetJSVariable;var ADiagnosisCommon=function(){function a(a){return a.substr(a.indexOf("-")+1)}return{getObjectType:a}}();window.ADiagnosisCommon=ADiagnosisCommon;var AtimerTypes={Second:0,Minute:1,SiemensDate:3,SiemensTimeOfDay:4,SiemensTime:5,SiemensS5Time:6,SiemensDateAndTime:7};function AAlarmClient(a,b,c,d){this.parent=a,this.data=b,this.alarmGroup=c,this.tab=d,this.table=null,this.init()}AAlarmClient.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=$("<div class='DiagnosisAlarmClient' id='"+a+"'><table class='DiagnosisAlarmTable' id='"+d+"'><col width='80%'><col width='20%'><tr><th id='"+b+"'> Text</th><th id='"+c+"'> Duration</th></tr></table></div>");e.appendTo(this.parent),this.table=document.getElementById(d),this.table.id=d;var f=document.getElementById(b),g=document.getElementById(c);this.getHeaderText("T04_Text",f),this.getHeaderText("T04_Duration",g),emosWS.sendAdviseAlarmText(this.alarmGroup,emosWS.getLanguage(),this.datachangeListener.bind(this),""),emosWS.addEventListener("language",this.onLanguage.bind(this))}catch(a){console.log("AlarmClient init failed: "+a)}},AAlarmClient.prototype.onLanguage=function(){this.clearTable()},AAlarmClient.prototype.clearTable=function(){for(var a=1;a<this.table.rows.length;a++)this.table.deleteRow(a)},AAlarmClient.prototype.getHeaderText=function(a,b){emosWS.sendAdviseText(a,"name",function(a,b){""!==a.value&&(b.textContent=a.value)},b)},AAlarmClient.prototype.getStyleClass=function(a){return"1"===a.classID?"alarmTable alarm":"alarmTable warning"},AAlarmClient.prototype.getTabStyleClass=function(a){return"1"===a.classID?"DiagnosisPageTextAlarm":"DiagnosisPageTextWarning"},AAlarmClient.prototype.datachangeListener=function(a){try{"alarmText"===a.type&&"internal"!==a.tagname?("3RTN"===a.alarmType?this.updateTable(a):this.addTableRow(a),1===this.table.rows.length&&(this.tab.className="DiagnosisPageTextNormal"),console.log("updateTable Table "+this.table.id+" / rows: "+this.table.rows.length)):"dataChange"===a.type}catch(a){console.log("AlarmClient datachangeListener failed: "+a)}},AAlarmClient.prototype.updateTable=function(a){for(var b=1;b<this.table.rows.length;b++){var c=this.table.rows[b];c.msg.alarmGroup===a.alarmGroup&&"1NEW"===c.msg.alarmType&&this.table.deleteRow(b)}},AAlarmClient.prototype.addTableRow=function(a){var b=this.getLocalTime(a.date,a.time);a.date=b[0],a.time=b[1],a.dateTime=a.date+" "+a.time,a.beginTime=this.convertToTimestamp(a.date,a.time);var c=this.table.insertRow(1);c.className=this.getStyleClass(a),this.tab.className=this.getTabStyleClass(a);var d=c.insertCell(0),e=c.insertCell(1);d.textContent=a.alarmText,e.textContent=this.convertToDate(a.beginTime),c.msg=a},AAlarmClient.prototype.getLocalTime=function(a,b){try{if(""===a)return["",""];var c=a.split("."),d=b.split(":"),e=d[2].split(","),f=new Date(c[1]+"/"+c[0]+"/"+c[2]+" "+d[0]+":"+d[1]+":"+e[0]+" UTC"),g=f.getDate();g=g<10?"0"+g:g;var h=f.getMonth()+1;h=h<10?"0"+h:h;var i=f.getHours();i=i<10?"0"+i:i;var j=f.getMinutes();j=j<10?"0"+j:j;var k=f.getSeconds();k=k<10?"0"+k:k;var l=f.getFullYear()+"-"+h+"-"+g,m=i+":"+j+":"+k+","+e[1];return[l,m]}catch(a){console.log("getLocalTime() failed: "+a)}},AAlarmClient.prototype.convertToDate=function(a){try{if(""===a)return"";var b=(new Date).getTime(),c=parseInt((b-a)/1e3),d=parseInt(c/86400),e=parseInt(c/3600)%24,f=parseInt(c/60)%60,g=c%60;return d+":"+(e<10?"0"+e:e)+":"+(f<10?"0"+f:f)+":"+(g<10?"0"+g:g)}catch(a){console.log("convertToDate() failed: "+a)}},AAlarmClient.prototype.convertToTimestamp=function(a,b){try{if(""===a)return"";var c=a.split("-"),d=b.split(":"),e=d[2].split(",");return new Date(c[1]+"/"+c[2]+"/"+c[0]+" "+d[0]+":"+d[1]+":"+e[0]).getTime()}catch(a){console.log("convertToTime() failed: "+a)}};var AGeneralElement=function(a,b){var c=getElementGlobalID(),d=$("<div class='DiagnosisGerneralElement' id='"+c+"'><svg width='100%' height='20'><rect width='100%' height='20' style='fill:white;stroke-width:1;stroke:grey' /><text x='5' y='15' fill='black'>"+b.Text+"</text></svg></div>");d.appendTo(a)};function ADiagnosisElement(a){this.data=a.data,this.writable=a.writable,this.panel=null,this.visibleRight=parseInt(this.data.VisibleAtRight),this.visibleOPC=this.data.VisibleOPCID,this.userRight=parseInt(this.data.UserRight),this.UNKOWN="???",this.visible=!0,this.opcvisible=!0,this.hasPaintShopRight=!0,this.initialize()}ADiagnosisElement.prototype.updateView=function(){try{this.visibleRight&&(this.hasPaintShopRight=emosWS.login.au.hasPaintShopRight(this.visibleRight),this.setVisibility()),this.writable&&this.updateWrite()}catch(a){console.log(this.constructor.name+": updateView failed: "+a)}},ADiagnosisElement.prototype.initialize=function(){this.init(),this.afterInit()},ADiagnosisElement.prototype.init=function(){},ADiagnosisElement.prototype.updateWrite=function(){},ADiagnosisElement.prototype.unitListener=function(){},ADiagnosisElement.prototype.getValue=function(a){try{return a}catch(b){return console.error("[ADiagnosisElement getValue] : "+b),a}},ADiagnosisElement.prototype.adviseProperty=function(a,b,c){emosWS.advise(a,function(a,c){try{if(a.value){var d=a.value,e=this.data;e.Precision=d.disp_prec||e.Precision,d.met_baseunit!==this.UNKOWN&&(e.UnitMetric=d.met_baseunit||e.UnitMetric),d.imp_baseunit!==this.UNKOWN&&(e.UnitImperial=d.imp_baseunit||e.UnitImperial),d.loc_baseunit!==this.UNKOWN&&(e.UnitLocale=d.loc_baseunit||e.UnitLocale),e.FactorMetric=d.met_factor||e.FactorMetric,e.FactorImperial=d.imp_factor||e.FactorImperial,e.FactorLocale=d.loc_factor||e.FactorImperial,e.FactorPLC=d.plc_factor,e.TextKey=d.textkey,e.ByteInputMin&&(e.ByteInputMin=d.input_min||e.ByteInputMin),e.ByteInputMax&&(e.ByteInputMax=d.input_max||e.ByteInputMax),e.IntInputMin&&(e.IntInputMin=d.input_min||e.IntInputMin),e.IntInputMax&&(e.IntInputMax=d.input_max||e.IntInputMax),e.RealInputMin&&(e.RealInputMin=d.input_min||e.RealInputMin),e.RealInputMax&&(e.RealInputMax=d.input_max||e.RealInputMax),b(a,c)}}catch(a){console.error("[ADiagnosisElement adviseProperty callback] : "+a)}}.bind(this),c,emosWS.tagType.Property)},ADiagnosisElement.prototype.afterInit=function(){this.updateView(),isNaN(this.userRight)&&isNaN(this.visibleRight)||emosWS.addEventListener("UserRight",this.updateView.bind(this)),this.data.VisibleOPCID&&""!==this.data.VisibleOPCID&&this.parseVisibilityOPCTags(this.data.VisibleOPCID,function(a){this.opcvisible=GetAsBoolean(a.value),this.setVisibility()}.bind(this)),emosWS.addEventListener("unit",function(a){this.unit=a,this.unitListener(a)}.bind(this))},ADiagnosisElement.prototype.parseVisibilityOPCTags=function(s,callback){[[" & "," && "],[" | "," || "],["NOT ","! "]].forEach(function(a){s=s.replace(a[0],a[1])});var tagMap={};s.split(/[ &|!\(\)]/).forEach(function(a){""!==a&&(tagMap[a]=null)});var parseValues=function(itag,ivalue){tagMap[itag]=ivalue;for(var tag in tagMap)if(null===tagMap[tag])return;var parseString=s;for(var tag in tagMap)parseString=parseString.replace(tag,tagMap[tag]);var value=!0;try{value=eval(parseString),callback({value:value})}catch(a){}};for(var tag in tagMap)emosWS.advise(this.plc+"."+tag,function(a){parseValues(tag,GetAsBoolean(a.value))},"",emosWS.tagType.IO)},ADiagnosisElement.prototype.setVisibility=function(){this.visible=this.opcvisible&&this.hasPaintShopRight,this.panel.get(0).style.visibility=this.visible?"visible":"hidden"};function ADiagnosisText(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisText"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisText"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextLong"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.dataText=""===this.data.Text?".":this.data.Text,this.plctag="",this.text="",ADiagnosisElement.call(this,{data:b})}ADiagnosisText.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisText.prototype.constructor=ADiagnosisText,ADiagnosisText.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID();"undefined"!=typeof this.data.VisibleOPCID&&""!==this.data.VisibleOPCID&&(this.plctag=""===this.data.VisibleOPCID?"":this.plc+"."+this.data.OPCID);var c=this.positionClass[this.data.Position],d=this.panel=$("<div class='"+c.css+"' id='"+a+"'><p id='"+b+"'>"+this.dataText+"</p></div>");d.appendTo(this.parentDiv),this.text=document.getElementById(b),""!==this.plctag&&emosWS.advise(this.plctag,function(a){try{var b=GetAsBoolean(a.value);this.text.style.visibility=b?"visible":"hidden"}catch(a){console.log("DiagnosisText datachangeListener failed: "+a)}}.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this)}catch(a){console.log("DiagnosisText init failed: "+a)}},emosWS.ADiagnosisText=ADiagnosisText;function APageControl(a,b,c){this.parent=a,this.data=b,this.diagnosisWindow=c,this.init()}APageControl.prototype.init=function(){try{var a=getElementGlobalID(),b=$("<div class='DiagnosisPageControl' id='"+a+"'><ul></ul></div>");b.appendTo(this.parent);for(var c=b.tabs(),d=c.find("ul"),e=0,f=sortHashArray(this.data),g=f.length-1;g>-1;g--){var h=f[g],i=this.data[h];if("object"==typeof i){e++;var j=getElementGlobalID(),k=ADiagnosisCommon.getObjectType(h),l="";switch(k){case"AddPageTab":l=i.Text;break;default:l=k,i.TextID="Messages"}var m=getElementGlobalID();$("<li><a href='#"+j+"'><span id='"+m+"'>"+l+"</span></a></li>").prependTo(d);var n=$("<div class='DiagnosisPageBlank' id='"+j+"'></div>");n.appendTo(c);var o=document.getElementById(m);emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+i.TextID,"name",function(a,b){""!==a.value&&(b.textContent=a.value)},o),i.Visible&&"2"!==i.Visible||this.diagnosisWindow.appendPage(n,i,o,parseInt(i.VisibleAtRight||"0"),e,c)}}c.tabs("refresh"),c.tabs({active:0})}catch(a){console.log("PageControl failed: "+a)}},emosWS.PageControl=APageControl;var AcolorList={G:"#00FF00",R:"red",X:"black",B:"blue",O:"lightgrey",P:"pink",Y:"yellow"};function ATopTextLED(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={M:"DiagnosisTopTextLEDMIDDLE",L:"DiagnosisTopTextLEDLEFT",R:"DiagnosisTopTextLEDRIGHT"},this.plctag=this.plc+"."+this.data.OPCID,this.led=this.border=this.text=null,ADiagnosisElement.call(this,{data:b})}ATopTextLED.prototype=Object.create(ADiagnosisElement.prototype),ATopTextLED.prototype.constructor=ATopTextLED,ATopTextLED.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=this.panel=$("<div class='"+this.positionClass[this.data.Position]+"' id='"+a+"'><svg width='100%' height='20'><rect id='"+c+"' width='100%' height='20' style='fill:white;stroke-width:1;stroke:grey' /><text id='"+d+"' x='5' y='15' fill='black'>"+this.data.Text+"</text><circle id='"+b+"' cx='93%' cy='10' r='7' stroke='black' stroke-width='1' fill='orange'/></svg></div>");e.appendTo(this.parent),this.led=document.getElementById(b),this.text=document.getElementById(d),this.border=document.getElementById(c),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this)}catch(a){console.log("TopTextLED init failed: "+a)}},ATopTextLED.prototype.datachangeListener=function(a){try{var b=GetAsBoolean(a.value),c=AcolorList[b?this.data.OnLED:this.data.OffLED];this.led.setAttribute("fill",c)}catch(a){console.log("TopTextLED datachangeListener failed: "+a)}},emosWS.ATopTextLED=ATopTextLED;function ADiagnosisSetpointRampBar(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LMRLeft,css:"DiagnosisBar"},M:{parent:this.diagnosisWindow.divTypes.LMRMiddle,css:"DiagnosisBar"},R:{parent:this.diagnosisWindow.divTypes.LMRRight,css:"DiagnosisBar"}},this.min=0,this.max=100,this.ymin=2,this.percent0=80,this.plctag=this.plc+"."+this.data.OPCID,this.plctagRamp=this.plc+"."+this.data.OPCRampID,this.visibleOPC=this.plc+"."+this.data.OPCRampVisibleID,this.opcvisible=!0,this.parentDiv=this.numberValue=this.bar=this.lineValue=this.lineValue2=this.lineValueR=this.lineValueR2=this.text=this.number=this.numberR=this.unitText=null,this.unit=emosWS.getUnit(),this.panel=null,this.init()}ADiagnosisSetpointRampBar.prototype.getBarValue=function(a){a<this.min?a=this.min:a>this.max&&(a=this.max);var b=this.ymin+(100-(a-this.min)/(this.max-this.min)*100)*this.percent0/100+"%";return b},ADiagnosisSetpointRampBar.prototype.getBarDegreeText=function(a){return"- "+(this.min+(this.max-this.min)*a/100)+this.unitText},ADiagnosisSetpointRampBar.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},ADiagnosisSetpointRampBar.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID(),k=getElementGlobalID(),l=getElementGlobalID(),m=getElementGlobalID(),n=getElementGlobalID(),o=getElementGlobalID(),p=getElementGlobalID(),q=getElementGlobalID();this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent);var r=this.positionClass[this.data.Position];this.unitText=this.getUnitSymbol();var s=this.panel=$("<div class='"+r.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisRampBarTextSVG'><text id='"+e+"' x='50%' y='24px' fill='black' text-anchor='middle' font-weight='bold'>"+this.data.Text+"</text></svg><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisRampBarSVG' id='"+m+"'><rect class='DiagnosisRampBar' id='"+o+"' x='58%' y='"+this.ymin+"%' width='40%' height='"+this.percent0+"%' /><line id='"+p+"' x1='58.5%' y1='15%' x2='97.5%' y2='15%' style='stroke-width:5;stroke:#00FF00'/><line id='"+q+"' x1='58%' y1='15%' x2='98%' y2='15%' style='stroke-width:1;stroke:black'/><rect x='8%' width='90%' height='15' y='87%' style='fill:white;stroke-width:0.5;stroke:grey'/><text id='"+n+"' x='50%' y='93%' text-anchor='right' fill='orange'>"+this.numberValue+"</text></svg><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisRampBarSVG' id='"+b+"'><rect class='DiagnosisRampBar' id='"+d+"' x='1%' y='"+this.ymin+"%' width='40%' height='"+this.percent0+"%' /><line id='"+f+"' x1='1.5%' y1='15%' x2='40.5%' y2='15%' style='stroke-width:5;stroke:yellow'/><line id='"+g+"' x1='1%' y1='15%' x2='41%' y2='15%' style='stroke-width:1;stroke:black'/><rect x='1%' width='90%' height='15' y='87%' style='fill:white;stroke-width:0.5;stroke:grey'/><text id='"+c+"' x='3%' y='93%' text-anchor='left' fill='orange'>"+this.numberValue+"</text><text class='DiagnosisBarDegreeText' id='"+h+"' x='40%' y='83.5%'>"+this.getBarDegreeText(0)+"</text><text class='DiagnosisBarDegreeText' id='"+i+"' x='40%' y='63.5%'>"+this.getBarDegreeText(25)+"</text><text class='DiagnosisBarDegreeText' id='"+j+"' x='40%' y='43.5%'>"+this.getBarDegreeText(50)+"</text><text class='DiagnosisBarDegreeText' id='"+k+"' x='40%' y='23.5%'>"+this.getBarDegreeText(75)+"</text><text class='DiagnosisBarDegreeText' id='"+l+"' x='40%' y='3.5%'>"+this.getBarDegreeText(100)+"</text></svg></div>");s.appendTo(this.parentDiv),this.number=document.getElementById(c),this.numberR=document.getElementById(n),this.text=document.getElementById(e),this.bar=document.getElementById(d),this.lineValue=document.getElementById(f),this.lineValue2=document.getElementById(g),this.lineValueR=document.getElementById(p),this.lineValueR2=document.getElementById(q),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.advise(this.plctagRamp,this.datachangeRampListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),emosWS.advise(this.visibleOPC,function(a){this.opcvisible=GetAsBoolean(a.value),this.setVisibility()}.bind(this),"",emosWS.tagType.IO)}catch(a){console.log("DiagnosisBar init failed: "+a)}},ADiagnosisSetpointRampBar.prototype.setVisibility=function(){this.panel.get(0).style.display=this.opcvisible?"block":"none"},ADiagnosisSetpointRampBar.prototype.datachangeListener=function(a){try{this.numberValue=GetAsInteger(a.value),this.number.setAttribute("fill","black"),this.number.textContent=this.numberValue+this.getUnitSymbol();var b=this.getBarValue(this.numberValue);this.lineValue.setAttribute("y1",b),this.lineValue.setAttribute("y2",b),this.lineValue2.setAttribute("y1",b),this.lineValue2.setAttribute("y2",b)}catch(a){console.log("DiagnosisSetpointRampBar datachangeListener failed: "+a)}},ADiagnosisSetpointRampBar.prototype.datachangeRampListener=function(a){try{var b=GetAsInteger(a.value);this.numberR.setAttribute("fill","black"),this.numberR.textContent=b+this.getUnitSymbol();var c=this.getBarValue(b);this.lineValueR.setAttribute("y1",c),this.lineValueR.setAttribute("y2",c),this.lineValueR2.setAttribute("y1",c),this.lineValueR2.setAttribute("y2",c)}catch(a){console.log("DiagnosisSetpointRampBar datachangeRampListener failed: "+a)}},emosWS.ADiagnosisSetpointRampBar=ADiagnosisSetpointRampBar;function ADiagnosisSetpointBar(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LMRLeft,css:"DiagnosisBar"},M:{parent:this.diagnosisWindow.divTypes.LMRMiddle,css:"DiagnosisBar"},R:{parent:this.diagnosisWindow.divTypes.LMRRight,css:"DiagnosisBar"}},this.min=0,this.max=100,this.ymin=15,this.percent0=67,this.plctag=this.plc+"."+this.data.OPCID,this.parentDiv=this.numberValue=this.bar=this.lineValue=this.lineValue2=this.text=this.number=this.unitText=null,this.unit=emosWS.getUnit(),this.init()}ADiagnosisSetpointBar.prototype.getBarValue=function(){this.numberValue<this.min?this.numberValue=this.min:this.numberValue>this.max&&(this.numberValue=this.max);var a=this.ymin+(100-(this.numberValue-this.min)/(this.max-this.min)*100)*this.percent0/100+"%";return console.log("plctag="+this.plctag+" / bar value % = "+a),a},ADiagnosisSetpointBar.prototype.getBarDegreeText=function(a){return"- "+(this.min+(this.max-this.min)*a/100)+this.unitText},ADiagnosisSetpointBar.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},ADiagnosisSetpointBar.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID(),k=getElementGlobalID();this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent);var l=this.positionClass[this.data.Position];this.unitText=this.getUnitSymbol();var m=$("<div class='"+l.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisBarSVG'><text id='"+d+"' x='50%' y='10%' fill='black' text-anchor='middle' font-weight='bold'>"+this.data.Text+"</text><rect id='"+c+"' x='40%' y='"+this.ymin+"%' width='20%' height='"+this.percent0+"%' style='fill:white;stroke-width:1;stroke:black' /><line id='"+e+"' x1='40.5%' y1='15%' x2='59.5%' y2='15%' style='stroke-width:5;stroke:yellow'/><line id='"+f+"' x1='40%' y1='15%' x2='60%' y2='15%' style='stroke-width:1;stroke:black'/><rect x='20%' width='60%' height='15' y='87%' style='fill:white;stroke-width:0.5;stroke:grey'/><text id='"+b+"' x='50%' y='92%' text-anchor='middle' fill='orange'>"+this.numberValue+"</text><text class='DiagnosisBarDegreeText' id='"+g+"' x='60%' y='83.5%'>"+this.getBarDegreeText(0)+"</text><text class='DiagnosisBarDegreeText' id='"+h+"' x='60%' y='66.75%'>"+this.getBarDegreeText(25)+"</text><text class='DiagnosisBarDegreeText' id='"+i+"' x='60%' y='50%'>"+this.getBarDegreeText(50)+"</text><text class='DiagnosisBarDegreeText' id='"+j+"' x='60%' y='33.25%'>"+this.getBarDegreeText(75)+"</text><text class='DiagnosisBarDegreeText' id='"+k+"' x='60%' y='16.5%'>"+this.getBarDegreeText(100)+"</text></svg></div>");m.appendTo(this.parentDiv),this.number=document.getElementById(b),this.text=document.getElementById(d),this.bar=document.getElementById(c),this.lineValue=document.getElementById(e),this.lineValue2=document.getElementById(f),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this)}catch(a){console.log("DiagnosisBar init failed: "+a)}},ADiagnosisSetpointBar.prototype.datachangeListener=function(a){try{this.numberValue=GetAsInteger(a.value),this.number.setAttribute("fill","black"),this.number.textContent=this.numberValue+this.getUnitSymbol();var b=this.getBarValue();this.lineValue.setAttribute("y1",b),this.lineValue.setAttribute("y2",b),this.lineValue2.setAttribute("y1",b),this.lineValue2.setAttribute("y2",b)}catch(a){console.log("TopTextLED datachangeListener failed: "+a)}},emosWS.ADiagnosisSetpointBar=ADiagnosisSetpointBar;function ADiagnosisBar(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LMRLeft,css:"DiagnosisBar"},M:{parent:this.diagnosisWindow.divTypes.LMRMiddle,css:"DiagnosisBar"},R:{parent:this.diagnosisWindow.divTypes.LMRRight,css:"DiagnosisBar"}},this.min=0,this.max=100,this.percent0=67,this.plctag=this.plc+"."+this.data.OPCID,this.parentDiv=this.numberValue=this.bar=this.barValue=this.text=this.number=this.unitText=null,this.unit=emosWS.getUnit(),this.init()}ADiagnosisBar.prototype.getBarValue=function(){this.numberValue<this.min?this.numberValue=this.min:this.numberValue>this.max&&(this.numberValue=max);var a=(100-(this.numberValue-this.min)/(this.max-this.min)*100)*this.percent0/100+"%";return a},ADiagnosisBar.prototype.getBarDegreeText=function(a){return"- "+(this.min+(this.max-this.min)*a/100)+this.unitText},ADiagnosisBar.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},ADiagnosisBar.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID();this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent);var k=this.positionClass[this.data.Position];this.unitText=this.getUnitSymbol();var l=$("<div class='"+k.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisBarSVG'><text id='"+d+"' x='50%' y='10%' fill='black' text-anchor='middle' font-weight='bold'>"+this.data.Text+"</text><rect id='"+c+"' x='40%' y='15%' width='20%' height='67%' style='fill:red;stroke-width:1;stroke:black' /><rect id='"+e+"' x='40%' y='15%' width='20%' height='35%' style='fill:black'/><rect x='20%' width='60%' height='15' y='87%' style='fill:white;stroke-width:0.5;stroke:grey'/><text id='"+b+"' x='50%' y='92%' text-anchor='middle' fill='orange'>"+this.numberValue+"</text><text class='DiagnosisBarDegreeText' id='"+f+"' x='60%' y='83.5%'>"+this.getBarDegreeText(0)+"</text><text class='DiagnosisBarDegreeText' id='"+g+"' x='60%' y='66.75%'>"+this.getBarDegreeText(25)+"</text><text class='DiagnosisBarDegreeText' id='"+h+"' x='60%' y='50%'>"+this.getBarDegreeText(50)+"</text><text class='DiagnosisBarDegreeText' id='"+i+"' x='60%' y='33.25%'>"+this.getBarDegreeText(75)+"</text><text class='DiagnosisBarDegreeText' id='"+j+"' x='60%' y='16.5%'>"+this.getBarDegreeText(100)+"</text></svg></div>");l.appendTo(this.parentDiv),this.number=document.getElementById(b),this.text=document.getElementById(d),this.bar=document.getElementById(c),this.barValue=document.getElementById(e),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this)}catch(a){console.log("DiagnosisBar init failed: "+a)}},ADiagnosisBar.prototype.datachangeListener=function(a){try{this.numberValue=GetAsInteger(a.value),this.number.setAttribute("fill","black"),this.number.textContent=this.numberValue+this.getUnitSymbol(),this.barValue.setAttribute("height",this.getBarValue())}catch(a){console.log("TopTextLED datachangeListener failed: "+a)}},emosWS.ADiagnosisBar=ADiagnosisBar;function ADiagnosisSpace(a,b){this.data=b,this.positionClass={L:{parent:a.LRLeft},R:{parent:a.LRRight
},Long:{parent:a.LRLong}},this.init()}ADiagnosisSpace.prototype.init=function(){try{var a=this.positionClass[this.data.Position],b=$("<div class='DiagnosisSpace'></div>");b.appendTo(a.parent)}catch(a){console.log("DiagnosisSpace init failed: "+a)}},emosWS.ADiagnosisSpace=ADiagnosisSpace;var ADiagnosisTimer=function(a){this.data=null,this.setValue(a)};ADiagnosisTimer.prototype.setValue=function(a){this.data=this.decode(a)},ADiagnosisTimer.prototype.decode=function(a){return{value:a}},ADiagnosisTimer.prototype.encode=function(){return this.data.value},ADiagnosisTimer.prototype.getData=function(){return this.data},ADiagnosisTimer.prototype.toString=function(){return this.data.value},ADiagnosisTimer.prototype.formatNumber=function(a){return a<10?(100+a).toString().slice(-2):a.toString()};var ADiagnosisTimerSecond=function(a,b,c){this.plcBase=b,this.visuBase=c,ADiagnosisTimer.call(this,a)};ADiagnosisTimerSecond.prototype=Object.create(ADiagnosisTimer.prototype),ADiagnosisTimerSecond.prototype.constructor=ADiagnosisTimerSecond,ADiagnosisTimerSecond.prototype.decode=function(a){if("ms"===this.visuBase){var b=parseInt(a)*("ms"===this.plcBase?1:1e3),c=Math.floor(b/6e4);b-=6e4*c;var d=Math.floor(b/1e3);return b-=1e3*d,b=Math.round(b),{value:a,minute:c,second:d,msecond:b}}var d=parseInt(a)/("ms"===this.plcBase?1e3:1),e=Math.floor(d/3600);d-=3600*e;var c=Math.floor(d/60);return d-=60*c,d=Math.round(d),{value:a,hour:e,minute:c,second:d}},ADiagnosisTimerSecond.prototype.encode=function(a){return"ms"===this.visuBase?(this.data.minute=parseInt(a.minute),this.data.second=parseInt(a.second),this.data.msecond=parseInt(a.msecond),this.data.value=(6e4*this.data.minute+1e3*this.data.second+this.data.msecond)/("ms"===this.plcBase?1:1e3)):(this.data.hour=parseInt(a.hour),this.data.minute=parseInt(a.minute),this.data.second=parseInt(a.second),this.data.value=(3600*this.data.hour+60*this.data.minute+this.data.second)*("ms"===this.plcBase?1e3:1)),this.data.value},ADiagnosisTimerSecond.prototype.toString=function(){if("ms"===this.visuBase){var a="",b="";return 0!==this.data.minute&&(a+=this.formatNumber(this.data.minute)+":",b+="m:"),0===this.data.minute&&0===this.data.second||(a+=this.formatNumber(this.data.second)+":",b+="s:"),a+=this.formatNumber(this.data.msecond),b+="ms",a+" "+b}var a="",b="";return 0!==this.data.hour&&(a+=this.formatNumber(this.data.hour)+":",b+="h:"),0===this.data.hour&&0===this.data.minute||(a+=this.formatNumber(this.data.minute)+":",b+="m:"),a+=this.formatNumber(this.data.second),b+="s",a+" "+b};var ADiagnosisTimerMinute=function(a){ADiagnosisTimer.call(this,a)};ADiagnosisTimerMinute.prototype=Object.create(ADiagnosisTimer.prototype),ADiagnosisTimerMinute.prototype.constructor=ADiagnosisTimerMinute,ADiagnosisTimerMinute.prototype.decode=function(a){var b=parseInt(a),c=Math.floor(b/1440);b-=1440*c;var d=Math.floor(b/60);return b-=60*d,{value:a,day:c,hour:d,minute:b}},ADiagnosisTimerMinute.prototype.encode=function(a){return this.data.day=parseInt(a.day),this.data.hour=parseInt(a.hour),this.data.minute=parseInt(a.minute),this.data.value=1440*this.data.day+60*this.data.hour+this.data.minute,this.data.value},ADiagnosisTimerMinute.prototype.toString=function(){var a="",b="";return 0!==this.data.day&&(a+=formatNumber(this.data.day)+":",b+="d:"),0===this.data.day&&0===this.data.minute||(a+=formatNumber(this.data.hour)+":",b+="h:"),a+=formatNumber(this.data.minute),b+="m",a+" "+b};var ADiagnosisTimerSiemensDate=function(a){ADiagnosisTimer.call(this,a)};ADiagnosisTimerSiemensDate.prototype=Object.create(ADiagnosisTimer.prototype),ADiagnosisTimerSiemensDate.prototype.constructor=ADiagnosisTimerSiemensDate,ADiagnosisTimerSiemensDate.prototype.decode=function(a){try{var b=1989,c=12,d=30,e=/(.*?)-(.*?)-(.*?)$/,f=a.replace(e,function(a,e,f,g){b=parseInt(e),c=parseInt(f),d=parseInt(g)});return{value:a,year:b,month:c,day:d}}catch(e){return{value:a,year:b,month:c,day:d}}},ADiagnosisTimerSiemensDate.prototype.encode=function(a){return this.data.year=a.year,this.data.month=a.month,this.data.day=a.day,this.data.value=a.year+"-"+this.formatNumber(a.month)+"-"+this.formatNumber(a.day),this.data.value},ADiagnosisTimerSiemensDate.prototype.toString=function(){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return(this.data.day<10?"0"+this.data.day:this.data.day)+" "+a[this.data.month-1]+" "+this.data.year};var ADiagnosisTimerSiemensTimeOfDate=function(a){ADiagnosisTimer.call(this,a)};ADiagnosisTimerSiemensTimeOfDate.prototype=Object.create(ADiagnosisTimer.prototype),ADiagnosisTimerSiemensTimeOfDate.prototype.constructor=ADiagnosisTimerSiemensTimeOfDate,ADiagnosisTimerSiemensTimeOfDate.prototype.decode=function(a){try{var b=12,c=0,d=0,e=/(.*?):(.*?):(.*?)\.(.*?)$/,f=a.replace(e,function(a,e,f,g,h){b=parseInt(e),c=parseInt(f),d=parseInt(g)});return{value:a,hour:b,minute:c,second:d}}catch(e){return{value:a,hour:b,minute:c,second:d}}},ADiagnosisTimerSiemensTimeOfDate.prototype.encode=function(a){return this.data.hour=a.hour,this.data.minute=a.minute,this.data.second=a.second,this.data.value=a.hour+":"+a.minute+":"+a.second+".0",this.data.value},ADiagnosisTimerSiemensTimeOfDate.prototype.toString=function(){var a="AM",b=this.data.hour;return b>12&&(b-=12,a="PM"),b+":"+(this.data.minute<10?"0"+this.data.minute:this.data.minute)+":"+(this.data.second<10?"0"+this.data.second:this.data.second)+" "+a};var ADiagnosisTimerSiemensTime=function(a){ADiagnosisTimer.call(this,a)};ADiagnosisTimerSiemensTime.prototype=Object.create(ADiagnosisTimer.prototype),ADiagnosisTimerSiemensTime.prototype.constructor=ADiagnosisTimerSiemensTime,ADiagnosisTimerSiemensTime.prototype.decode=function(a){try{var b=0,c=0,d=0,e=0,f=0,g=/(\d+D)?(\d+H)?(\d+M)?(\d+S)?(\d+MS)?$/,h=this,i=a.replace(g,function(a,g,i,j,k,l){b=h.getNumberFromString(g),c=h.getNumberFromString(i),d=h.getNumberFromString(j),e=h.getNumberFromString(k),f=h.getNumberFromString(l)});return{value:a,day:b,hour:c,minute:d,second:e,ms:f}}catch(g){return{value:a,day:b,hour:c,minute:d,second:e,ms:f}}},ADiagnosisTimerSiemensTime.prototype.encode=function(a){return this.data.day=a.days,this.data.hour=a.hour,this.data.minute=a.minute,this.data.second=a.second,this.data.ms=a.ms,this.data.value=a.days+"D"+a.hour+"H"+a.minute+"M"+a.second+"S"+a.ms+"MS",this.data.value},ADiagnosisTimerSiemensTime.prototype.toString=function(){var a="",b="",c=!1;if(0!==this.data.day&&(a+=this.data.day,b+="d",c=!0),!(0===this.data.day&&0===this.data.hour||0===this.data.hour&&0===this.data.minute&&0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.hour<10?"0"+this.data.hour:this.data.hour),b+=d+"h",c=!0}if(!(0===this.data.day&&0===this.data.hour&&0===this.data.minute||0===this.data.minute&&0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.minute<10?"0"+this.data.minute:this.data.minute),b+=d+"m",c=!0}if(!(0===this.data.day&&0===this.data.hour&&0===this.data.minute&&0===this.data.second||0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.second<10?"0"+this.data.second:this.data.second),b+=d+"s",c=!0}if(0!==this.data.day||0!==this.data.hour||0!==this.data.minute||0!==this.data.second||0!==this.data.ms){var d=c?":":"";a+=d+(this.data.ms<10?"0"+this.data.ms:this.data.ms),b+=d+"ms"}var e=a+" "+b;return" "===e?"0 s":e},ADiagnosisTimerSiemensTime.prototype.getNumberFromString=function(a){var b=0;try{if("undefined"!=typeof a){var c=/(\d+)/;b=parseInt(a.match(c)[0])}return b}catch(a){return b}};var ADiagnosisTimerSiemensS5Time=function(a){ADiagnosisTimerSiemensTime.call(this,a)};ADiagnosisTimerSiemensS5Time.prototype=Object.create(ADiagnosisTimerSiemensTime.prototype),ADiagnosisTimerSiemensS5Time.prototype.constructor=ADiagnosisTimerSiemensS5Time,ADiagnosisTimerSiemensS5Time.prototype.encode=function(a){return this.data.hour=a.hour,this.data.minute=a.minute,this.data.second=a.second,this.data.ms=a.ms,this.data.value=a.hour+"H"+a.minute+"M"+a.second+"S"+a.ms+"MS",this.data.value},ADiagnosisTimerSiemensS5Time.prototype.toString=function(){var a="",b="",c=!1;if(this.data.day=0,!(0===this.data.day&&0===this.data.hour||0===this.data.hour&&0===this.data.minute&&0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.hour<10?"0"+this.data.hour:this.data.hour),b+=d+"h",c=!0}if(!(0===this.data.day&&0===this.data.hour&&0===this.data.minute||0===this.data.minute&&0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.minute<10?"0"+this.data.minute:this.data.minute),b+=d+"m",c=!0}if(!(0===this.data.day&&0===this.data.hour&&0===this.data.minute&&0===this.data.second||0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.second<10?"0"+this.data.second:this.data.second),b+=d+"s",c=!0}if(0!==this.data.day||0!==this.data.hour||0!==this.data.minute||0!==this.data.second||0!==this.data.ms){var d=c?":":"";a+=d+(this.data.ms<10?"0"+this.data.ms:this.data.ms),b+=d+"ms"}var e=a+" "+b;return" "===e?"0 s":e};var ADiagnosisTimerSiemensDateAndTime=function(a){ADiagnosisTimer.call(this,a)};ADiagnosisTimerSiemensDateAndTime.prototype=Object.create(ADiagnosisTimer.prototype),ADiagnosisTimerSiemensDateAndTime.prototype.constructor=ADiagnosisTimerSiemensDateAndTime,ADiagnosisTimerSiemensDateAndTime.prototype.decode=function(a){try{if(!a)return;var b=a.lastIndexOf("-"),c=a.substring(0,b),d=a.substring(b+1);this.date=new ADiagnosisTimerSiemensDate(c),this.time=new ADiagnosisTimerSiemensTimeOfDate(d);var e=this.date.getData(),f=this.time.getData(),g=$.extend({},e,f);return g.value=a,g}catch(a){console.log("DiagnosisTimerSiemensDateAndTime.prototype.decode failed: "+a)}},ADiagnosisTimerSiemensDateAndTime.prototype.encode=function(a){return this.data.year=a.year,this.data.month=a.month,this.data.day=a.day,this.data.hour=a.hour,this.data.minute=a.minute,this.data.second=a.second,this.data.value=a.year+"-"+this.formatNumber(a.month)+"-"+this.formatNumber(a.day)+"-"+a.hour+":"+a.minute+":"+a.second+".0",this.data.value},ADiagnosisTimerSiemensDateAndTime.prototype.toString=function(){return this.date.toString()+" "+this.time.toString()};var AvalueTypes={Integer:0,Float:1,TimeInSecond:2,TimeInMinute:3,String:4,TimeInMSecond:5},ADiagnosisForm=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;window.addEventListener("load",y,!1);function y(){B()}function z(){switch(b.type){case AvalueTypes.TimeInMSecond:case AvalueTypes.TimeInMinute:case AvalueTypes.TimeInSecond:case AvalueTypes.TimeInMinute:var d=k.val(),e=l.val(),f=m.val(),g=n.val(),h=o.val();x=b.value.encode({day:d,hour:e,minute:f,second:g,msecond:h});break;case AvalueTypes.String:x=w.val();break;default:x=c.val()}emosWS.poke(b.plctag,x),a.dialog("close"),"undefined"!=typeof b.callback&&b.callback(x)}function A(){return a}function B(){try{var b=getElementGlobalID(),d=getElementGlobalID(),x=getElementGlobalID(),y=getElementGlobalID(),A=getElementGlobalID(),B=getElementGlobalID(),C=getElementGlobalID(),D=getElementGlobalID(),E=getElementGlobalID(),F=getElementGlobalID(),G=getElementGlobalID(),H=getElementGlobalID(),I=getElementGlobalID(),J=getElementGlobalID(),K=getElementGlobalID(),L=getElementGlobalID(),M=getElementGlobalID(),N=getElementGlobalID(),O=getElementGlobalID(),P=getElementGlobalID(),Q=getElementGlobalID(),R="<div class='vertical controls' id='"+F+"'>   <span id='"+G+"'><input id='"+L+"'>d</span>   <span id='"+H+"'><input id='"+M+"'>h</span>   <span id='"+I+"'><input id='"+N+"'>m</span>   <span id='"+J+"'><input id='"+O+"'>s</span>   <span id='"+K+"'><input id='"+P+"'>ms</span></div>",S="<div class='DiagnosisStringEdit'><textarea rows='4' id='"+Q+"'</textarea></div>",T=$("<div id='"+b+"'>   <div class='DiagnosisExtraContent'>       <p id='"+d+"'>plc.tag</p>       <p id='"+x+"'>text</p>   <table style='width:100%; text-align:center'><tr>       <td id='"+y+"'>Min</td>       <td>..............</td>       <td id='"+A+"'>.</td>       <td>..............</td>       <td id='"+B+"'>Max</td>   <tr></table>   </div>   <form>       <div class='DiagnosisDatePickerContainer'>           <div class='DiagnosisDatePickerCenter'>               <span id='"+E+"'>                   <input name='numberValue' id='"+C+"' value='0'>                   <label id='"+D+"'>unit</label>               </span>"+R+"           </div>       </div>"+S+"       <input type='submit' tabindex='-1' style='position:absolute; top:-1000px'>   </form></div>");$("body").append(T),a=$("#"+b).dialog({modal:!0,autoOpen:!1,width:350,title:"Input dialog",buttons:{Cancel:function(){a.dialog("close")},OK:z},close:function(){U[0].reset()}}),c=$("#"+C).spinner(),e=$("#"+D),f=$("#"+y),g=$("#"+A),h=$("#"+B),i=$("#"+d),j=$("#"+x),k=$("#"+L).spinner({min:0,step:1,start:1}),l=$("#"+M).spinner({min:0,max:23,step:1,start:1}),m=$("#"+N).spinner({min:0,max:59,step:1,start:0}),n=$("#"+O).spinner({min:0,max:59,step:1,start:0}),o=$("#"+P).spinner({min:0,max:999,step:1,start:0}),q=$("#"+F),r=$("#"+G),s=$("#"+H),t=$("#"+I),u=$("#"+J),v=$("#"+K),p=$("#"+E),w=$("#"+Q);var U=a.find("form").on("submit",function(a){a.preventDefault(),z()})}catch(a){console.log("appendFormNumber failed: "+a)}}function C(c){switch(b=c,L(),D(),b.type){case AvalueTypes.TimeInMSecond:I(),J(),K(),g.text("ms"),a.dialog("open");break;case AvalueTypes.TimeInSecond:H(),I(),J(),g.text("s"),a.dialog("open");break;case AvalueTypes.TimeInMinute:G(),H(),I(),g.text("m"),a.dialog("open");break;case AvalueTypes.String:F(),a.dialog("open");break;default:E(),a.dialog("open")}}function D(){i.text(b.plctag),j.text(b.text),f.text("[  "+b.min),h.text(b.max+"  ]")}function E(){c.spinner("option","min",b.min),c.spinner("option","max",b.max),c.spinner("option","step",Math.pow(10,-1*(b.precision||0))),c.val(b.value),e.text(b.unit),p.show()}function F(){w.val(b.value),w.show()}function G(){r.show();var a=b.value.data;k.val(a.day)}function H(){s.show();var a=b.value.data;l.val(a.hour)}function I(){t.show();var a=b.value.data;m.val(a.minute)}function J(){u.show();var a=b.value.data;n.val(a.second)}function K(){v.show();var a=b.value.data;o.val(a.msecond)}function L(){p.hide(),r.hide(),s.hide(),t.hide(),u.hide(),v.hide(),w.hide(),g.text(".")}return{open:C,getFormNumberDialog:A}}(),ADiagnosisDateForm=function(){var a,b,c,d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g,h,i,j,k,l,m,n,o,p,q;window.addEventListener("load",r,!1);function r(){u()}function s(){console.log("Value is change");var d=g.datepicker("getDate"),e=d.getFullYear(),f=d.getMonth()+1,h=d.getDate(),n=i.val(),o=j.val(),p=k.val(),q=l.val(),r=m.val(),s=c.encode({year:e,month:f,day:h,days:n,hour:o,minute:p,second:q,ms:r});console.log(s),emosWS.poke(b.plctag,s),a.dialog("close"),"undefined"!=typeof b.callback&&b.callback(c)}function t(){return a}function u(){try{var b=getElementGlobalID(),c=getElementGlobalID(),r=getElementGlobalID(),t=getElementGlobalID(),u=getElementGlobalID(),v=getElementGlobalID(),w=getElementGlobalID(),x=getElementGlobalID(),y=getElementGlobalID(),z="<div id='"+e+"'></div>",A="<div class='vertical controls' id='"+x+"'>   <span id='"+b+"'><input id='"+c+"'>d</span>   <input id='"+r+"'>h   <input id='"+t+"'>m   <input id='"+u+"'>s   <span id='"+w+"'><input style='width: 2em' id='"+v+"'>ms</span></div>",B=$("<div id='"+d+"'>   <div class='DiagnosisExtraContent'>       <p id='"+f+"'>plc.tag</p>       <p id='"+y+"'>Adjust Date</p>   </div>   <form><div class='DiagnosisDatePickerContainer'>   <div class='DiagnosisDatePickerCenter'>"+z+A+"   </div></div>           <input type='submit' tabindex='-1' style='position:absolute; top:-1000px'>   </form></div>");$("body").append(B),a=$("#"+d).dialog({modal:!0,autoOpen:!1,width:400,title:"Input dialog",buttons:{Cancel:function(){a.dialog("close")},OK:s},close:function(){}}),g=$("#"+e).datepicker({changeMonth:!0,changeYear:!0}),g.datepicker("option","firstDay",1),g.datepicker("option","yearRange","0:3000"),p=$("#"+b),i=$("#"+c).spinner({min:0,step:1,start:1}),j=$("#"+r).spinner({min:0,max:23,step:1,start:1}),k=$("#"+t).spinner({min:0,max:59,step:1,start:0}),l=$("#"+u).spinner({min:0,max:59,step:1,start:0}),m=$("#"+v).spinner({min:0,max:999,step:1,start:0}),q=$("#"+w),o=$("#"+x),h=$("#"+f),n=$("#"+y);var C=a.find("form").on("submit",function(a){a.preventDefault(),s()})}catch(a){console.log("appendFormNumber failed: "+a)}}function v(d){switch(b=d,c=b.value,h.text(b.plctag),w(),c.constructor){case ADiagnosisTimerSiemensDate:x(),n.text("Adjust date (Simens DATE):"),a.dialog("open");break;case ADiagnosisTimerSiemensTimeOfDate:n.text("Adjust time (Simens TIME_OF_DAY):"),y(),a.dialog("open");break;case ADiagnosisTimerSiemensTime:n.text("Adjust time (Simens TIME):"),z(),y(),A(),a.dialog("open");break;case ADiagnosisTimerSiemensS5Time:n.text("Adjust time (Simens S5TIME):"),y(),A(),a.dialog("open");break;case ADiagnosisTimerSiemensDateAndTime:n.text("Adjust date and time (Simens DATE/AND_TIME):"),x(),y(),a.dialog("open")}}function w(){g.hide(),p.hide(),o.hide(),q.hide()}function x(){g.show();var a=c.data,b=new Date(a.year,a.month-1,a.day);g.datepicker("setDate",b)}function y(){o.show();var a=c.data;j.val(a.hour),k.val(a.minute),l.val(a.second)}function z(){p.show();var a=c.data;i.val(a.day)}function A(){q.show();var a=c.data;m.val(a.ms)}return{open:v,getDialog:t}}();function ADiagnosisTextTimer(a,b,c,d,e,f){this.parent=a,this.data=b,this.plc=c,this.type=d,this.writable=e,this.diagnosisWindow=f,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisTextTimer",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",Number2X:"99%",Number2Y:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisTextTimer",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",Number2X:"99%",Number2Y:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextTimer",BorderWidth:"97.5%",WriteRectWidth:"25%",RectX:"47%",WriteRectX:"72.5%",TextX:"5",TextY:"15",Number2X:"97%",Number2Y:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag2=this.plc+"."+this.data.OPCID,this.border=this.text=this.number=this.writeRect=this.numberValue=this.timerValue=null,this.numberColor=this.writable?"blue":"black",this.type===AtimerTypes.Second?(this.plcBase=this.data.Base||"s",this.visuBase=this.data.VisuBase||"s"):this.plcBase=this.visuBase=null,ADiagnosisElement.call(this,{data:b,writable:e})}ADiagnosisTextTimer.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisTextTimer.prototype.constructor=ADiagnosisTextTimer,ADiagnosisTextTimer.prototype.setTimerValue=function(){switch(this.type){case AtimerTypes.Second:this.timerValue=new ADiagnosisTimerSecond(0,this.plcBase,this.visuBase);break;case AtimerTypes.Minute:this.timerValue=new ADiagnosisTimerMinute;break;case AtimerTypes.SiemensDate:this.timerValue=new ADiagnosisTimerSiemensDate;break;case AtimerTypes.SiemensTimeOfDay:this.timerValue=new ADiagnosisTimerSiemensTimeOfDate;break;case AtimerTypes.SiemensTime:this.timerValue=new ADiagnosisTimerSiemensTime;break;case AtimerTypes.SiemensS5Time:this.timerValue=new ADiagnosisTimerSiemensS5Time;break;case AtimerTypes.SiemensDateAndTime:this.timerValue=new ADiagnosisTimerSiemensDateAndTime;break;default:this.timerValue=new ADiagnosisTimer}},ADiagnosisTextTimer.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=this.positionClass[this.data.Position];this.setTimerValue();var g=this.panel=$("<div class='"+f.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisTextDoubleSVG'><rect class='DiagnosisNumberLRRectBorderSVG' width='"+f.BorderWidth+"' height='20' id='"+c+"'/><rect class='DiagnosisNumberLRRectwriteRectSVG' width='"+f.WriteRectWidth+"' height='20' x='"+f.WriteRectX+"' id='"+e+"'/><text class='DiagnosisNumberLRTextTextSVG' x='"+f.TextX+"' y='"+f.TextY+"' id='"+d+"'>"+this.data.Text+"</text><text class='DiagnosisNumberLRTextNumberSVG' x='"+f.Number2X+"' y='"+f.Number2Y+"' text-anchor='end' id='"+b+"'>"+this.numberValue+"</text></svg></div>");g.appendTo(this.parentDiv),this.number=document.getElementById(b),this.text=document.getElementById(d),this.border=document.getElementById(c),this.writeRect=document.getElementById(e),emosWS.advise(this.plctag2,this.datachange2Listener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.writable&&(this.writeRect.style.cursor="pointer",this.number.setAttribute("pointer-events","none"),this.writeRect.addEventListener("click",this.onClick.bind(this)))}catch(a){console.log("DiagnosisTextTimer init failed: "+a)}},ADiagnosisTextTimer.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect.style.cursor="pointer",this.writeRect.style.pointerEvents="auto",this.number.style.fill=this.numberColor="blue"):(this.writeRect.style.cursor="auto",this.writeRect.style.pointerEvents="none",this.number.style.fill=this.numberColor="black")},ADiagnosisTextTimer.prototype.onClick=function(){switch(this.type){case AtimerTypes.Second:ADiagnosisForm.open({value:this.timerValue,plctag:this.plctag2,type:"s"===this.visuBase?AvalueTypes.TimeInSecond:AvalueTypes.TimeInMSecond,text:this.text.textContent,min:this.data.IntTimeMin,max:this.data.IntTimeMax});break;case AtimerTypes.SiemensDate:case AtimerTypes.SiemensTimeOfDay:case AtimerTypes.SiemensDateAndTime:case AtimerTypes.SiemensS5Time:case AtimerTypes.SiemensTime:ADiagnosisDateForm.open({value:this.timerValue,plctag:this.plctag2});break;default:ADiagnosisForm.open({value:this.numberValue,unit:"",min:this.data.IntTimeMin,max:this.data.IntTimeMax,plctag:this.plctag2,text:this.text.textContent})}},ADiagnosisTextTimer.prototype.datachange2Listener=function(a){try{this.number.style.fill=this.numberColor,this.timerValue.setValue(a.value),this.number.textContent=this.timerValue.toString()}catch(a){console.log("datachange2Listener datachangeListener failed: "+a)}},emosWS.ADiagnosisTextTimer=ADiagnosisTextTimer;function ADiagnosisTextDoubleTimer(a,b,c,d,e,f){this.parent=a,this.data=b,this.plc=c,this.valueInSecond=d,this.writable=e,this.diagnosisWindow=f,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisTextDoubleTimer",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"50%",NumberY:"15",Number2X:"99%",Number2Y:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisTextDoubleTimer",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"50%",NumberY:"15",Number2X:"99%",Number2Y:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextDoubleTimer",BorderWidth:"72%",WriteRectWidth:"25%",RectX:"47%",WriteRectX:"72.5%",TextX:"5",TextY:"15",NumberX:"71.5%",NumberY:"15",Number2X:"97%",Number2Y:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.plctag2=this.plc+"."+this.data.OPCID2,this.border=this.text=this.number=this.number2=this.rect=this.writeRect=this.numberValue=this.number2Value=this.timerValue=null,this.numberColor=this.writable?"blue":"black",d?(this.plcBase=this.data.Base||"s",this.visuBase=this.data.VisuBase||"s"):this.plcBase=this.visuBase=null,ADiagnosisElement.call(this,{data:b,writable:e})}ADiagnosisTextDoubleTimer.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisTextDoubleTimer.prototype.constructor=ADiagnosisTextDoubleTimer,ADiagnosisTextDoubleTimer.prototype.setTimerValue=function(){this.timerValue=this.valueInSecond?new ADiagnosisTimerSecond(0,this.plcBase,this.visuBase):new ADiagnosisTimerMinute},ADiagnosisTextDoubleTimer.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=this.positionClass[this.data.Position];this.setTimerValue();var h=this.panel=$("<div class='"+g.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisTextDoubleSVG'><rect class='DiagnosisNumberLRRectBorderSVG' width='"+g.BorderWidth+"' height='20' id='"+d+"'/><rect class='DiagnosisNumberLRRectwriteRectSVG' width='"+g.WriteRectWidth+"' height='20' x='"+g.RectX+"'/><rect class='DiagnosisNumberLRRectwriteRectSVG' width='"+g.WriteRectWidth+"' height='20' x='"+g.WriteRectX+"' id='"+f+"'/><text class='DiagnosisNumberLRTextTextSVG' x='"+g.TextX+"' y='"+g.TextY+"' id='"+e+"'>"+this.data.Text+"</text><text class='DiagnosisNumberLRTextNumberSVG' x='"+g.NumberX+"' y='"+g.NumberY+"' text-anchor='end' id='"+b+"'>"+this.numberValue+"</text><text class='DiagnosisNumberLRTextNumberSVG' x='"+g.Number2X+"' y='"+g.Number2Y+"' text-anchor='end' id='"+c+"'>"+this.number2Value+"</text></svg></div>");h.appendTo(this.parentDiv),this.number=document.getElementById(b),this.number2=document.getElementById(c),this.text=document.getElementById(e),this.border=document.getElementById(d),this.writeRect=document.getElementById(f),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.advise(this.plctag2,this.datachange2Listener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.writable&&(this.writeRect.style.cursor="pointer",this.number2.setAttribute("pointer-events","none"),this.writeRect.addEventListener("click",this.onClick.bind(this)))}catch(a){console.log("DiagnosisTextDoubleTimer init failed: "+a)}},ADiagnosisTextDoubleTimer.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect.style.cursor="pointer",this.writeRect.style.pointerEvents="auto",this.number2.style.fill=this.numberColor="blue"):(this.writeRect.style.cursor="auto",this.writeRect.style.pointerEvents="none",this.number2.style.fill=this.numberColor="black")},ADiagnosisTextDoubleTimer.prototype.onClick=function(){ADiagnosisForm.open({value:this.timerValue,unit:"",min:this.data.IntTimeMin,max:this.data.IntTimeMax,plctag:this.plctag2,text:this.text.textContent,type:this.valueInSecond?"s"===this.visuBase?AvalueTypes.TimeInSecond:AvalueTypes.TimeInMSecond:AvalueTypes.TimeInMinute})},ADiagnosisTextDoubleTimer.prototype.datachangeListener=function(a){try{this.number.style.fill="black",this.timerValue.setValue(a.value),this.number.textContent=this.timerValue.toString()}catch(a){console.log("DiagnosisTextDoubleTimer datachangeListener failed: "+a)}},ADiagnosisTextDoubleTimer.prototype.datachange2Listener=function(a){try{this.number2.style.fill=this.numberColor,this.timerValue.setValue(a.value),this.number2.textContent=this.timerValue.toString()}catch(a){console.log("DiagnosisTextDoubleTimer datachange2Listener failed: "+a)}},emosWS.ADiagnosisTextDoubleTimer=ADiagnosisTextDoubleTimer;function ADiagnosisTextNumber(a,b,c,d,e){this.parent=a,this.data=b,this.plc=c,this.writable=d,this.diagnosisWindow=e,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisTextInteger",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisTextInteger",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextInteger",BorderWidth:"97.5%",WriteRectWidth:"25%",WriteRectX:"72.5%",TextX:"5",TextY:"15",NumberX:"96.5%",NumberY:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.numberValue=this.border=this.text=this.number=this.writeRect=null,this.unit=emosWS.getUnit(),this.numberColor=this.writable?"blue":"black",this.msg=null,ADiagnosisElement.call(this,{data:b,writable:d})}ADiagnosisTextNumber.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisTextNumber.prototype.constructor=ADiagnosisTextNumber,ADiagnosisTextNumber.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},ADiagnosisTextNumber.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=this.positionClass[this.data.Position],g=this.panel=$("<div class='"+f.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisNumberLRSVG'><rect class='DiagnosisNumberLRRectBorderSVG' width='"+f.BorderWidth+"' height='20' id='"+c+"'/><rect class='DiagnosisNumberLRRectwriteRectSVG' width='"+f.WriteRectWidth+"' height='20' x='"+f.WriteRectX+"' id='"+e+"'/><text class='DiagnosisNumberLRTextTextSVG' x='"+f.TextX+"' y='"+f.TextY+"' id='"+d+"'>"+this.data.Text+"</text><text class='DiagnosisNumberLRTextNumberSVG' x='"+f.NumberX+"' y='"+f.NumberY+"' text-anchor='end' id='"+b+"'>"+this.numberValue+this.getUnitSymbol()+"</text></svg></div>");g.appendTo(this.parentDiv),this.number=document.getElementById(b),this.text=document.getElementById(d),this.border=document.getElementById(c),this.writeRect=document.getElementById(e),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.adviseProperty(this.plctag,this.propertyListener.bind(this)),this.writable&&(this.writeRect.style.cursor="pointer",this.number.setAttribute("pointer-events","none"),this.writeRect.addEventListener("click",this.onClick.bind(this)))}catch(a){console.log("DiagnosisTextNumber init failed: "+a)}},ADiagnosisTextNumber.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect.style.cursor="pointer",this.writeRect.style.pointerEvents="auto",this.number.style.fill=this.numberColor="blue"):(this.writeRect.style.cursor="auto",this.writeRect.style.pointerEvents="none",this.number.style.fill=this.numberColor="black")},ADiagnosisTextNumber.prototype.onClick=function(){ADiagnosisForm.open({value:this.numberValue,unit:this.getUnitSymbol(),min:this.data.RealInputMin||this.data.IntInputMin,max:this.data.RealInputMax||this.data.IntInputMax,plctag:this.plctag,text:this.text.textContent,precision:this.data.Precision})},ADiagnosisTextNumber.prototype.datachangeListener=function(a){try{this.msg=a;var b=this.getValue(a.value);this.data.Precision?this.numberValue=parseFloat(b).toFixed(this.data.Precision):this.numberValue=GetAsInteger(b),this.number.style.fill=this.numberColor,this.number.textContent=this.numberValue+this.getUnitSymbol()}catch(a){console.log("DiagnosisTextNumber datachangeListener failed: "+a)}},ADiagnosisTextNumber.prototype.unitListener=function(){this.datachangeListener(this.msg)},ADiagnosisTextNumber.prototype.propertyListener=function(a,b){this.datachangeListener(this.msg)},emosWS.ADiagnosisTextNumber=ADiagnosisTextNumber;function ADiagnosisTextNumberNumber(a,b,c,d,e,f){this.parent=a,this.data=b,this.plc=c,this.dataType=d,this.writable=e,this.diagnosisWindow=f,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisTextNumberNumber",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15",Number2X:"99%",Number2Y:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisTextNumberNumber",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15",Number2X:"99%",Number2Y:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,
css:"DiagnosisTextNumberNumber",BorderWidth:"97.5%",WriteRectWidth:"25%",RectX:"47%",WriteRectX:"72.5%",TextX:"5",TextY:"15",NumberX:"71.5%",NumberY:"15",Number2X:"96.5%",Number2Y:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.plctag2=this.plc+"."+this.data.OPCID2,this.border=this.text=this.number=this.number2=this.rect=this.writeRect=this.numberValue=this.number2Value=this.min=this.max=null,this.unit=emosWS.getUnit(),this.numberColor=this.writable?"blue":"black",this.msg1=this.msg2=null,ADiagnosisElement.call(this,{data:b,writable:e})}ADiagnosisTextNumberNumber.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisTextNumberNumber.prototype.constructor=ADiagnosisTextNumberNumber,ADiagnosisTextNumberNumber.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},ADiagnosisTextNumberNumber.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID();switch(this.dataType){case this.diagnosisWindow.dataTypes.Integer:this.min=this.data.IntInputMin,this.max=this.data.IntInputMax;break;case this.diagnosisWindow.dataTypes.Real:this.min=this.data.RealInputMin,this.max=this.data.RealInputMax}var h=this.positionClass[this.data.Position],i=this.panel=$("<div class='"+h.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisNumberLRSVG'><rect class='DiagnosisNumberLRRectBorderSVG' width='"+h.BorderWidth+"' height='20' id='"+d+"'/><rect class='DiagnosisNumberLRRectwriteRectSVG' width='"+h.WriteRectWidth+"' height='20' x='"+h.RectX+"' id='"+f+"'/><rect class='DiagnosisNumberLRRectwriteRectSVG' width='"+h.WriteRectWidth+"' height='20' x='"+h.WriteRectX+"' id='"+g+"'/><text class='DiagnosisNumberLRTextTextSVG' x='"+h.TextX+"' y='"+h.TextY+"' id='"+e+"'>"+this.data.Text+"</text><text class='DiagnosisNumberLRTextNumberSVG' x='"+h.NumberX+"' y='"+h.NumberY+"' text-anchor='end' id='"+b+"'>"+this.numberValue+this.getUnitSymbol()+"</text><text class='DiagnosisNumberLRTextNumberSVG' x='"+h.Number2X+"' y='"+h.Number2Y+"' text-anchor='end' id='"+c+"'>"+this.number2Value+this.getUnitSymbol()+"</text></svg></div>");i.appendTo(this.parentDiv),this.number=document.getElementById(b),this.number2=document.getElementById(c),this.text=document.getElementById(e),this.border=document.getElementById(d),this.rect=document.getElementById(f),this.writeRect=document.getElementById(g),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.advise(this.plctag2,this.datachange2Listener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.adviseProperty(this.plctag2,this.propertyListener.bind(this)),this.writable&&(this.writeRect.style.cursor="pointer",this.number2.setAttribute("pointer-events","none"),this.writeRect.addEventListener("click",this.on2Click.bind(this)))}catch(a){console.log("DiagnosisTextNumberNumber init failed: "+a)}},ADiagnosisTextNumberNumber.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect.style.cursor="pointer",this.writeRect.style.pointerEvents="auto",this.number2.style.fill=this.numberColor="blue"):(this.writeRect.style.cursor="auto",this.writeRect.style.pointerEvents="none",this.number2.style.fill=this.numberColor="black")},ADiagnosisTextNumberNumber.prototype.on2Click=function(){ADiagnosisForm.open({value:this.number2Value,unit:this.getUnitSymbol(),min:this.min,max:this.max,plctag:this.plctag2,text:this.text.textContent})},ADiagnosisTextNumberNumber.prototype.datachangeListener=function(a){try{this.msg1=a,this.numberValue=GetAsInteger(a.value),this.number.style.fill="black",this.number.textContent=this.numberValue+this.getUnitSymbol()}catch(a){console.log("DiagnosisTextNumberNumber datachangeListener failed: "+a)}},ADiagnosisTextNumberNumber.prototype.datachange2Listener=function(a){try{this.msg2=a,this.number2Value=GetAsInteger(a.value),this.number2.style.fill=this.numberColor,this.number2.textContent=this.number2Value+this.getUnitSymbol()}catch(a){console.log("DiagnosisTextNumberNumber datachange2Listener failed: "+a)}},ADiagnosisTextNumberNumber.prototype.unitListener=function(){this.datachangeListener(this.msg1),this.datachange2Listener(this.msg2)},ADiagnosisTextNumberNumber.prototype.propertyListener=function(a,b){this.datachangeListener(this.msg1),this.datachange2Listener(this.msg2)},emosWS.ADiagnosisTextNumberNumber=ADiagnosisTextNumberNumber;function ADiagnosisLedTextNumberNumber(a,b,c,d,e){this.parent=a,this.data=b,this.plc=c,this.writable=d,this.diagnosisWindow=e,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisLedText",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15",Number2X:"99%",Number2Y:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisLedText",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15",Number2X:"99%",Number2Y:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisLedText",BorderWidth:"92.4%",WriteRectWidth:"25%",RectX:"47%",WriteRectX:"72.5%",TextX:"27",TextY:"15",NumberX:"71.5%",NumberY:"15",Number2X:"96.5%",Number2Y:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.plctag2=this.plc+"."+this.data.OPCID2,this.plctagLed=this.plc+"."+this.data.LEDOPCID,this.ledValue=this.border=this.led=this.text=this.number=this.number2=this.writeRect=this.numberValue=this.number2Value=null,this.unit=emosWS.getUnit(),this.numberColor=this.writable?"blue":"black",this.msg1=this.msg2=null,ADiagnosisElement.call(this,{data:b,writable:d})}ADiagnosisLedTextNumberNumber.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisLedTextNumberNumber.prototype.constructor=ADiagnosisLedTextNumberNumber,ADiagnosisLedTextNumberNumber.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},ADiagnosisLedTextNumberNumber.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=this.positionClass[this.data.Position],i=this.panel=$("<div class='"+h.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisNumberLRSVG'><rect width='20' height='20' style='fill:white;stroke-width:1;stroke:grey' /><circle id='"+b+"' cx='10' cy='10' r='7' stroke='black' stroke-width='1' fill='orange'/><rect class='DiagnosisNumberLRRectBorderSVG' x='22' width='"+h.BorderWidth+"' height='20' id='"+e+"'/><rect class='DiagnosisNumberLRRectwriteRectSVG' width='"+h.WriteRectWidth+"' height='20' x='"+h.RectX+"'/><rect class='DiagnosisNumberLRRectwriteRectSVG' width='"+h.WriteRectWidth+"' height='20' x='"+h.WriteRectX+"' id='"+g+"'/><text class='DiagnosisNumberLRTextTextSVG' x='"+h.TextX+"' y='"+h.TextY+"' id='"+f+"'>"+this.data.Text+"</text><text class='DiagnosisNumberLRTextNumberSVG' x='"+h.NumberX+"' y='"+h.NumberY+"' text-anchor='end' id='"+c+"'>"+this.numberValue+this.getUnitSymbol()+"</text><text class='DiagnosisNumberLRTextNumberSVG' x='"+h.Number2X+"' y='"+h.Number2Y+"' text-anchor='end' id='"+d+"'>"+this.number2Value+this.getUnitSymbol()+"</text></svg></div>");i.appendTo(this.parentDiv),this.number=document.getElementById(c),this.number2=document.getElementById(d),this.text=document.getElementById(f),this.border=document.getElementById(e),this.writeRect=document.getElementById(g),this.led=document.getElementById(b),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.advise(this.plctag2,this.datachange2Listener.bind(this),"",emosWS.tagType.IO),emosWS.advise(this.plctagLed,this.datachangeLedListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.adviseProperty(this.plctag2,this.propertyListener.bind(this)),this.writable&&(this.writeRect.style.cursor="pointer",this.number2.setAttribute("pointer-events","none"),this.writeRect.addEventListener("click",this.onClick.bind(this)))}catch(a){console.log("DiagnosisTextInteger init failed: "+a)}},ADiagnosisLedTextNumberNumber.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect.style.cursor="pointer",this.writeRect.style.pointerEvents="auto",this.number2.style.fill=this.numberColor="blue"):(this.writeRect.style.cursor="auto",this.writeRect.style.pointerEvents="none",this.number2.style.fill=this.numberColor="black")},ADiagnosisLedTextNumberNumber.prototype.onClick=function(){ADiagnosisForm.open({value:this.number2Value,unit:this.getUnitSymbol(),min:this.data.RealInputMin,max:this.data.RealInputMax,plctag:this.plctag2,text:this.text.textContent})},ADiagnosisLedTextNumberNumber.prototype.datachangeLedListener=function(a){try{this.msg1=a,this.ledValue=GetAsBoolean(a.value);var b=AcolorList[this.ledValue?this.data.OnLED:this.data.OffLED];this.led.setAttribute("fill",b)}catch(a){console.log("DiagnosisLedTextNumberNumber datachangeLedListener failed: "+a)}},ADiagnosisLedTextNumberNumber.prototype.datachangeListener=function(a){try{this.msg2=a,this.numberValue=GetAsDouble(a.value),this.number.style.fill="black",this.number.textContent=this.numberValue+this.getUnitSymbol()}catch(a){console.log("DiagnosisLedTextNumberNumber atachangeListener failed: "+a)}},ADiagnosisLedTextNumberNumber.prototype.datachange2Listener=function(a){try{this.number2Value=GetAsDouble(a.value),this.number2.style.fill=this.numberColor,this.number2.textContent=this.number2Value+this.getUnitSymbol()}catch(a){console.log("DiagnosisLedTextNumberNumber atachangeListener failed: "+a)}},ADiagnosisLedTextNumberNumber.prototype.unitListener=function(){this.datachangeListener(this.msg1),this.datachange2Listener(this.msg2)},ADiagnosisLedTextNumberNumber.prototype.propertyListener=function(a,b){this.datachangeListener(this.msg1),this.datachange2Listener(this.msg2)},emosWS.ADiagnosisLedTextNumberNumber=ADiagnosisLedTextNumberNumber;function ADiagnosisLedTextNumber(a,b,c,d,e){this.parent=a,this.data=b,this.plc=c,this.writable=d,this.diagnosisWindow=e,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisLedText",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisLedText",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisLedText",BorderWidth:"92.4%",WriteRectWidth:"12.5%",WriteRectX:"85%",TextX:"27",TextY:"15",NumberX:"96.5%",NumberY:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.plctagLed=this.plc+"."+this.data.LEDOPCID,this.numberValue=this.ledValue=this.border=this.led=this.text=this.number=this.writeRect=this.numberValue=null,this.unit=emosWS.getUnit(),this.numberColor=this.writable?"blue":"black",this.msg=null,ADiagnosisElement.call(this,{data:b,writable:d})}ADiagnosisLedTextNumber.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisLedTextNumber.prototype.constructor=ADiagnosisLedTextNumber,ADiagnosisLedTextNumber.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},ADiagnosisLedTextNumber.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=this.positionClass[this.data.Position],h=this.panel=$("<div class='"+g.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisNumberLRSVG'><rect width='20' height='20' style='fill:white;stroke-width:1;stroke:grey' /><circle id='"+b+"' cx='10' cy='10' r='7' stroke='black' stroke-width='1' fill='orange'/><rect class='DiagnosisNumberLRRectBorderSVG' x='22' width='"+g.BorderWidth+"' height='20' id='"+d+"'/><rect class='DiagnosisNumberLRRectwriteRectSVG' width='"+g.WriteRectWidth+"' height='20' x='"+g.WriteRectX+"' id='"+f+"'/><text class='DiagnosisNumberLRTextTextSVG' x='"+g.TextX+"' y='"+g.TextY+"' id='"+e+"'>"+this.data.Text+"</text><text class='DiagnosisNumberLRTextNumberSVG' x='"+g.NumberX+"' y='"+g.NumberY+"' text-anchor='end' id='"+c+"'>"+this.numberValue+this.getUnitSymbol()+"</text></svg></div>");h.appendTo(this.parentDiv),this.number=document.getElementById(c),this.text=document.getElementById(e),this.border=document.getElementById(d),this.writeRect=document.getElementById(f),this.led=document.getElementById(b),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.advise(this.plctagLed,this.datachangeLedListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.adviseProperty(this.plctag,this.propertyListener.bind(this)),this.writable&&(this.writeRect.style.cursor="pointer",this.number.setAttribute("pointer-events","none"),this.writeRect.addEventListener("click",this.onClick.bind(this)))}catch(a){console.log("DiagnosisLedTextNumber init failed: "+a)}},ADiagnosisLedTextNumber.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect.style.cursor="pointer",this.writeRect.style.pointerEvents="auto",this.number.style.fill=this.numberColor="blue"):(this.writeRect.style.cursor="auto",this.writeRect.style.pointerEvents="none",this.number.style.fill=this.numberColor="black")},ADiagnosisLedTextNumber.prototype.onClick=function(){ADiagnosisForm.open({value:this.numberValue,unit:this.getUnitSymbol(),min:this.data.RealInputMin||this.data.IntInputMin,max:this.data.RealInputMax||this.data.IntInputMax,plctag:this.plctag,text:this.text.textContent,precision:this.data.Precision})},ADiagnosisLedTextNumber.prototype.datachangeLedListener=function(a){try{this.ledValue=GetAsBoolean(a.value);var b=AcolorList[this.ledValue?this.data.OnLED:this.data.OffLED];this.led.setAttribute("fill",b)}catch(a){console.log("DiagnosisLedTextNumber datachangeLedListener failed: "+a)}},ADiagnosisLedTextNumber.prototype.datachangeListener=function(a){try{this.msg=a;var b=this.getValue(a.value);this.data.Precision?this.numberValue=parseFloat(b).toFixed(this.data.Precision):this.numberValue=GetAsInteger(b),this.number.style.fill=this.numberColor,this.number.textContent=this.numberValue+this.getUnitSymbol()}catch(a){console.log("DiagnosisLedTextNumber atachangeListener failed: "+a)}},ADiagnosisLedTextNumber.prototype.unitListener=function(){this.datachangeListener(this.msg)},ADiagnosisLedTextNumber.prototype.propertyListener=function(a,b){this.datachangeListener(this.msg)},emosWS.ADiagnosisLedTextNumber=ADiagnosisLedTextNumber;function ADiagnosisBrowserPage(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisBrowserPage"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisBrowserPage"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisBrowserPage"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.OPCID=this.data.OPCID,this.url=this.data.URL,this.plctag=this.plc,this.iframe=null,this.init()}ADiagnosisBrowserPage.prototype.init=function(){try{var a=getElementGlobalID(),b=this.positionClass[this.data.Position],c=$("<div class='"+b.css+"'><iframe class='DiagnosisBrowserIFrame' id='"+a+"' src='"+this.url+"'></iframe></div>");c.appendTo(this.parentDiv),this.iframe=document.getElementById(a),this.url.indexOf("$")>=0&&""!==this.OPCID&&emosWS.advise(this.plc+"."+this.data.OPCID,this.datachangeListener.bind(this),"",emosWS.tagType.IO)}catch(a){console.log("DiagnosisControlNetArray init failed: "+a)}},ADiagnosisBrowserPage.prototype.datachangeListener=function(a){var b=this.url;this.iframe.src=b.replace("$",a.value)},emosWS.ADiagnosisBrowserPage=ADiagnosisBrowserPage;function ADiagnosisControlNetArray(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisControlNetArray",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisControlNetArray",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisControlNetArray",BorderWidth:"92.4%",WriteRectWidth:"12.5%",WriteRectX:"85%",TextX:"27",TextY:"15",NumberX:"96.5%",NumberY:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.aOPCIA=this.data.AOPCID,this.aOPCMidID=this.data.AOPCMidID,this.aOPCEndID=this.data.AOPCEndID,this.sOPCIA=this.data.SOPCID,this.sOPCMidID=this.data.SOPCMidID,this.sOPCEndID=this.data.SOPCEndID,this.start=parseInt(this.data.Start),this.stop=parseInt(this.data.Stop),this.elements=this.stop-this.start+1,this.rows=Math.floor(this.elements/11),this.plctag=this.plc,this.controls={},this.rowElements=11,this.init()}ADiagnosisControlNetArray.prototype.init=function(){try{for(var a=getElementGlobalID(),b=this.start,c=this.stop+1;b<c;b++)this.controls[b]={id:getElementGlobalID(),alarmValue:null,statusValue:null,rect:null};for(var d=this.positionClass[this.data.Position],e="",f=0,g=0,h=35,i=40,j=20,k=25,l=k*this.rows,b=0;b<this.rows;b++){for(var c=b===this.rows-1?this.elements-b*this.rowElements:this.rowElements,m=0;m<c;m++){var n=b*this.rowElements+m+this.start;e+="<rect class='DiagnosisControlRectSVG' x='"+(f+m*i)+"' y='"+g+"' width='"+h+"' height='"+j+"' id='"+this.controls[n].id+"'/><text text-anchor='middle' class='DiagnosisControlTextSVG' x='"+(f+h/2+m*i)+"' y='"+(g+15)+"'>"+n+"</text>"}g+=k}var o=$("<div class='"+d.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='"+l+"' class='DiagnosisControlArraySVG'>"+e+"</svg></div>");o.appendTo(this.parentDiv);for(var b=this.start,c=this.stop+1;b<c;b++)this.controls[b].rect=document.getElementById(this.controls[b].id),emosWS.advise(this.getAlarmPlctag(b),this.datachangeAlarmListener.bind(this),b,emosWS.tagType.IO),emosWS.advise(this.getStatusPlctag(b),this.datachangeStatusListener.bind(this),b,emosWS.tagType.IO)}catch(a){console.log("DiagnosisControlNetArray init failed: "+a)}},ADiagnosisControlNetArray.prototype.getAlarmPlctag=function(a){var b=(100+a).toString().substring(1);return this.plctag+"."+this.aOPCIA+b+this.aOPCMidID+a+this.aOPCEndID},ADiagnosisControlNetArray.prototype.getStatusPlctag=function(a){var b=(100+a).toString().substring(1);return this.plctag+"."+this.sOPCIA+b+this.sOPCMidID+a+this.sOPCEndID},ADiagnosisControlNetArray.prototype.datachangeAlarmListener=function(a,b){try{var c=this.controls[b];c.alarmValue=GetAsBoolean(a.value),c.alarmValue?c.rect.style.fill=AcolorList.R:c.statusValue||(c.rect.style.fill=AcolorList.O)}catch(a){console.log("DiagnosisControlNetArray datachangeAlarmListener failed: "+a)}},ADiagnosisControlNetArray.prototype.datachangeStatusListener=function(a,b){try{var c=this.controls[b];c.statusValue=GetAsBoolean(a.value),c.alarmValue||(c.statusValue?c.rect.style.fill=AcolorList.G:c.rect.style.fill=AcolorList.O)}catch(a){console.log("DiagnosisControlNetArray datachangeStatusListener failed: "+a)}},emosWS.ADiagnosisControlNetArray=ADiagnosisControlNetArray;function ADiagnosisBitBar(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisBitBar",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisBitBar",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisBitBar",BorderWidth:"92.4%",WriteRectWidth:"12.5%",WriteRectX:"85%",TextX:"27",TextY:"15",NumberX:"96.5%",NumberY:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.numberValue=null,this.barBytes=2,this.leds={},ADiagnosisElement.call(this,{data:b})}ADiagnosisBitBar.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisBitBar.prototype.constructor=ADiagnosisBitBar,ADiagnosisBitBar.prototype.init=function(){try{for(var a=getElementGlobalID(),b=0,c=8*this.barBytes;b<c;b++)this.leds[b]={id:getElementGlobalID(),value:null,svg:null};for(var d=this.positionClass[this.data.Position],e="",f=0,g=10,h=10,i=12,j=6,b=0;b<this.barBytes;b++){for(var k=0;k<8;k++){var l=8*(this.barBytes-b-1)+(7-k);e+="<text class='DiagnosisNumberNumberTextSVG' x='"+(f+k*g)+"' y='"+h+"'>"+(7-k)+"</text><rect class='DiagnosisBitSVG' x='"+(f+k*g)+"' y='"+i+"' width='"+j+"' height='"+j+"' id='"+this.leds[l].id+"'/>"}f+=9*g}var m=this.panel=$("<div class='"+d.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisBitBarSVG'>"+e+"</svg></div>");m.appendTo(this.parentDiv);for(var b=0,c=8*this.barBytes;b<c;b++)this.leds[b].svg=document.getElementById(this.leds[b].id);emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO)}catch(a){console.log("DiagnosisBitBar init failed: "+a)}},ADiagnosisBitBar.prototype.datachangeListener=function(a){try{this.numberValue=GetAsInteger(a.value);for(var b=4294967296,c=(b+this.numberValue).toString(2),d=0,e=8*this.barBytes;d<e;d++){this.leds[d].value=c[c.length-d-1];var f="1"===this.leds[d].value?AcolorList.G:AcolorList.O;this.leds[d].svg.style.fill=f}}catch(a){console.log("DiagnosisBitBar datachangeListener failed: "+a)}},emosWS.ADiagnosisBitBar=ADiagnosisBitBar;function ADiagnosisTextLED(a,b,c,d,e){this.parent=a,this.data=b,this.plc=c,this.writable=d,this.diagnosisWindow=e,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisTextLed",rectWidth:"100%",rectHeight:"20",writeRectX:"91%",writeRectY:"10",writeRectWidth:"20",ledX:"95.5%",ledY:"10",ledR:"7"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisTextLed",rectWidth:"100%",rectHeight:"20",writeRectX:"91%",writeRectY:"10",writeRectWidth:"20",ledX:"95.5%",ledY:"10",ledR:"7"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextLed",rectWidth:"97.5%",rectHeight:"20",writeRectX:"93.1%",writeRectY:"10",writeRectWidth:"20",ledX:"95.4%",ledY:"10",ledR:"7"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.led=this.border=this.text=this.LEDValue=null,ADiagnosisElement.call(this,{data:b,writable:d})}ADiagnosisTextLED.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisTextLED.prototype.constructor=ADiagnosisTextLED,ADiagnosisTextLED.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=this.positionClass[this.data.Position],g=this.writable?"<rect  id='"+e+"' width='"+f.writeRectWidth+"' height='"+f.rectHeight+"' x='"+f.writeRectX+"' style='fill:lightgrey;'/>":"";this.panel=$("<div class='"+f.css+"' id='"+a+"'><svg width='100%' height='20'><rect id='"+c+"' width='"+f.rectWidth+"' height='"+f.rectHeight+"' style='fill:white;stroke-width:1;stroke:grey' />"+g+"<text id='"+d+"' x='5' y='15' fill='black'>"+this.data.Text+"</text><circle id='"+b+"' cx='"+f.ledX+"' cy='"+f.ledY+"' r='"+f.ledR+"' stroke='black' stroke-width='1' fill='orange'/></svg></div>"),this.panel.appendTo(this.parentDiv),this.led=document.getElementById(b),this.text=document.getElementById(d),this.border=document.getElementById(c),this.writeRect=document.getElementById(e),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.writable&&(this.led.style.cursor="pointer",this.led.addEventListener("click",function(){emosWS.poke(this.plctag,this.LEDValue?"0":"-1")}.bind(this)))}catch(a){console.log("DiagnosisTextLED init failed: "+a)}},ADiagnosisTextLED.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect.style.visibility="visible",this.led.style.cursor="pointer",this.led.style.pointerEvents="auto"):(this.writeRect.style.visibility="hidden",this.led.style.cursor="auto",this.led.style.pointerEvents="none")},ADiagnosisTextLED.prototype.datachangeListener=function(a){try{this.LEDValue=GetAsBoolean(a.value);var b=AcolorList[this.LEDValue?this.data.OnLED:this.data.OffLED];this.led.setAttribute("fill",b)}catch(a){console.log("DiagnosisTextLED datachangeListener failed: "+a)}},emosWS.ADiagnosisTextLED=ADiagnosisTextLED;function ADiagnosisDoubleText(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisDoubleText"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisDoubleText"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisDoubleText"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.text=this.text2=null,ADiagnosisElement.call(this,{data:b})}ADiagnosisDoubleText.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisDoubleText.prototype.constructor=ADiagnosisDoubleText,ADiagnosisDoubleText.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID();"undefined"!=typeof this.data.VisibleOPCID&&""!==this.data.VisibleOPCID&&(this.plctag=""===this.data.VisibleOPCID?"":this.plc+"."+this.data.OPCID);var d=this.positionClass[this.data.Position],e=this.panel=$("<div class='"+d.css+"' id='"+a+"'><div class='DiagnosisDoubleTextDiv' id='"+c+"'>"+this.data.Text2+"</div><div class='DiagnosisDoubleTextDiv' id='"+b+"'>"+this.data.Text+"</div></div>");e.appendTo(this.parentDiv),this.text=document.getElementById(b),this.text2=document.getElementById(c),""!==this.plctag&&emosWS.advise(this.plctag,function(a){try{var b=GetAsBoolean(a.value);this.text.style.visibility=b?"visible":"hidden",this.text2.style.visibility=b?"visible":"hidden"}catch(a){console.log("DiagnosisDoubleText datachangeListener failed: "+a)}}.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this)),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID2,"name",function(a){""!==a.value&&(this.text2.textContent=a.value)}.bind(this))}catch(a){console.log("DiagnosisDoubleText init failed: "+a)}},emosWS.ADiagnosisDoubleText=ADiagnosisDoubleText;function ADiagnosisString(a,b,c,d,e){this.parent=a,this.data=b,this.plc=c,this.writable=d,this.diagnosisWindow=e,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisString"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisString"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisString"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctagVisible=this.textValue="",this.plctag=this.plc+"."+this.data.OPCID,this.text=null,this.textColor=this.writable?"blue":"black",ADiagnosisElement.call(this,{data:b,writable:d})}ADiagnosisString.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisString.prototype.constructor=ADiagnosisString,ADiagnosisString.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID();"undefined"!=typeof this.data.VisibleOPCID&&""!==this.data.VisibleOPCID&&(this.plctagVisible=""===this.data.VisibleOPCID?"":this.plc+"."+this.data.VisibleOPCID);var c=this.positionClass[this.data.Position],d=this.panel=$("<div class='"+c.css+"' id='"+a+"'><input class='DiagnosisStringText' type='text' id='"+b+"' readonly></p></div>");d.appendTo(this.parentDiv),this.text=document.getElementById(b),""!==this.plctagVisible&&emosWS.advise(this.plctagVisible,function(a){try{var b=GetAsBoolean(a.value);this.text.style.visibility=b?"visible":"hidden"}catch(a){console.log("DiagnosisString datachangeListener failed: "+a)}}.bind(this),"",emosWS.tagType.IO),emosWS.advise(this.plctag,function(a){""!==a.value&&(this.text.value=a.value,this.text.style["background-color"]="white",this.text.style.color=this.textColor,this.textValue=a.value)}.bind(this)),this.writable&&(this.text.style.cursor="pointer",this.text.addEventListener("click",this.onClick.bind(this)))}catch(a){console.log("DiagnosisString init failed: "+a)}},ADiagnosisString.prototype.onClick=function(){ADiagnosisForm.open({value:this.textValue,unit:"",min:this.data.StrStart,max:this.data.StrLen,plctag:this.plctag,text:this.textValue,type:AvalueTypes.String})},ADiagnosisString.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.text.style.cursor="pointer",this.text.style.pointerEvents="auto",this.text.style.color=this.textColor="blue"):(this.text.style.cursor="auto",this.text.style.pointerEvents="none",this.text.style.color=this.textColor="black")},emosWS.ADiagnosisString=ADiagnosisString;function ADiagnosisStringField(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisString"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisString"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisString"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.text=null,this.textValue="",ADiagnosisElement.call(this,{data:b})}ADiagnosisStringField.prototype=Object.create(ADiagnosisElement.prototype),ADiagnosisStringField.prototype.constructor=ADiagnosisStringField,ADiagnosisStringField.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=this.positionClass[this.data.Position],d=this.panel=$("<div class='"+c.css+"' id='"+a+"'><textarea class='DiagnosisStringFieldTextArea' rows='4' id='"+b+"' readonly></p></div>");d.appendTo(this.parentDiv),this.text=document.getElementById(b),emosWS.advise(this.plctag,function(a){""!==a.value&&(this.text.value=a.value,this.text.style["background-color"]="white",this.textValue=a.value)}.bind(this))}catch(a){console.log("DiagnosisString init failed: "+a)}},emosWS.DiagnosisStringField=ADiagnosisStringField;function ADiagnosisChildWindow(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisText"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisText"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextLong"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),
this.dataText=""===this.data.Text?".":this.data.Text,this.plctag="",this.text="",this.init()}ADiagnosisChildWindow.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=this.data.Name+" "+this.data.Comment+" - ",d="TextID: "+this.data.TextID,e=$("<div class='DiagnosisGerneralElement'><svg id='"+a+"' width='100%' height='20'><rect width='100%' height='20' style='fill:white;stroke-width:1;stroke:grey' /><text id='"+b+"' x='5' y='15' fill='black'>"+c+d+"</text></svg></div>");e.appendTo(this.parentDiv),this.text=document.getElementById(b),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=c+a.value)}.bind(this),this),new emosWS.ESDiagnosisWindow({conditionFunction:function(){return{DiagnosisLibID:this.diagnosisWindow.DiagnosisLibID,PLC:this.diagnosisWindow.PLC,ID:this.diagnosisWindow.ID+this.data.OPCID,DiagnosisControl:this.data.Name,GroupRightIndex:this.diagnosisWindow.GroupRightIndex,Enabled:!0}}.bind(this),PLACEHOLDER_USEHAND:!0,PLACEHOLDER_USESTROKE:!1,PLACEHOLDER_USEHIDE:!1,STDPLACEHOLDER_SHAPENAME:a,svgTarget:a})}catch(a){console.log("DiagnosisChildWindow init failed: "+a)}},emosWS.ADiagnosisChildWindow=ADiagnosisChildWindow;function ADiagnosisWindow(a){this.conditionFunction=a.conditionFunction,this.condition=!1,this.useHand=a.PLACEHOLDER_USEHAND,this.useStroke=a.PLACEHOLDER_USESTROKE,this.useHide=a.PLACEHOLDER_USEHIDE,this.target=a.STDPLACEHOLDER_SHAPENAME,this.svgTarget=a.svgTarget,this.DiagnosisLibID=null,this.PLC=null,this.ID=null,this.DiagnosisControl=null,this.childWindows=null,this.childWindowsData={},this.appendedChildData=!1,this.GroupRightIndex=null,this.Enabled=null,this.divTypes={None:0,LRLeft:1,LRRight:2,Long:3,LMRLeft:4,LMRMiddle:5,LMRRight:6},this.dataTypes={Integer:0,Real:1},this.windowData=null,this.qualityGood=!1,this.badQualityTagList={},this.winName="",this.OPCVersionID="",this.OPCVersion="",this.versionList=[],this.rootVersion=null,this.plcVersion="",this.shape=getSVGElement(this.target),this.fill=null,this.fillHighLight="rgb(255, 255, 26)",this.rid=null,this.textPrefixList={1:"T01_",3:"T03_",5:"T05_"},this.initialize()}ADiagnosisWindow.prototype.updateTagList=function(a){"undefined"!=typeof a&&(emosWS.hasQualityGood(a)?"undefined"!=typeof this.badQualityTagList[a.tag]&&delete this.badQualityTagList[a.tag]:this.badQualityTagList[a.tag]=0,this.qualityGood=0===Object.keys(this.badQualityTagList).length)},ADiagnosisWindow.prototype.getTextPrefix=function(){return this.textPrefixList[this.DiagnosisLibID]},ADiagnosisWindow.prototype.datachangeListener=function(a,b){try{}catch(a){console.log("datachangeListener failed: "+a)}},ADiagnosisWindow.prototype.appendWindow=function(a){try{this.appendChildData();var b=this,c=$("<div class='DiagnosisWindow' id='"+a+"'><div class='DiagnosisHeadOld'></div><div class='DiagnosisBodyOld'></div></div>"),d="Name: \t"+this.winName+"\nXML: \t"+this.rootVersion.replace(/(..)-(..)/,"__  $1 $2")+"\nPLC: \t"+this.plcVersion.replace(/(.)(..)(..)/,"0$1 $2 $3"),e='<a href="#" title="'+d+'" class="myDialogBtn"><span class="ui-icon ui-icon-alert"></span></a>';$("body").append(c);var f=$("#"+a).dialog({title:this.winName+" : "+this.PLC+this.ID,width:480,height:400,resizable:!0,close:function(a,c){$(this).dialog("destroy").remove(),b.terminate()},create:function(){$(this).prev(".ui-dialog-titlebar").find(".ui-dialog-title").after(e)},resize:function(){emosWS.attr.svgobject&&(emosWS.attr.svgobject.style["pointer-events"]="none")}}).mouseleave(function(){emosWS.attr.svgobject&&(emosWS.attr.svgobject.style["pointer-events"]="auto")}),g=f.find("div");this.appendHead(g[0]),this.appendBody(g[1])}catch(a){console.log("appendWindow failed: "+a)}},ADiagnosisWindow.prototype.appendHead=function(a){try{var b=this.windowData.Head;for(var c in b){var d=b[c];if("object"==typeof d){var e=ADiagnosisCommon.getObjectType(c);switch(e){case"TopTextLED":new ATopTextLED(a,d,this.PLC+this.ID,this)}}}}catch(a){console.log("appendHead failed: "+a)}},ADiagnosisWindow.prototype.appendBody=function(a){this.appendPageControl(a,this.windowData.PageControl)},ADiagnosisWindow.prototype.appendPageControl=function(a,b){try{new APageControl(a,b,this)}catch(a){console.log("appendPageControl failed: "+a)}},ADiagnosisWindow.prototype.appendPage=function(a,b,c,d,e,f){try{var a=a,b=b,d=d;a.LRLeft=null,a.LRRight=null,a.LRLong=null,a.LMRLeft=null,a.LMRMiddle=null,a.LMRRight=null,a.getDiv=function(b){switch(b){case this.divTypes.LRLeft:if(!a.LRLeft){var c=getElementGlobalID(),d=$("<div class='DiagnosisLRLeft' id='"+c+"'></div>");d.appendTo(a),a.LRLeft=document.getElementById(c),a.LRLong=null}return a.LRLeft;case this.divTypes.LRRight:if(!a.LRRight){var e=getElementGlobalID(),d=$("<div class='DiagnosisLRRight' id='"+e+"'></div>");d.appendTo(a),a.LRRight=document.getElementById(e),a.LRLong=null}return a.LRRight;case this.divTypes.Long:if(!a.LRLong){var f=getElementGlobalID(),d=$("<div class='DiagnosisLong' id='"+f+"'></div>");d.appendTo(a),a.LRLong=document.getElementById(f),a.LRLeft=null,a.LRRight=null,a.LMRLeft=null,a.LMRMiddle=null,a.LMRRight=null}return a.LRLong;case this.divTypes.LMRLeft:if(!a.LMRLeft){var g=getElementGlobalID(),d=$("<div class='DiagnosisLMRLeft' id='"+g+"'></div>");d.appendTo(a),a.LMRLeft=document.getElementById(g),a.LRLong=null}return a.LMRLeft;case this.divTypes.LMRMiddle:if(!a.LMRMiddle){var h=getElementGlobalID(),d=$("<div class='DiagnosisLMRMiddle' id='"+h+"'></div>");d.appendTo(a),a.LMRMiddle=document.getElementById(h),a.LRLong=null}return a.LMRMiddle;case this.divTypes.LMRRight:if(!a.LMRRight){var i=getElementGlobalID(),d=$("<div class='DiagnosisLMRRight' id='"+i+"'></div>");d.appendTo(a),a.LMRRight=document.getElementById(i),a.LRLong=null}return a.LMRRight;default:return null}}.bind(this);var g=function(){emosWS.login.au.hasPaintShopRight(d)?a.get(0).style.visibility="visible":a.get(0).style.visibility="hidden"};sortHashArray(b).forEach(function(d){var e=b[d];if("object"==typeof e){var f=ADiagnosisCommon.getObjectType(d);switch(f){case"AlarmClient":new AAlarmClient(a,e,this.PLC+this.ID,c);break;case"AddText":new ADiagnosisText(a,e,this.PLC+this.ID,this);break;case"AddString":new ADiagnosisString(a,e,this.PLC+this.ID,(!1),this);break;case"AddStringInput":new ADiagnosisString(a,e,this.PLC+this.ID,(!0),this);break;case"AddStringLong":e.Position="Long",new ADiagnosisString(a,e,this.PLC+this.ID,(!1),this);break;case"AddStringInputLong":e.Position="Long",new ADiagnosisString(a,e,this.PLC+this.ID,(!0),this);break;case"AddStringFieldLong":e.Position="Long",new ADiagnosisStringField(a,e,this.PLC+this.ID,this);break;case"AddTextLong":case"AddHeadLine":e.Position="Long",new ADiagnosisText(a,e,this.PLC+this.ID,this);break;case"AddTextLED":new ADiagnosisTextLED(a,e,this.PLC+this.ID,(!1),this);break;case"AddTextLEDLong":e.Position="Long",new ADiagnosisTextLED(a,e,this.PLC+this.ID,(!1),this);break;case"AddTextInputLED":new ADiagnosisTextLED(a,e,this.PLC+this.ID,(!0),this);break;case"AddTextLEDInputLong":e.Position="Long",new ADiagnosisTextLED(a,e,this.PLC+this.ID,(!0),this);break;case"AddTextLEDNiveau":new ADiagnosisTextLED(a,e,this.PLC+this.ID,(!1),this);break;case"AddTextInteger":case"AddTextReal":new ADiagnosisTextNumber(a,e,this.PLC+this.ID,(!1),this);break;case"AddTextIntegerLong":case"AddTextRealLong":e.Position="Long",new ADiagnosisTextNumber(a,e,this.PLC+this.ID,(!1),this);break;case"AddTextIntegerInput":case"AddTextRealInput":case"AddTextRealInputNiveau":new ADiagnosisTextNumber(a,e,this.PLC+this.ID,(!0),this);break;case"AddTextIntegerInputLong":case"AddTextRealInputLong":e.Position="Long",new ADiagnosisTextNumber(a,e,this.PLC+this.ID,(!0),this);break;case"AddTextIntegerIntegerLong":e.Position="Long",new ADiagnosisTextNumberNumber(a,e,this.PLC+this.ID,this.dataTypes.Integer,(!1),this);break;case"AddTextRealRealLong":e.Position="Long",new ADiagnosisTextNumberNumber(a,e,this.PLC+this.ID,this.dataTypes.Real,(!1),this);break;case"AddTextIntegerIntegerInputLong":e.Position="Long",new ADiagnosisTextNumberNumber(a,e,this.PLC+this.ID,this.dataTypes.Integer,(!0),this);break;case"AddTextRealRealInputLong":e.Position="Long",new ADiagnosisTextNumberNumber(a,e,this.PLC+this.ID,this.dataTypes.Real,(!0),this);break;case"AddLEDTextIntegerLong":case"AddTextLEDIntegerLong":case"AddLEDTextRealLong":e.Position="Long",new ADiagnosisLedTextNumber(a,e,this.PLC+this.ID,(!1),this);break;case"AddLEDTextIntegerInputLong":case"AddTextLEDIntegerInputLong":case"AddLEDTextRealInputLong":e.Position="Long",new ADiagnosisLedTextNumber(a,e,this.PLC+this.ID,(!0),this);break;case"AddLEDTextRealRealLong":e.Position="Long",new ADiagnosisLedTextNumberNumber(a,e,this.PLC+this.ID,(!1),this);break;case"AddLEDTextRealRealInputLong":e.Position="Long",new ADiagnosisLedTextNumberNumber(a,e,this.PLC+this.ID,(!0),this);break;case"AddSpace":new ADiagnosisSpace(a,e);break;case"AddSpaceLong":e.Position="Long",new ADiagnosisSpace(a,e);break;case"AddBar":new ADiagnosisBar(a,e,this.PLC+this.ID,this);break;case"AddBitBar":new ADiagnosisBitBar(a,e,this.PLC+this.ID,this);break;case"CreateControlNetArray":e.Position="Long",new ADiagnosisControlNetArray(a,e,this.PLC+this.ID,this);break;case"AddBrowserPage":e.Position="Long",new ADiagnosisBrowserPage(a,e,this.PLC+this.ID,this);break;case"AddSetpointBar":new ADiagnosisSetpointBar(a,e,this.PLC+this.ID,this);break;case"AddSetpointRampBar":e.Position="M",new ADiagnosisSetpointRampBar(a,e,this.PLC+this.ID,this);break;case"AddPageControl":new APageControl(a,e,this);break;case"AddDoubleTextLong":e.Position="Long",new ADiagnosisDoubleText(a,e,this.PLC+this.ID,this);break;case"AddTextTimerLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.Second,(!1),this);break;case"AddTextTimerInputLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.Second,(!0),this);break;case"AddTextSiemensDateLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.SiemensDate,(!1),this);break;case"AddTextSiemensDateInputLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.SiemensDate,(!0),this);break;case"AddTextSiemensTimeLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.SiemensTimeOfDay,(!1),this);break;case"AddTextSiemensTimeInputLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.SiemensTimeOfDay,(!0),this);break;case"AddTextSiemens_TIME_TimerLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.SiemensTime,(!1),this);break;case"AddTextSiemens_TIME_TimerInputLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.SiemensTime,(!0),this);break;case"AddTextSiemens_S5TIME_TimerLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.SiemensS5Time,(!1),this);break;case"AddTextSiemens_S5TIME_TimerInputLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.SiemensS5Time,(!0),this);break;case"AddTextSiemens_DATE_AND_TIME_TimerLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.SiemensDateAndTime,(!1),this);break;case"AddTextSiemens_DATE_AND_TIME_TimerInputLong":e.Position="Long",new ADiagnosisTextTimer(a,e,this.PLC+this.ID,AtimerTypes.SiemensDateAndTime,(!0),this);break;case"AddTextDoubleTimerLong":e.Position="Long",new ADiagnosisTextDoubleTimer(a,e,this.PLC+this.ID,(!0),(!1),this);break;case"AddTextDoubleTimerInputLong":e.Position="Long",new ADiagnosisTextDoubleTimer(a,e,this.PLC+this.ID,(!0),(!0),this);break;case"AddTextDoubleTimerLongMin":e.Position="Long",new ADiagnosisTextDoubleTimer(a,e,this.PLC+this.ID,(!1),(!1),this);break;case"AddTextDoubleTimerInputLongMin":e.Position="Long",new ADiagnosisTextDoubleTimer(a,e,this.PLC+this.ID,(!1),(!0),this);break;case"AddChildWindow":e.Position="Long",new ADiagnosisChildWindow(a,e,this.PLC+this.ID,this);break;default:new AGeneralElement(a,{Text:f},this)}}}.bind(this)),g(),emosWS.addEventListener("UserRight",g)}catch(a){console.log("appendPage failed: "+a)}},ADiagnosisWindow.prototype.appendElement=function(a,b){try{var c=getElementGlobalID(),d=$("<div id='"+c+"'><ul></ul></div>");d.appendTo(a);var e=d.tabs(),f=e.find("ul");sortHashArray(b).forEach(function(a){if("object"==typeof b[a]){console.info("[appendElement] "+a);var d=c+a;$("<li><a href='#"+d+"'>"+d+"</a></li>").appendTo(f);var g=$("<div id='"+d+"'></div>");g.appendTo(e),this.appendElement(g,b[a])}else $("<p>"+a+" = "+b[a]+"</p>").appendTo(e)}.bind(this)),e.tabs("refresh")}catch(a){console.log("appendElement failed: "+a)}},ADiagnosisWindow.prototype.getNewJSON=function(a){try{var b=a,c=[],d={},e={type:"DiagnosisWindow",params:d,elements:c};for(var f in b){var g=!1,h=null,i=b[f];"object"==typeof i&&(b[f]=i=this.getNewJSON(i)),["Head","PageControl"].indexOf(f)>-1?(g=!0,h=f):f.replace(/\d*-(.*)/,function(a,b){g=!0,h=b}),g?(i.type=h,c.push(i)):d[f]=i}return e}catch(a){console.log("convertToNewJSON failed: "+a)}},ADiagnosisWindow.prototype.createDiagnosisWindow=function(){try{if(this.windowData){var a=getElementGlobalID();this.appendWindow(a)}}catch(a){console.log("createDiagnosisWindow failed: "+a)}},ADiagnosisWindow.prototype.informParent=function(){var a=(new Date).getUTCMilliseconds()+"";this.rid=a,emosWS.attr.diagnosisMap[a]=this,emosWS.informParent({type:"OpenDiagnosisWindow",id:a,PLC:this.PLC,Tag:this.ID,DiagnosisLibID:this.DiagnosisLibID,DiagnosisControl:this.DiagnosisControl,GroupRightIndex:this.GroupRightIndex,data:{childWindows:this.childWindows,childWindowsData:this.childWindowsData,windowData:this.windowData,winName:this.winName}})},ADiagnosisWindow.prototype.animate=function(){},ADiagnosisWindow.prototype.getTag=function(){return this.DiagnosisLibID+"::Name::"+this.DiagnosisControl},ADiagnosisWindow.prototype.getTagByCode=function(a){var b=this.DiagnosisLibID+"::Code::";return a.replace(/([a-zA-Z]*)/,function(a,c){b+=c}),b},ADiagnosisWindow.prototype.adviseDiagnosisData=function(a,b){try{this.setDiagnosisControl0(a),this.adviseChildWindows(),emosWS.advise(this.getTag(),function(c){this.winName=this.DiagnosisControl,this.windowData=c.value,this.rootVersion=this.windowData.Version,this.setDiagnosisControl0(a),b&&setTimeout(function(){b()},100),emosWS.advise(this.PLC+this.ID+"."+this.windowData.OPCVersionID,function(c){var d=c.value;this.plcVersion=d,d.replace(/.(\d\d)../,function(c,d){var e="."+d;emosWS.advise(this.getTag()+e,function(c){"EMOSDEFAULT"!==c.value.OPCVersionID&&(this.windowData=c.value,this.winName=this.windowData.Name,this.rootVersion=this.windowData.Version,this.setDiagnosisControl0(a)),b&&b()}.bind(this),"",emosWS.tagType.Diagnosis)}.bind(this))}.bind(this),"")}.bind(this),"",emosWS.tagType.Diagnosis)}catch(a){console.log("ADiagnosisWindow adviseDiagnosisData failed: "+a)}},ADiagnosisWindow.prototype.doCondition=function(){try{var a=this.conditionFunction();this.DiagnosisLibID=a.DiagnosisLibID,this.PLC=a.PLC,this.ID=a.ID,this.DiagnosisControl=a.DiagnosisControl,this.GroupRightIndex=a.GroupRightIndex,this.Enabled=a.Enabled,this.adviseDiagnosisData(a.DiagnosisControl)}catch(a){console.log("ADiagnosisWindow doCondition failed: "+a)}},ADiagnosisWindow.prototype.setDiagnosisControl0=function(a){try{if("undefined"!=typeof a){var b=/[,;]/.test(a);b?(this.childWindows=a.split(/[,;]/),this.DiagnosisControl=this.childWindows.shift()):a.replace(/(\w*).?(\w*)?/,function(a,b,c){this.DiagnosisControl=b,c&&(c=c.match(/([a-zA-Z]+\d*)/g),c&&(this.childWindows=c))}.bind(this))}}catch(a){console.log("ADiagnosisWindow setDiagnosisControl failed: "+a)}},ADiagnosisWindow.prototype.adviseChildWindows=function(){try{this.childWindows&&this.childWindows.forEach(function(a){emosWS.advise(this.getTagByCode(a),function(b){v=b.value,this.childWindowsData[a]={OPCID:a,Name:v.Name,Comment:v.Comment,TextID:this.ID.substr(1)+a}}.bind(this),"",emosWS.tagType.Diagnosis)}.bind(this))}catch(a){console.log("ADiagnosisWindow adviseChildWindows failed: "+a)}},ADiagnosisWindow.prototype.appendChildData=function(){try{if(this.childWindows&&this.childWindows.length>0&&this.windowData&&!this.appendedChildData){var a=1e3,b=this.windowData.PageControl[a++ +"-AddPageTab"]={Text:"Options",TextID:"Options"};this.childWindows.forEach(function(c){b[a++ +"-AddChildWindow"]=this.childWindowsData[c]}.bind(this)),this.appendedChildData=!0}}catch(a){console.log("ADiagnosisWindow adviseChildWindows failed: "+a)}},ADiagnosisWindow.prototype.startAnimate=function(){try{setEvent(this.target,"click",this.onClick.bind(this),"pointer",this.svgTarget)}catch(a){console.log("startAnimate failed: "+a)}},ADiagnosisWindow.prototype.onClick=function(){try{this.doCondition(),this.Enabled&&([1,2].indexOf(emosWS.attr.DiagnosisWindowMode)>-1&&this.informParent(),[0,2].indexOf(emosWS.attr.DiagnosisWindowMode)>-1&&this.createDiagnosisWindow())}catch(a){console.log("ADiagnosisWindow onClick failed: "+a)}},ADiagnosisWindow.prototype.initialize=function(){try{this.doCondition(),this.startAnimate()}catch(a){console.log("ADiagnosisWindow initialize failed: "+a)}},ADiagnosisWindow.prototype.highlight=function(){this.shape.style.fill!==this.fillHighLight&&(this.fill=this.shape.style.fill),this.shape.style.fill=this.fillHighLight},ADiagnosisWindow.prototype.unhighlight=function(){this.shape.style.fill===this.fillHighLight&&(this.shape.style.fill=this.fill)},ADiagnosisWindow.prototype.terminate=function(){delete this},emosWS.ESDiagnosisWindow=ADiagnosisWindow;function LanguageText(a){emosWS.textNumber++,this.textID=a.textID,this.target=a.target,this.initialize(),emosWS.dispatchEvent({type:"HMItext"})}LanguageText.prototype.datachangeListener=function(a){try{setText(this.target,a.value)}catch(a){console.log("datachangeListener failed: "+a)}},LanguageText.prototype.initialize=function(){getSVGElement(this.target)||(this.target+=".Text");var a=this;emosWS.sendAdviseText(this.textID,"name",function(b){a.datachangeListener(b)})},window.LanguageText=LanguageText,emosWS.LanguageText=LanguageText;var ALink=function(a){emosWS.linkNumber++,emosWS.links.push(this);var b=a.page,c=a.shape;this.page=b,setEvent(c,"click",function(){loadHREF(b,"")},"pointer"),emosWS.dispatchEvent({type:"HMIlink"})};window.ALink=ALink,emosWS.ESLink=ALink;var ALinkFrame=function(a){var b=a.page,c=a.target,d=a.shape;setEvent(d,"click",function(){loadHREF(b,c)},"pointer")};window.ALinkFrame=ALinkFrame,emosWS.ESLinkFrame=ALinkFrame;var ALinkDialog=function(a){var b=a.page,c=a.target,d=a.shape;setEvent(d,"click",e,"pointer");function e(){privateCallback=f,c()}function f(a,c,d,e){switch(a){case"window":window.open(b,c,d,e);break;case"modeless":g(b,c,!1);break;case"modal":g(b,c,!0)}}function g(a,b,c){var d=(new Date).getUTCMilliseconds(),e=$("<div id='"+d+"'> <iframe class='emosIFrame' src='"+a+"'> </iframe></div>");$("body").append(e),$("#"+d).dialog({modal:c,title:b,width:"80%",height:600,dialogClass:"emosIFrame"})}};window.ALinkDialog=ALinkDialog,emosWS.ESLinkDialog=ALinkDialog;var ALinkJavaScript=function(a){var b=a.javascript,c=a.shape;setEvent(c,"click",b,"pointer")};window.ALinkJavaScript=ALinkJavaScript,emosWS.ESLinkJavaScript=ALinkJavaScript;var JSMouseOver=function(a){};emosWS.JSMouseOver=JSMouseOver;var JSMouseMove=function(a){var b=a.PLACEHOLDER_MOUSEOVER,c=a.PLACEHOLDER_MOUSEOUT,d=a.PLACEHOLDER_USEMOUSEOVER,e=a.PLACEHOLDER_USEMOUSEOUT,f=a.PLACEHOLDER_USEMOUSEOUT,g=a.shape;d&&setEvent(g,"mouseover",b,"default"),e&&setEvent(g,"mouseout",c,"default")};emosWS.JSMouseMove=JSMouseMove;function JSDiagnosisWindow(a){var b=a.conditionFunction();new ADiagnosisWindow({conditionFunction:function(){var c=a.PLACEHOLDER_DLLID,d=b.PLC,e=b.ID,f=b.DCONTROL,g=a.PLACEHOLDER_GROUPRF,h=!0;return{DiagnosisLibID:c,PLC:d,ID:e,DiagnosisControl:f,GroupRightIndex:g,Enabled:h}},PLACEHOLDER_USEHAND:!0,PLACEHOLDER_USESTROKE:!1,PLACEHOLDER_USEHIDE:!1,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSDiagnosisWindow=JSDiagnosisWindow;var JSMouseClick=function(a){var b=function(b,c){try{a.PLACEHOLDER_MOUSECLICK(b,c)}catch(a){console.error("[JSMouseClick mouseClickFunction] : "+a)}},c=function(b,c){try{a.PLACEHOLDER_ENABLECONDITION(b,c)}catch(a){console.error("[JSMouseClick enableConditionFunction] : "+a)}},d=a.PLACEHOLDER_USEENABLECONDITION,e=a.PLACEHOLDER_RESOLVEGROUP,f=a.shape,g=!0;if(d){var h=emosWS.shapes[f];g=h?c(h.shape,[h.shape]):c(null,[null])}if(g){var h=emosWS.shapes[f];h?h.addJob(b.bind(this,h.shape,[h.shape]),!0,!0):setEvent(f,"click",b,"pointer")}};emosWS.JSMouseClick=JSMouseClick;function JSDynamicText(a){new ADynamicText({conditionFunction:function(){var b=a.conditionFunction();return{Text:b,Enabled:!0}},PLACEHOLDER_SWAP_USEQUALITY:!0,PLACEHOLDER_STROKECOLORQUALITYGOOD:"#000000",PLACEHOLDER_STROKECOLORQUALITYBAD:"#FF8000",PREFIX:a.PLACEHOLDER_PREFIX,SUFFIX:a.PLACEHOLDER_SUFFIX,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSDynamicText=JSDynamicText;function JSColorSwap(a){new AColorSwap({conditionFunction:a.conditionFunction,PLACEHOLDER_SWAP_FILLCOLOR:a.PLACEHOLDER_SWAP_FILLCOLOR,PLACEHOLDER_SWAP_STROKECOLOR:a.PLACEHOLDER_SWAP_STROKECOLOR,PLACEHOLDER_SWAP_VISIBILITY:a.PLACEHOLDER_SWAP_VISIBILITY,PLACEHOLDER_SWAP_USETRUE:!0,PLACEHOLDER_SWAP_USEFALSE:a.PLACEHOLDER_SWAP_USEELSE,PLACEHOLDER_SWAP_USEQUALITY:!1,PLACEHOLDER_FILLCOLOR:a.PLACEHOLDER_FILLCOLOR,PLACEHOLDER_FILLCOLORFALSE:a.PLACEHOLDER_FILLCOLORELSE,PLACEHOLDER_STROKECOLORQUALITYGOOD:"",PLACEHOLDER_STROKECOLORQUALITYBAD:"",PLACEHOLDER_STROKECOLOR:a.PLACEHOLDER_STROKECOLOR,PLACEHOLDER_STROKECOLORFALSE:a.PLACEHOLDER_STROKECOLORELSE,PLACEHOLDER_VISIBILITY:a.PLACEHOLDER_VISIBILITY,PLACEHOLDER_VISIBILITYFALSE:a.PLACEHOLDER_VISIBILITYELSE,PLACEHOLDER_SWAP_HIDEIFQUALITYBAD:!1,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSColorSwap=JSColorSwap;function JSColorRange(a){new AColorState({conditionFunction:a.conditionFunction,PLACEHOLDER_USEFILLCOLOR:a.PLACEHOLDER_SWAP_FILLCOLOR,PLACEHOLDER_FILLCOLOR1:a.PLACEHOLDER_FILLCOLOR1,PLACEHOLDER_FILLCOLOR2:a.PLACEHOLDER_FILLCOLOR2,PLACEHOLDER_FILLCOLOR3:a.PLACEHOLDER_FILLCOLOR3,PLACEHOLDER_FILLCOLOR4:a.PLACEHOLDER_FILLCOLOR4,PLACEHOLDER_FILLCOLOR5:a.PLACEHOLDER_FILLCOLOR5,PLACEHOLDER_FILLCOLOR6:a.PLACEHOLDER_FILLCOLOR5,PLACEHOLDER_FILLCOLOR7:a.PLACEHOLDER_FILLCOLOR5,PLACEHOLDER_FILLCOLOR8:a.PLACEHOLDER_FILLCOLOR5,PLACEHOLDER_USESTROKECOLOR:a.PLACEHOLDER_SWAP_STROKECOLOR,PLACEHOLDER_STROKECOLOR1:a.PLACEHOLDER_STROKECOLOR1,PLACEHOLDER_STROKECOLOR2:a.PLACEHOLDER_STROKECOLOR2,PLACEHOLDER_STROKECOLOR3:a.PLACEHOLDER_STROKECOLOR3,PLACEHOLDER_STROKECOLOR4:a.PLACEHOLDER_STROKECOLOR4,PLACEHOLDER_STROKECOLOR5:a.PLACEHOLDER_STROKECOLOR5,PLACEHOLDER_STROKECOLOR6:a.PLACEHOLDER_STROKECOLOR5,PLACEHOLDER_STROKECOLOR7:a.PLACEHOLDER_STROKECOLOR5,PLACEHOLDER_STROKECOLOR8:a.PLACEHOLDER_STROKECOLOR5,PLACEHOLDER_USEVISIBILITY:a.PLACEHOLDER_SWAP_VISIBILITY,PLACEHOLDER_VISIBILITY1:getVisibility(a.PLACEHOLDER_VISIBILITY1),PLACEHOLDER_VISIBILITY2:getVisibility(a.PLACEHOLDER_VISIBILITY2),PLACEHOLDER_VISIBILITY3:getVisibility(a.PLACEHOLDER_VISIBILITY3),PLACEHOLDER_VISIBILITY4:getVisibility(a.PLACEHOLDER_VISIBILITY4),PLACEHOLDER_VISIBILITY5:getVisibility(a.PLACEHOLDER_VISIBILITY5),PLACEHOLDER_VISIBILITY6:getVisibility(a.PLACEHOLDER_VISIBILITY5),PLACEHOLDER_VISIBILITY7:getVisibility(a.PLACEHOLDER_VISIBILITY5),PLACEHOLDER_VISIBILITY8:getVisibility(a.PLACEHOLDER_VISIBILITY5),PLACEHOLDER_LIMIT12:a.PLACEHOLDER_LIMIT12,PLACEHOLDER_LIMIT23:a.PLACEHOLDER_LIMIT23,PLACEHOLDER_LIMIT34:a.PLACEHOLDER_LIMIT34,PLACEHOLDER_LIMIT45:a.PLACEHOLDER_LIMIT45,PLACEHOLDER_LIMIT56:a.PLACEHOLDER_LIMIT45,PLACEHOLDER_LIMIT67:a.PLACEHOLDER_LIMIT45,PLACEHOLDER_LIMIT78:a.PLACEHOLDER_LIMIT45,PLACEHOLDER_USEQUALITY:!1,PLACEHOLDER_STROKECOLORQUALITYGOOD:"#000000",PLACEHOLDER_STROKECOLORQUALITYBAD:"#FF8000",STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSColorRange=JSColorRange;function JSIOPosition(a){var b=a.conditionFunction();new emosWS.ESPosition({conditionFunction:function(){var a=GetTagValueAsDouble(b.TAGNAME),c=b.VALUEMIN,d=b.VALUEMAX,e=c,f=d,g=b.POSITIONMIN,h=b.POSITIONMAX,i=!0;return{Value:a,ValueMin:c,ValueMax:d,ValueLimitMin:e,ValueLimitMax:f,PositionMin:g,PositionMax:h,Enabled:i}},postFunction:function(){},PLACEHOLDER_ORIENTATION:b.HORIZONTAL?"Left":"Top",PLACEHOLDER_ORIENTATIONR:b.HORIZONTAL?"Right":"Bottom",PLACEHOLDER_ORIENTATIONFLAG:"X",PLACEHOLDER_EXPANSION:b.HORIZONTAL?"Width":"Height",PLACEHOLDER_SWAP_USEQUALITY:!1,PLACEHOLDER_STROKECOLORQUALITYGOOD:"#000000",PLACEHOLDER_STROKECOLORQUALITYBAD:"#FF8000",PLACEHOLDER_HIDEIFVALUEEXCESSIVE:!1,PLACEHOLDER_COMMENT_X:"",PLACEHOLDER_COMMENT_Y:"//",STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSIOPosition=JSIOPosition;var JSIOSize=function(a){var b=a.conditionFunction(),c=a.PLACEHOLDER_USEWIDTH?"Width":"Height",d=a.PLACEHOLDER_USEWIDTH?a.PLACEHOLDER_DIRLEFTUP?"Left":"Right":a.PLACEHOLDER_DIRLEFTUP?"Top":"Bottom";new ASize({conditionFunction:function(){var a=GetTagValueAsDouble(b.TAGNAME),c=b.VALUEMIN,d=b.VALUEMAX,e=c,f=d,g=b.SIZEFACTORMIN,h=b.SIZEFACTORMAX,i=!0;return{Value:a,ValueMin:c,ValueMax:d,ValueLimitMin:e,ValueLimitMax:f,SizeFactorMin:g,SizeFactorMax:h,Enabled:i}},postFunction:function(){},PLACEHOLDER_ORIENTATION:d,PLACEHOLDER_ORIENTATIONFLAG:"X",PLACEHOLDER_DIMENSION:c,PLACEHOLDER_DIRECTIONREVERSE:0,PLACEHOLDER_SWAP_USEQUALITY:!1,PLACEHOLDER_STROKECOLORQUALITYGOOD:"#000000",PLACEHOLDER_STROKECOLORQUALITYBAD:"#ff8000",STDPLACEHOLDER_SHAPENAME:a.shape})};emosWS.JSIOSize=JSIOSize;function JSAPTValveState(a){new AColorSwap({conditionFunction:function(){var b=a.conditionFunction();return b.VALVESTATE},PLACEHOLDER_SWAP_FILLCOLOR:!0,PLACEHOLDER_SWAP_STROKECOLOR:!1,PLACEHOLDER_SWAP_VISIBILITY:!1,PLACEHOLDER_SWAP_USETRUE:!0,PLACEHOLDER_SWAP_USEFALSE:!0,PLACEHOLDER_SWAP_USEQUALITY:!1,PLACEHOLDER_FILLCOLOR:a.PLACEHOLDER_VALVECOLOR,PLACEHOLDER_FILLCOLORFALSE:a.PLACEHOLDER_VALVECOLORELSE,PLACEHOLDER_STROKECOLORQUALITYGOOD:"",PLACEHOLDER_STROKECOLORQUALITYBAD:"",PLACEHOLDER_STROKECOLOR:"",PLACEHOLDER_STROKECOLORFALSE:"",PLACEHOLDER_VISIBILITY:"",PLACEHOLDER_VISIBILITYFALSE:"",PLACEHOLDER_SWAP_HIDEIFQUALITYBAD:!1,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSAPTValveState=JSAPTValveState;function JSAPTState(a){new AColorState({conditionFunction:a.conditionFunction,PLACEHOLDER_USEFILLCOLOR:!0,PLACEHOLDER_FILLCOLOR1:a.PLACEHOLDER_FILLCOLOR1,PLACEHOLDER_FILLCOLOR2:a.PLACEHOLDER_FILLCOLOR2,PLACEHOLDER_FILLCOLOR3:a.PLACEHOLDER_FILLCOLOR3,PLACEHOLDER_FILLCOLOR4:a.PLACEHOLDER_FILLCOLOR4,PLACEHOLDER_FILLCOLOR5:a.PLACEHOLDER_FILLCOLOR5,PLACEHOLDER_FILLCOLOR6:a.PLACEHOLDER_FILLCOLOR6,PLACEHOLDER_FILLCOLOR7:a.PLACEHOLDER_FILLCOLOR7,PLACEHOLDER_FILLCOLOR8:a.PLACEHOLDER_FILLCOLOR8,PLACEHOLDER_USESTROKECOLOR:!1,PLACEHOLDER_STROKECOLOR1:"",PLACEHOLDER_STROKECOLOR2:"",PLACEHOLDER_STROKECOLOR3:"",PLACEHOLDER_STROKECOLOR4:"",PLACEHOLDER_STROKECOLOR5:"",PLACEHOLDER_STROKECOLOR6:"",PLACEHOLDER_STROKECOLOR7:"",PLACEHOLDER_STROKECOLOR8:"",PLACEHOLDER_USEVISIBILITY:!0,PLACEHOLDER_VISIBILITY1:!0,PLACEHOLDER_VISIBILITY2:!0,PLACEHOLDER_VISIBILITY3:!0,PLACEHOLDER_VISIBILITY4:!0,PLACEHOLDER_VISIBILITY5:!0,PLACEHOLDER_VISIBILITY6:!0,PLACEHOLDER_VISIBILITY7:!0,PLACEHOLDER_VISIBILITY8:!0,PLACEHOLDER_LIMIT12:a.PLACEHOLDER_LIMIT12,PLACEHOLDER_LIMIT23:a.PLACEHOLDER_LIMIT23,PLACEHOLDER_LIMIT34:a.PLACEHOLDER_LIMIT34,PLACEHOLDER_LIMIT45:a.PLACEHOLDER_LIMIT45,PLACEHOLDER_LIMIT56:a.PLACEHOLDER_LIMIT56,PLACEHOLDER_LIMIT67:a.PLACEHOLDER_LIMIT67,PLACEHOLDER_LIMIT78:a.PLACEHOLDER_LIMIT78,PLACEHOLDER_USEQUALITY:!1,PLACEHOLDER_STROKECOLORQUALITYGOOD:"#000000",PLACEHOLDER_STROKECOLORQUALITYBAD:"#FF8000",STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSAPTState=JSAPTState;function JSIOBit(a){var b=a.conditionFunction();function c(){var c=GetTagValueAsBoolean(b);return""===a.PLACEHOLDER_TAGINVERTING?c:!c}a.PLACEHOLDER_BLINKACTIVE?new AColorBlink({conditionFunction:c,PLACEHOLDER_SWAP_FILLCOLOR:a.PLACEHOLDER_SWAP_FILLCOLOR,PLACEHOLDER_SWAP_STROKECOLOR:!1,PLACEHOLDER_SWAP_VISIBILITY:a.PLACEHOLDER_SWAP_VISIBILITY,PLACEHOLDER_SWAP_USEFALSE:!0,PLACEHOLDER_SWAP_USEQUALITY:a.PLACEHOLDER_USEQUALITYPROPERTY,PLACEHOLDER_FILLCOLORON:a.PLACEHOLDER_FILLCOLORON,PLACEHOLDER_FILLCOLOROFF:a.PLACEHOLDER_FILLCOLOROFF,PLACEHOLDER_FILLCOLORFALSE:a.PLACEHOLDER_FILLCOLORNOBLINK,PLACEHOLDER_STROKECOLORQUALITYGOOD:a.PLACEHOLDER_QUALITYCOLORGOOD,PLACEHOLDER_STROKECOLORQUALITYBAD:a.PLACEHOLDER_QUALITYCOLORBAD,PLACEHOLDER_STROKECOLORON:"",PLACEHOLDER_STROKECOLOROFF:"",PLACEHOLDER_STROKECOLORFALSE:"",PLACEHOLDER_VISIBILITYON:getVisibility(a.PLACEHOLDER_VISIBILITYON),PLACEHOLDER_VISIBILITYOFF:getVisibility(a.PLACEHOLDER_VISIBILITYOFF),PLACEHOLDER_VISIBILITYFALSE:getVisibility(a.PLACEHOLDER_VISIBILITYNOBLINK),STDPLACEHOLDER_SHAPENAME:a.shape}):new AColorSwap({conditionFunction:c,PLACEHOLDER_SWAP_FILLCOLOR:a.PLACEHOLDER_SWAP_FILLCOLOR,PLACEHOLDER_SWAP_STROKECOLOR:!1,PLACEHOLDER_SWAP_VISIBILITY:a.PLACEHOLDER_SWAP_VISIBILITY,PLACEHOLDER_SWAP_USETRUE:!0,PLACEHOLDER_SWAP_USEFALSE:!0,PLACEHOLDER_SWAP_USEQUALITY:a.PLACEHOLDER_USEQUALITYPROPERTY,PLACEHOLDER_FILLCOLOR:a.PLACEHOLDER_FILLCOLORON,PLACEHOLDER_FILLCOLORFALSE:a.PLACEHOLDER_FILLCOLOROFF,PLACEHOLDER_STROKECOLORQUALITYGOOD:a.PLACEHOLDER_QUALITYCOLORGOOD,PLACEHOLDER_STROKECOLORQUALITYBAD:a.PLACEHOLDER_QUALITYCOLORBAD,PLACEHOLDER_STROKECOLOR:"",PLACEHOLDER_STROKECOLORFALSE:"",PLACEHOLDER_VISIBILITY:getVisibility(a.PLACEHOLDER_VISIBILITYON),PLACEHOLDER_VISIBILITYFALSE:getVisibility(a.PLACEHOLDER_VISIBILITYOFF),PLACEHOLDER_SWAP_HIDEIFQUALITYBAD:!1,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSIOBit=JSIOBit;function JSBlink(a){new AColorBlink({conditionFunction:a.conditionFunction,PLACEHOLDER_SWAP_FILLCOLOR:a.PLACEHOLDER_SWAP_FILLCOLOR,PLACEHOLDER_SWAP_STROKECOLOR:a.PLACEHOLDER_SWAP_STROKECOLOR,PLACEHOLDER_SWAP_VISIBILITY:a.PLACEHOLDER_SWAP_VISIBILITY,PLACEHOLDER_SWAP_USEFALSE:!0,PLACEHOLDER_SWAP_USEQUALITY:!1,PLACEHOLDER_FILLCOLORON:a.PLACEHOLDER_FILLCOLORON,PLACEHOLDER_FILLCOLOROFF:a.PLACEHOLDER_FILLCOLOROFF,PLACEHOLDER_FILLCOLORFALSE:a.PLACEHOLDER_FILLCOLORNOBLINK,PLACEHOLDER_STROKECOLORQUALITYGOOD:"",PLACEHOLDER_STROKECOLORQUALITYBAD:"",PLACEHOLDER_STROKECOLORON:a.PLACEHOLDER_STROKECOLORON,PLACEHOLDER_STROKECOLOROFF:a.PLACEHOLDER_STROKECOLOROFF,PLACEHOLDER_STROKECOLORFALSE:a.PLACEHOLDER_STROKECOLORNOBLINK,PLACEHOLDER_VISIBILITYON:a.PLACEHOLDER_VISIBILITYON,PLACEHOLDER_VISIBILITYOFF:a.PLACEHOLDER_VISIBILITYOFF,PLACEHOLDER_VISIBILITYFALSE:a.PLACEHOLDER_VISIBILITYNOBLINK,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSBlink=JSBlink;function JSIOAlarm(a){new AAlarm({conditionFunction:function(){var b=a.conditionFunction(),c=!0,d=!1;return{AlarmGroup:b,Enabled:c,EnabledAck:d}},PLACEHOLDER_NEW_ENABLED:!0,PLACEHOLDER_NEW_FILLCOLOR:a.PLACEHOLDER_ALARMCOLOR0,PLACEHOLDER_NEW_BLINKING:a.PLACEHOLDER_ALARMBLINK0,PLACEHOLDER_NEW_VISIBLE:!0,PLACEHOLDER_ACK_ENABLED:!0,PLACEHOLDER_ACK_FILLCOLOR:a.PLACEHOLDER_ALARMCOLOR1,PLACEHOLDER_ACK_BLINKING:a.PLACEHOLDER_ALARMBLINK1,PLACEHOLDER_ACK_VISIBLE:!0,PLACEHOLDER_NO_ENABLED:!0,PLACEHOLDER_NO_FILLCOLOR:a.PLACEHOLDER_ALARMCOLOR2,PLACEHOLDER_NO_BLINKING:a.PLACEHOLDER_ALARMBLINK2,PLACEHOLDER_NO_VISIBLE:!0,PLACEHOLDER_FILLCOLORNOBLINK:a.PLACEHOLDER_ALARMCOLORBACKGROUND,PLACEHOLDER_SWAP_USEQUALITY:a.PLACEHOLDER_USEQUALITYPROPERTY,PLACEHOLDER_STROKECOLORQUALITYGOOD:a.PLACEHOLDER_QUALITYCOLORGOOD,PLACEHOLDER_STROKECOLORQUALITYBAD:a.PLACEHOLDER_QUALITYCOLORBAD,PLACEHOLDER_USEHAND:!1,PLACEHOLDER_USESTROKE:!1,PLACEHOLDER_USEHIDE:!1,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSIOAlarm=JSIOAlarm;function JSIOMultiAlarm(a){for(var b=a.conditionFunction(),c="",d=0,e=b.length;d<e;d++)c+=b[d]+"; ";new emosWS.ESAlarms({conditionFunction:function(){return{Enabled:!0,EnabledAck:!1}},PLACEHOLDER_ALARMGROUPS:c,PLACEHOLDER_NEW_ENABLED:!0,PLACEHOLDER_NEW_FILLCOLOR:a.PLACEHOLDER_ALARMCOLOR0,PLACEHOLDER_NEW_BLINKING:a.PLACEHOLDER_ALARMBLINK0,PLACEHOLDER_NEW_VISIBLE:!0,PLACEHOLDER_ACK_ENABLED:!0,PLACEHOLDER_ACK_FILLCOLOR:a.PLACEHOLDER_ALARMCOLOR1,PLACEHOLDER_ACK_BLINKING:a.PLACEHOLDER_ALARMBLINK1,PLACEHOLDER_ACK_VISIBLE:!0,PLACEHOLDER_NO_ENABLED:!0,PLACEHOLDER_NO_FILLCOLOR:a.PLACEHOLDER_ALARMCOLOR2,
PLACEHOLDER_NO_BLINKING:a.PLACEHOLDER_ALARMBLINK2,PLACEHOLDER_NO_VISIBLE:!0,PLACEHOLDER_FILLCOLORNOBLINK:a.PLACEHOLDER_ALARMCOLORBACKGROUND,PLACEHOLDER_SWAP_USEQUALITY:a.PLACEHOLDER_USEQUALITYPROPERTY,PLACEHOLDER_STROKECOLORQUALITYGOOD:a.PLACEHOLDER_QUALITYCOLORGOOD,PLACEHOLDER_STROKECOLORQUALITYBAD:a.PLACEHOLDER_QUALITYCOLORBAD,PLACEHOLDER_USEHAND:!1,PLACEHOLDER_USESTROKE:!1,PLACEHOLDER_USEHIDE:!1,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSIOMultiAlarm=JSIOMultiAlarm;var JSIOMultiAlarmPriority=function(a){};emosWS.JSIOMultiAlarmPriority=JSIOMultiAlarmPriority;function JSIOAlarmShow(a){var b=getSVGElement(a.shape);if(this.svgElement)var c=this.svgElement.getAttribute("fill");new AAlarm({conditionFunction:function(){var b=a.conditionFunction(),c=!0,d=!1;return{AlarmGroup:b,Enabled:c,EnabledAck:d}},PLACEHOLDER_NEW_ENABLED:!0,PLACEHOLDER_NEW_FILLCOLOR:c,PLACEHOLDER_NEW_BLINKING:!1,PLACEHOLDER_NEW_VISIBLE:getVisibility(a.PLACEHOLDER_VISIBILITY0),PLACEHOLDER_ACK_ENABLED:!0,PLACEHOLDER_ACK_FILLCOLOR:c,PLACEHOLDER_ACK_BLINKING:!1,PLACEHOLDER_ACK_VISIBLE:getVisibility(a.PLACEHOLDER_VISIBILITY1),PLACEHOLDER_NO_ENABLED:!0,PLACEHOLDER_NO_FILLCOLOR:c,PLACEHOLDER_NO_BLINKING:!1,PLACEHOLDER_NO_VISIBLE:getVisibility(a.PLACEHOLDER_VISIBILITY2),PLACEHOLDER_FILLCOLORNOBLINK:c,PLACEHOLDER_SWAP_USEQUALITY:a.PLACEHOLDER_USEQUALITYPROPERTY,PLACEHOLDER_STROKECOLORQUALITYGOOD:a.PLACEHOLDER_QUALITYCOLORGOOD,PLACEHOLDER_STROKECOLORQUALITYBAD:a.PLACEHOLDER_QUALITYCOLORBAD,PLACEHOLDER_USEHAND:!1,PLACEHOLDER_USESTROKE:!1,PLACEHOLDER_USEHIDE:!1,useVisible:!0,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSIOAlarmShow=JSIOAlarmShow;function JSIORead(a){var b=a.conditionFunction();new ADynamicText({conditionFunction:function(){var a=GetTagValueAsString(b.TAGNAME);return{Text:a,Enabled:!0}},PLACEHOLDER_SWAP_USEQUALITY:a.PLACEHOLDER_USEQUALITYPROPERTY,PLACEHOLDER_STROKECOLORQUALITYGOOD:a.PLACEHOLDER_QUALITYCOLORGOOD,PLACEHOLDER_STROKECOLORQUALITYBAD:a.PLACEHOLDER_QUALITYCOLORBAD,PREFIX:b.PREFIX,SUFFIX:b.SUFFIX,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSIORead=JSIORead;function JSIOClickWrite(a){var b=a.conditionFunction();new AClickWrite({conditionFunction:function(){var a=b.TAGNAME,c=b.VALUE;return{Tag:a,Value:c,Enabled:!0}},PLACEHOLDER_FUNCTION:"",PLACEHOLDER_USESTROKE:!1,PLACEHOLDER_USESHAND:!0,PLACEHOLDER_USESHIDE:!1,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSIOClickWrite=JSIOClickWrite;function JSIOClickWriteBit(a){var b=a.conditionFunction();new AClickWriteBit({conditionFunction:function(){var c=b,d=a.PLACEHOLDER_BITNUMBER,e=!0;return{Tag:c,BitNr:d,Enabled:e}},PLACEHOLDER_FORCE:"",PLACEHOLDER_BITMODE:a.PLACEHOLDER_BITOPERATION,PLACEHOLDER_USESTROKE:!1,PLACEHOLDER_USESHAND:!0,PLACEHOLDER_USESHIDE:!1,STDPLACEHOLDER_SHAPENAME:a.shape})}emosWS.JSIOClickWriteBit=JSIOClickWriteBit;function JSIOAPTClick(a){var b=a.actionFunction,c=a.shape;a.conditionFunction()&&setEvent(c,"click",b,"pointer")}emosWS.JSIOAPTClick=JSIOAPTClick;var JSDummy=function(a){};emosWS.JSDummy=JSDummy;function GLC(a){emosWS.glcNumber++,this.linecode=a,this.lastEvent=null,this.init=!0,this.datachangeListener=this.datachangeListener.bind(this),this.initialize=this.initialize.bind(this),this.datachangeListener=this.datachangeListener.bind(this),this.initialize(),emosWS.dispatchEvent({type:"HMIglc"})}GLC.prototype.datachangeListener=function(a){try{"function"==typeof this.linecode&&(emosWS.listenGlobalVariablesChange(),this.linecode(),emosWS.callbackGlobalVariablesChange())}catch(a){console.log(this.constructor.name+": datachangeListener failed: "+a)}},GLC.prototype.initialize=function(a,b,c){try{if(c&&this.lastEvent===c)return;emosWS.animationData.stillInit=this.init,emosWS.animationData.callback=this,this.linecode(),emosWS.animationData.stillInit=this.init=!1,this.lastEvent=c}catch(a){console.log(this.constructor.name+": initialize failed: "+a)}},emosWS.GLC=GLC;function HFaultWarning(a){this.id=a.id;var b=a.alarmGroup;this.alarmGroups=Array.isArray(b)?b:[b],this.newFaultClass=a.newFaultClass||"alert";var c=a.newFaultEnabled;this.newFaultEnabled="undefined"==typeof c||c;var d=a.newFaultBlinking;this.newFaultBlinking="undefined"==typeof d||d,this.newFaultProperty={Enabled:this.newFaultEnabled,Blinking:this.newFaultBlinking,Class:this.newFaultClass},this.ackFaultClass=a.ackFaultClass||"alert";var e=a.ackFaultEnabled;this.ackFaultEnabled="undefined"==typeof e||e;var f=a.ackFaultBlinking;this.ackFaultBlinking="undefined"!=typeof f&&f,this.ackFaultProperty={Enabled:this.ackFaultEnabled,Blinking:this.ackFaultBlinking,Class:this.ackFaultClass},this.newEMSClass=a.newEMSClass||"warn";var g=a.newEMSEnabled;this.newEMSEnabled="undefined"!=typeof g&&g;var h=a.newEMSBlinking;this.newEMSBlinking="undefined"!=typeof h&&h,this.newEMSProperty={Enabled:this.newEMSEnabled,Blinking:this.newEMSBlinking,Class:this.newEMSClass},this.ackEMSClass=a.ackEMSClass||"warn";var i=a.ackEMSEnabled;this.ackEMSEnabled="undefined"!=typeof i&&i;var j=a.ackEMSBlinking;this.ackEMSBlinking="undefined"!=typeof j&&j,this.ackEMSProperty={Enabled:this.ackEMSEnabled,Blinking:this.ackEMSBlinking,Class:this.ackEMSClass},this.newWRNClass=a.newWRNClass||"warn";var k=a.newWRNEnabled;this.newWRNEnabled="undefined"==typeof k||k;var l=a.newWRNBlinking;this.newWRNBlinking="undefined"==typeof l||l,this.newWRNProperty={Enabled:this.newWRNEnabled,Blinking:this.newWRNBlinking,Class:this.newWRNClass},this.ackWRNClass=a.ackWRNClass||"warn";var m=a.ackWRNEnabled;this.ackWRNEnabled="undefined"==typeof m||m;var n=a.ackWRNBlinking;this.ackWRNBlinking="undefined"!=typeof n&&n,this.ackWRNProperty={Enabled:this.ackWRNEnabled,Blinking:this.ackWRNBlinking,Class:this.ackWRNClass},this.NOClass=a.NOClass||"fine";var o=a.NOEnabled;this.NOEnabled="undefined"==typeof o||o;var p=a.NOBlinking;this.NOBlinking="undefined"!=typeof p&&p,this.NOProperty={Enabled:this.NOEnabled,Blinking:this.NOBlinking,Class:this.NOClass},this.stateMap={0:this.newFaultProperty,1:this.ackFaultProperty,2:this.newEMSProperty,3:this.ackEMSProperty,4:this.newWRNProperty,5:this.ackWRNProperty,6:this.NOProperty,7:this.NOProperty},this.currentProperty=this.stateMap[0],this.$htmlElement=$("#"+this.id),this.lastClass="",this.alarmStateList={},this.alarmState=null,this.alarmValue=null,this.interval=0,this.trigger=function(){this.animate()}.bind(this),this.datachangeListener=this.datachangeListener.bind(this),this.initialize()}HFaultWarning.prototype.initialize=function(){this.adviseData()},HFaultWarning.prototype.updateAlarmStateList=function(a){try{if("undefined"!=typeof a&&"undefined"!=typeof a.classStateRec){var b={value:parseInt(a.value),state:a.classStateRec.state};this.alarmStateList[a.tag]=b;var c=100,d=100;for(var e in this.alarmStateList){var f=this.alarmStateList[e];f.value<d&&(d=f.value),f.state<c&&(c=f.state)}this.alarmState=c,this.alarmValue=d}}catch(a){console.log("updateAlarmStateList failed: "+a)}},HFaultWarning.prototype.datachangeListener=function(a){"undefined"!=typeof a&&"undefined"!=typeof a.classStateRec&&(this.updateAlarmStateList(a),this.startAnimate(a))},HFaultWarning.prototype.changeClass=function(a){this.$htmlElement.removeClass(this.lastClass).addClass(a),this.lastClass=a},HFaultWarning.prototype.startAnimate=function(a){try{this.currentProperty=this.stateMap[this.alarmState]||this.currentProperty,this.currentProperty.Blinking?0===this.interval&&(this.interval=1,emosWS.blinkInterval.addListener(this.trigger,!1)):this.animate()}catch(a){console.log("HFaultWarning startAnimate failed: "+a)}},HFaultWarning.prototype.animate=function(){try{this.currentProperty.Blinking?emosWS.blinkInterval.active?this.changeClass(this.currentProperty.Class):this.changeClass(""):this.changeClass(this.currentProperty.Class)}catch(a){console.log("HFaultWarning animate failed: "+a)}},HFaultWarning.prototype.adviseData=function(){this.alarmGroups.forEach(function(a){emosWS.advise(a,this.datachangeListener,"",emosWS.tagType.Alarm)}.bind(this))},HFaultWarning.prototype.terminate=function(){emosWS.unadvise(this.alarmGroup+".Alarm",this.datachangeListener),emosWS.blinkInterval.removeListener(this.trigger),this.changeClass("")},emosWS.HTMLFaultWarning=HFaultWarning;function HSwap(a){this.id=a.id;var b=a.plctag;this.plctags=Array.isArray(b)?b:[b],this.values={};var c=a.trueBlinking,d=a.falseBlinking;this.trueProperty={Blinking:"undefined"!=typeof c&&c,Class:a.trueClass||"fine"},this.falseProperty={Blinking:"undefined"==typeof d||d,Class:a.falseClass||"warn"},this.$htmlElement=$("#"+this.id),this.currentProperty=this.falseProperty,this.interval=0,this.lastClass="",this.trigger=function(){this.animate()}.bind(this),this.datachangeListener=this.datachangeListener.bind(this),this.initialize()}HSwap.prototype.initialize=function(){this.adviseData()},HSwap.prototype.datachangeListener=function(a,b){if("undefined"!=typeof a){this.values[b]=emosWS.fn.GetAsBoolean(a.value),this.currentProperty=this.trueProperty;for(var c=Object.keys(this.values),d=0,e=c.length;d<e;d++)if(!this.values[c[d]]){this.currentProperty=this.falseProperty;break}this.startAnimate(a)}},HSwap.prototype.changeClass=function(a){this.$htmlElement.removeClass(this.lastClass).addClass(a),this.lastClass=a},HSwap.prototype.startAnimate=function(){try{this.currentProperty.Blinking?0===this.interval&&(this.interval=1,emosWS.blinkInterval.addListener(this.trigger,!1)):this.animate()}catch(a){console.log("HFaultWarning startAnimate failed: "+a)}},HSwap.prototype.animate=function(){try{this.currentProperty.Blinking?emosWS.blinkInterval.active?this.changeClass(this.currentProperty.Class):this.changeClass(""):this.changeClass(this.currentProperty.Class)}catch(a){console.log("HFaultWarning animate failed: "+a)}},HSwap.prototype.adviseData=function(){this.plctags.forEach(function(a){this.values[a]=null,emosWS.advise(a,this.datachangeListener,a,emosWS.tagType.IO)}.bind(this))},HSwap.prototype.terminate=function(){this.plctags.forEach(function(a){emosWS.unadvise(a+".IO",this.datachangeListener)}),emosWS.blinkInterval.removeListener(this.trigger),this.changeClass("")},emosWS.HTMLSwap=HSwap;function HSwaps(a){a.plctag=a.plctags,HSwap.call(this,a)}HSwaps.prototype=Object.create(HSwap.prototype),HSwaps.prototype.constructor=HSwaps,emosWS.HTMLSwaps=HSwaps;var DiagnosisCommon=function(){function a(a){return a.substr(a.indexOf("-")+1)}return{getObjectType:a}}();window.DiagnosisCommon=DiagnosisCommon;var timerTypes={Second:0,Minute:1,SiemensDate:3,SiemensTimeOfDay:4,SiemensTime:5,SiemensS5Time:6,SiemensDateAndTime:7};function AlarmClient(a,b,c,d,e){this.parent=a,this.data=b,this.alarmGroup=c,this.big=e,this.tab=d,this.table=null,this.alarmRefId=null,this.intervalId=null,$(this.parent)[0].intervalID=[],this.init()}AlarmClient.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID();this.alarmId=getElementGlobalID();var k,l=this.alarmGroup;k=this.big?"<tr><th class='tdDate' style='width: 8%;' id='"+c+"'> Date</th><th class='tdTime' style='width: 6%;' id='"+f+"'> Time</th><th class='tdAlarmgroup' style='width: 25%;' id='"+g+"'> Alarmgroup</th><th class='tdClassID' style='width: 4%;' id='"+h+"'> ClassID</th><th class='tdPriority' style='width: 4%;' id='"+i+"'> Priority</th><th class='tdText' style='width: 18%;' id='"+b+"'> Text</th><th class='tdTagname' style='width: 25%;' id='"+j+"'> Tagname</th><th class='tdDuration' style='width: 5%;' id='"+d+"'> Duration</th>":"<col width='75%'><col width='25%'><tr><th id='"+b+"'> Text</th><th id='"+d+"'> Duration</th>";var m=$("<div class='DiagnosisAlarmClient' id='"+a+"'><table style='width: 100%' class='DiagnosisAlarmTable Groupbox' id='"+e+"'>"+k+"</tr></table></div>"),n="";$("<span/>",{class:"emosbutton quit "+n,click:function(){$(this).hasClass("noAction")||emosWS.poke(l+".Alarm",1)}}).appendTo(m),m.appendTo(this.parent),this.table=document.getElementById(e),this.table.id=e;var o=document.getElementById(b),p=document.getElementById(d);this.getHeaderText("T04_Text",o),this.getHeaderText("T04_Duration",p),this.alarmRefId=emosWS.sendAdviseAlarmText(this.alarmGroup,emosWS.getLanguage(),this.datachangeListener.bind(this),""),emosWS.addEventListener("language",this.onLanguage.bind(this))}catch(a){console.log("AlarmClient init failed: "+a)}},AlarmClient.prototype.onLanguage=function(){this.clearTable()},AlarmClient.prototype.terminate=function(){clearInterval(this.intervalId),emosWS.unadviseById(this.alarmRefId),delete this},AlarmClient.prototype.clearTable=function(){for(var a=1;a<this.table.rows.length;a++)this.table.deleteRow(a)},AlarmClient.prototype.getHeaderText=function(a,b){emosWS.sendAdviseText(a,"name",function(a,b){""!==a.value&&(b.textContent=a.value)},b)},AlarmClient.prototype.getStyleClass=function(a){return"1"===a.classID?"alarmTable alarm":"alarmTable warning"},AlarmClient.prototype.getTabStyleClass=function(a){return"1"===a.classID?"DiagnosisPageTextAlarm":"DiagnosisPageTextWarning"},AlarmClient.prototype.updateInterval=function(){0===this.table.rows.length?this.intervalId&&clearInterval(this.intervalId):this.intervalId||(this.intervalId=setInterval(this.updateDurationColumn.bind(this),1e3))},AlarmClient.prototype.updateDurationColumn=function(){for(var a=1,b=this.table.rows.length;a<b;a++){var c=this.table.rows[a],d=c.msg,e=c.durationCell;e&&(e.textContent=this.convertToDate(d.beginTime))}},AlarmClient.prototype.datachangeListener=function(a){try{"alarmText"===a.type&&"internal"!==a.tagname?("3RTN"===a.alarmType?this.updateTable(a):this.addTableRow(a),this.updateInterval()):"dataChange"===a.type,$(".DiagnosisPageBlank.dPage.Messages")[0].actMessages&&($(".DiagnosisPageControl.diatabs").tabs({active:1}),$(".DiagnosisPageBlank.Messages .DiagnosisAlarmClient .quit").css("display","inline-block"))}catch(a){console.log("AlarmClient datachangeListener failed: "+a)}},AlarmClient.prototype.updateTable=function(a){for(var b=1;b<this.table.rows.length;b++){var c=this.table.rows[b];c.msg.alarmGroup===a.alarmGroup&&"1NEW"===c.msg.alarmType&&this.table.deleteRow(b)}};var i=1;AlarmClient.prototype.addTableRow=function(a){var b=this.getLocalTime(a.date,a.time);a.date=b[0],a.time=b[1],a.dateTime=a.date+" "+a.time,a.beginTime=this.convertToTimestamp(a.date,a.time);var c=this.table.insertRow(1);if(c.className=this.getStyleClass(a),this.big){var d=c.insertCell(0),e=c.insertCell(1),f=c.insertCell(2),g=c.insertCell(3),h=c.insertCell(4),i=c.insertCell(5),j=c.insertCell(6),k=c.insertCell(7);d.textContent=a.date,e.textContent=a.time,f.textContent=a.alarmGroup,g.textContent=a.classID,h.textContent=a.priority,i.textContent=a.alarmText,j.textContent=a.tagname,d.className="tdDate",e.className="tdTime",f.className="tdAlarmgroup",g.className="tdClassID",h.className="tdPriority",i.className="tdText",j.className="tdTagname",k.className="tdDuration",c.durationCell=k}else{this.parent[0].actMessages=!0;var d=c.insertCell(0),e=c.insertCell(1);d.textContent=a.alarmText,c.durationCell=e}c.msg=a,c.durationCell.textContent=this.convertToDate(a.beginTime)},AlarmClient.prototype.getLocalTime=function(a,b){try{if(""===a)return["",""];var c=a.split("."),d=b.split(":"),e=d[2].split(","),f=new Date(c[1]+"/"+c[0]+"/"+c[2]+" "+d[0]+":"+d[1]+":"+e[0]+" UTC"),g=f.getDate();g=g<10?"0"+g:g;var h=f.getMonth()+1;h=h<10?"0"+h:h;var i=f.getHours();i=i<10?"0"+i:i;var j=f.getMinutes();j=j<10?"0"+j:j;var k=f.getSeconds();k=k<10?"0"+k:k;var l=f.getFullYear()+"-"+h+"-"+g,m=i+":"+j+":"+k+","+e[1];return[l,m]}catch(a){console.log("getLocalTime() failed: "+a)}},AlarmClient.prototype.convertToDate=function(a,b){try{if(""===a)return"";var c=(new Date).getTime(),d=parseInt((c-a)/1e3),e=parseInt(d/86400),f=parseInt(d/3600)%24,g=parseInt(d/60)%60,h=d%60;return b?(f<10?"0"+f:f)+":"+(g<10?"0"+g:g)+":"+(h<10?"0"+h:h):e+":"+(f<10?"0"+f:f)+":"+(g<10?"0"+g:g)+":"+(h<10?"0"+h:h)}catch(a){console.log("convertToDate() failed: "+a)}},AlarmClient.prototype.convertToTimestamp=function(a,b){try{if(""===a)return"";var c=a.split("-"),d=b.split(":"),e=d[2].split(",");return new Date(c[1]+"/"+c[2]+"/"+c[0]+" "+d[0]+":"+d[1]+":"+e[0]).getTime()}catch(a){console.log("convertToTime() failed: "+a)}},emosWS.AlarmClient=AlarmClient;function RestAlarmClient(a,b){this.parent=a,this.data=b,this.init()}RestAlarmClient.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID();this.alarmId=getElementGlobalID();var k=getElementGlobalID(),l=getElementGlobalID(),m;m="<tr><th class='tdBegin' style='width: 11%;' id='"+c+"'> Begin</th><th class='tdEnd' style='width: 11%;' id='"+f+"'> End</th><th class='tdShift' style='width: 3%;' id='"+g+"'> Shift</th><th class='tdText' style='width: 23%;' id='"+b+"'> Text</th><th class='tdArea' style='width: 12%;' id='"+j+"'> Area</th><th class='tdPriority' style='width: 3%;' id='"+i+"'> Priority</th><th class='tdClass' style='width: 3%;' id='"+h+"'> Class</th><th class='tdDuration' style='width: 5%;' id='"+d+"'> Duration</th><th class='tdComment' style='width: 12%;' id='"+k+"'> Comment</th><th class='tdEditor' style='width: 12%;' id='"+l+"'> Last Editor</th>";var n=$("<div class='DiagnosisRestAlarmClient' id='"+a+"'><table style='width: 100%' class='DiagnosisRestAlarmTable Groupbox' id='"+e+"'>"+m+"</tr></table></div>");n.appendTo(this.parent),this.table=document.getElementById(e),this.addTableRow()}catch(a){console.log("RestAlarmClient init failed: "+a)}},RestAlarmClient.prototype.addTableRow=function(){var a=1,b=this;$.each(this.data,function(c,d){var e=b.table.insertRow(a);e.className="alarmTable "+d.type+" "+d.status;var f=e.insertCell(0),g=e.insertCell(1),h=e.insertCell(2),i=e.insertCell(3),j=e.insertCell(4),k=e.insertCell(5),l=e.insertCell(6),m=e.insertCell(7),n=e.insertCell(8),o=e.insertCell(9);f.textContent=d.beginDate,g.textContent=d.endDate,h.textContent=d.shift,i.textContent=d.text,j.textContent=d.area,k.textContent=d.priority,l.textContent=d.class,m.textContent=d.duration,n.textContent=d.comment,o.textContent=d.lastEdit,f.className="tdBegin",g.className="tdEnd",h.className="tdShift",i.className="tdText",j.className="tdArea",k.className="tdPriority",l.className="tdClass",m.className="tdDuration",n.className="tdComment",o.className="tdEditor",a++})},emosWS.RestAlarmClient=RestAlarmClient;var GeneralElement=function(a,b){var c=getElementGlobalID(),d=$("<div class='DiagnosisGerneralElement' id='"+c+"'><svg width='100%' height='20'><rect width='100%' height='20' style='fill:white;stroke-width:1;stroke:grey' /><text x='5' y='15' fill='black'>"+b.Text+"</text></svg></div>");d.appendTo(a)};function DiagnosisElement(a){this.data=a.data,this.writable=a.writable,this.panel=null,this.visibleRight=parseInt(this.data.VisibleAtRight),this.visibleOPC=this.data.VisibleOPCID,this.userRight=parseInt(this.data.UserRight),this.UNKOWN="???",this.visible=!0,this.opcvisible=!0,this.hasPaintShopRight=!0,this.initialize()}DiagnosisElement.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},DiagnosisElement.prototype.setInputRange=function(a,b){a&&b&&(b.InputMin=a.input_min,b.InputMax=a.input_max,b.IntInputMin?(b.IntInputMin=b.InputMin,b.IntInputMax=b.InputMax):b.RealInputMin?(b.RealInputMin=b.InputMin,b.RealInputMax=b.InputMax):b.IntTimeMin&&(b.IntTimeMin=b.InputMin,b.IntTimeMax=b.InputMax))},DiagnosisElement.prototype.updateView=function(){try{this.visibleRight&&(this.hasPaintShopRight=emosWS.login.au.hasPaintShopRight(this.visibleRight),this.setVisibility()),this.writable&&this.updateWrite()}catch(a){console.log(this.constructor.name+": updateView failed: "+a)}},DiagnosisElement.prototype.initialize=function(){this.init(),this.afterInit()},DiagnosisElement.prototype.init=function(){},DiagnosisElement.prototype.updateWrite=function(){},DiagnosisElement.prototype.unitListener=function(){},DiagnosisElement.prototype.getValue=function(a){try{return a}catch(b){return console.error("[DiagnosisElement getValue] : "+b),a}},DiagnosisElement.prototype.afterInit=function(){this.updateView(),isNaN(this.userRight)&&isNaN(this.visibleRight)||emosWS.addEventListener("UserRight",this.updateView.bind(this)),this.data.VisibleOPCID&&""!==this.data.VisibleOPCID&&this.parseVisibilityOPCTags(this.data.VisibleOPCID,function(a){this.opcvisible=GetAsBoolean(a.value),this.setVisibility()}.bind(this)),emosWS.addEventListener("unit",function(a){this.unit=a,this.unitListener(a)}.bind(this))},DiagnosisElement.prototype.parseVisibilityOPCTags=function(s,callback){[[" & "," && "],[" | "," || "],["NOT ","! "]].forEach(function(a){s=s.replace(a[0],a[1])});var tagMap={};s.split(/[ &|!\(\)]/).forEach(function(a){""!==a&&(tagMap[a]=null)});var parseValues=function(itag,ivalue){tagMap[itag]=ivalue;for(var tag in tagMap)if(null===tagMap[tag])return;var parseString=s;for(var tag in tagMap)parseString=parseString.replace(tag,tagMap[tag]);var value=!0;try{value=eval(parseString),callback({value:value})}catch(a){}};for(var tag in tagMap)emosWS.advise(this.plc+"."+tag,function(a){parseValues(tag,GetAsBoolean(a.value))},"",emosWS.tagType.IO)},DiagnosisElement.prototype.adviseProperty=function(a,b,c){emosWS.advise(a,function(a,c){try{if(a.value){var d=a.value,e=this.data;e.Precision=d.disp_prec||e.Precision,d.met_baseunit!==this.UNKOWN&&(e.UnitMetric=d.met_baseunit||e.UnitMetric),d.imp_baseunit!==this.UNKOWN&&(e.UnitImperial=d.imp_baseunit||e.UnitImperial),d.loc_baseunit!==this.UNKOWN&&(e.UnitLocale=d.loc_baseunit||e.UnitLocale),e.FactorMetric=d.met_factor||e.FactorMetric,e.FactorImperial=d.imp_factor||e.FactorImperial,e.FactorLocale=d.loc_factor||e.FactorImperial,e.FactorPLC=d.plc_factor,e.TextKey=d.textkey,e.ByteInputMin&&(e.ByteInputMin=d.input_min||e.ByteInputMin),e.ByteInputMax&&(e.ByteInputMax=d.input_max||e.ByteInputMax),e.IntInputMin&&(e.IntInputMin=d.input_min||e.IntInputMin),e.IntInputMax&&(e.IntInputMax=d.input_max||e.IntInputMax),e.RealInputMin&&(e.RealInputMin=d.input_min||e.RealInputMin),e.RealInputMax&&(e.RealInputMax=d.input_max||e.RealInputMax),b(a,c)}}catch(a){console.error("[DiagnosisElement adviseProperty callback] : "+a)}}.bind(this),c,emosWS.tagType.Property)},DiagnosisElement.prototype.setVisibility=function(){this.visible=this.opcvisible&&this.hasPaintShopRight;try{this.panel.get(0).style.visibility=this.visible?"visible":"hidden"}catch(a){console.error("[DiagnosisElement setVisibility] : "+a)}};function DiagnosisText(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.Groupbox,css:"DiagnosisText"},R:{parent:this.diagnosisWindow.divTypes.Groupbox,css:"DiagnosisText"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisText"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.dataText=""===this.data.Text?".":this.data.Text,this.plctag="",this.text="",DiagnosisElement.call(this,{data:b})}DiagnosisText.prototype=Object.create(DiagnosisElement.prototype),DiagnosisText.prototype.constructor=DiagnosisText,DiagnosisText.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID();"undefined"!=typeof this.data.VisibleOPCID&&""!==this.data.VisibleOPCID&&(this.plctag=""===this.data.VisibleOPCID?"":this.plc+"."+this.data.OPCID);var c=this.positionClass[this.data.Position],d=this.panel=$("<div class='"+c.css+"' id='"+a+"'><p id='"+b+"'>"+this.dataText+"</p></div>");d.appendTo(this.parentDiv),this.text=document.getElementById(b),""!==this.plctag&&emosWS.advise(this.plctag,function(a){try{var b=GetAsBoolean(a.value);this.text.style.visibility=b?"visible":"hidden"}catch(a){console.log("DiagnosisText datachangeListener failed: "+a)}}.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this)}catch(a){console.log("DiagnosisText init failed: "+a)}},emosWS.DiagnosisText=DiagnosisText;function PageControl(a,b,c,d){this.parent=a,this.data=b,this.diagnosisWindow=c,this.subtabs=d,this.init()}PageControl.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=$("<div class='DiagnosisPageControl diatabs' id='"+a+"'><div class='pager'><span class='pagerHead' id='"+b+"'><input maxlength='15' id='"+c+"' class='pagerHeadLine getKeypad keyboardInputInitiator' disabled></span></div><ul><br class='cl' /></ul></div>");d.appendTo(this.parent);var e=d.tabs(),f=e.find("ul"),g=0;if("statusWelcome"!==this.diagnosisWindow.additionalClass)try{this.data["1999990-AddPageTab"]={"1999991-AddPageControl":{"1999992-AddPageTab":{Text:"Private1",TextID:"Private1"}},Text:"Private",TextID:"Private"},this.data["1999993-AddPageTab"]={"1999994-AddPageControl":{"1999995-AddPageTab":{Text:"Summaries",TextID:"Summaries"}},Text:"Duerr",TextID:"Duerr"}}catch(a){console.log(a)}for(var h=sortHashArray(this.data),i=h.length-1;i>-1;i--){var j=getElementGlobalID(),k=h[i],l=this.data[k];if("1000-AddPageTab"===k){$(this.parent).closest(".diagnose").find(".arrangeTabs").addClass("childWin");break}if("object"==typeof l){g++;var m=getElementGlobalID(),n=DiagnosisCommon.getObjectType(k),o="";switch(n){case"AddPageTab":o=l.Text;break;default:o=n,l.TextID="Messages"}var p=getElementGlobalID();$("<li id='"+j+"' title='"+o+"' class='emosbutton "+o+" tab"+g+"'><a href='#"+m+"'></a><span><span class='warn_image'></span></span></li>").prependTo(f),"Messages"===o&&new emosWS.HTMLFaultWarning({id:j,alarmGroup:this.diagnosisWindow.PLC+this.diagnosisWindow.ID});var q=$("<div class='DiagnosisPageBlank dPage "+o+"' id='"+m+"'></div>");"statusWelcome"===this.diagnosisWindow.additionalClass?($(q)[0].head="Actual and last Alarms",$(q)[0].headId="Actual and last Alarms"):($(q)[0].head=o,$(q)[0].headId=this.diagnosisWindow.getTextPrefix()+l.TextID),$(q)[0].tabNum=g,q.appendTo(e);var r=document.getElementById(p);if(!l.Visible||"2"===l.Visible){this.diagnosisWindow.appendPage(q,l,r,parseInt(l.VisibleAtRight||"0"),g,e);var s="";q.children(".diasubtabs").length>0&&q.closest(".DiagnosisFooter").addClass("subpage")}}}e.tabs("refresh"),e.tabs({active:0})}catch(a){console.log("PageControl failed: "+a)}},emosWS.PageControl=PageControl;function SubPageControl(a,b,c,d){this.parent=a,this.data=b,this.diagnosisWindow=c,this.subtabs=d,this.init()}SubPageControl.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=$("<div class='DiagnosisPageControl diasubtabs' id='"+a+"'></div>");$(f)[0].tabNumbers=Object.keys(this.data).length,f.appendTo(this.parent);for(var g=f,h=0,i=sortHashArray(this.data),j=0,k=i.length;j<k;j++){var l=i[j],m=this.data[l];if("object"==typeof m){h++;var n=getElementGlobalID(),o=DiagnosisCommon.getObjectType(l),p="";switch(o){case"AddPageTab":p=m.Text;break;default:p=o,m.TextID="Messages"}var q=getElementGlobalID(),r,s,t=p,u=$("<div class='DiagnosisSubPageBlank dPage' id='"+n+"' data-pos='"+t+"'></div>");if("Private1"===p)$("#contextMenu").empty(),$('<li class="subContext contextlast context"><a href="#">Copy to new private Tab</a></li>').appendTo("#contextMenu"),$('<li class="subContext elementdelete"><a href="#">delete element from Tab</a></li>').appendTo("#contextMenu"),$('<li class="subContext context"><a class="first" href="#'+n+'">Copy to Tab '+t+"</a></li>").insertBefore("#contextMenu .contextlast"),s=$('<div class="radio"><label><input type="radio" name="view" value="compact" onchange="emosWS.SubPageControl.prototype.changeView(this);" checked="checked">compact</label><label><input type="radio" name="view" value="comfort" onchange="emosWS.SubPageControl.prototype.changeView(this);">comfort</label></div>'),r=$("<table cellspacing='0' class='privTable' id='"+e+"'><colgroup><col width='210'><col width='70'><col width='70'></colgroup><tr><th>Name</th><th>Format</th><th>Value</th></tr></table>"),s.appendTo(u),r.appendTo(u);else if("Summaries"===p){r=$("<div/>",{class:"addMess"}),r.append('<div class="DiagnosisText">Releases</div>'),r.appendTo(u);var v=$("<div/>",{class:"Groupbox "});v.append('<div class="DiagnosisText">Versions</div>'),v.append('<span class="xtext1">Name</span><span class="xtext2">'+this.diagnosisWindow.winName+"</span><br>"),v.append('<span class="xtext1">EcoScreen</span><span class="xtext2">'+this.diagnosisWindow.windowData.Version+"</span><br>"),v.append('<span class="xtext1">PLC</span><span class="xtext2">'+this.diagnosisWindow.PLC+"</span>"),v.appendTo(u);var v=$("<div/>",{class:"Groupbox "});v.append('<div class="DiagnosisText">Communication Diagnosis</div>');var w=$("<div/>",{class:"emosbutton welcome ",text:"i",click:function(){emosWS.debug.show()}});w.appendTo(v),v.appendTo(u)}$(u)[0].head=p,$(u)[0].headId=this.diagnosisWindow.getTextPrefix()+m.TextID,$(u)[0].tabNum=h,u.appendTo(g);var x=document.getElementById(q);m.Visible&&"2"!==m.Visible||(this.diagnosisWindow.appendPage(u,m,x,parseInt(m.VisibleAtRight||"0"),h,g),1===h?$("#"+u.attr("id")).show():$("#"+u.attr("id")).css({display:"none",right:-500}))}}}catch(a){console.log("SubPageControl failed: "+a)}},SubPageControl.prototype.changeView=function(a){$(a).closest(".dPage").find(".comfort").toggle()},emosWS.SubPageControl=SubPageControl;function AddSubTab(a,b){this.parent=a,this.myName=b,this.init()}AddSubTab.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=this.parent.find(".DiagnosisSubPageBlank").length+1;this.myName&&"undefined"!==this.myName||(this.myName="Private"+d);var e='<div class="radio"><label><input type="radio" name="view'+d+'" value="compact" onchange="emosWS.SubPageControl.prototype.changeView(this);" checked="checked">compact</label><label><input type="radio" name="view'+d+'" value="comfort" onchange="emosWS.SubPageControl.prototype.changeView(this);">comfort</label></div>',f=$("<div class='DiagnosisSubPageBlank dPage' id='"+a+"' data-pos='"+this.myName+"'>"+e+"<table cellspacing='0' class='privTable' id='"+c+"'><colgroup><col width='210'><col width='70'><col width='70'></colgroup><tr><th>Name</th><th>Format</th><th>Value</th></tr></table></div>");$(this.parent)[0].tabNumbers=d,$(f)[0].head=this.myName,$(f)[0].headId="Private"+d,$(f)[0].tabNum=d,f.appendTo(this.parent),$("#"+a).css({display:"none",right:-500}),$('<li class="subContext context"><a href="#'+a+'">Copy to Tab '+this.myName+"</a></li>").insertBefore("#contextMenu .contextlast")}catch(a){console.log("AddTab failed: "+a)}},emosWS.AddSubTab=AddSubTab;var DiagnosisTimer=function(a){this.data=null,this.setValue(a)};DiagnosisTimer.prototype.setValue=function(a){this.data=this.decode(a)},DiagnosisTimer.prototype.decode=function(a){return{value:a}},DiagnosisTimer.prototype.encode=function(){return this.data.value},DiagnosisTimer.prototype.getData=function(){return this.data},DiagnosisTimer.prototype.toString=function(){return this.data.value},DiagnosisTimer.prototype.formatNumber=function(a){return a<10?(100+a).toString().slice(-2):a.toString()};var DiagnosisTimerSecond=function(a,b,c){this.plcBase=b,this.visuBase=c,DiagnosisTimer.call(this,a)};DiagnosisTimerSecond.prototype=Object.create(DiagnosisTimer.prototype),DiagnosisTimerSecond.prototype.constructor=DiagnosisTimerSecond,DiagnosisTimerSecond.prototype.decode=function(a){if("ms"===this.visuBase){var b=parseInt(a)*("ms"===this.plcBase?1:1e3),c=Math.floor(b/6e4);b-=6e4*c;var d=Math.floor(b/1e3);return b-=1e3*d,b=Math.round(b),{value:a,minute:c,second:d,msecond:b}}var d=parseInt(a)/("ms"===this.plcBase?1e3:1),e=Math.floor(d/3600);d-=3600*e;var c=Math.floor(d/60);return d-=60*c,
d=Math.round(d),{value:a,hour:e,minute:c,second:d}},DiagnosisTimerSecond.prototype.encode=function(a){return"ms"===this.visuBase?(this.data.minute=parseInt(a.minute),this.data.second=parseInt(a.second),this.data.msecond=parseInt(a.msecond),this.data.value=(6e4*this.data.minute+1e3*this.data.second+this.data.msecond)/("ms"===this.plcBase?1:1e3)):(this.data.hour=parseInt(a.hour),this.data.minute=parseInt(a.minute),this.data.second=parseInt(a.second),this.data.value=(3600*this.data.hour+60*this.data.minute+this.data.second)*("ms"===this.plcBase?1e3:1)),this.data.value},DiagnosisTimerSecond.prototype.toString=function(){if("ms"===this.visuBase){var a="",b="";return 0!==this.data.minute&&(a+=this.formatNumber(this.data.minute)+":",b+="m:"),0===this.data.minute&&0===this.data.second||(a+=this.formatNumber(this.data.second)+":",b+="s:"),a+=this.formatNumber(this.data.msecond),b+="ms",a+" "+b}var a="",b="";return 0!==this.data.hour&&(a+=this.formatNumber(this.data.hour)+":",b+="h:"),0===this.data.hour&&0===this.data.minute||(a+=this.formatNumber(this.data.minute)+":",b+="m:"),a+=this.formatNumber(this.data.second),b+="s",a+" "+b};var DiagnosisTimerMinute=function(a){DiagnosisTimer.call(this,a)};DiagnosisTimerMinute.prototype=Object.create(DiagnosisTimer.prototype),DiagnosisTimerMinute.prototype.constructor=DiagnosisTimerMinute,DiagnosisTimerMinute.prototype.decode=function(a){var b=parseInt(a),c=Math.floor(b/1440);b-=1440*c;var d=Math.floor(b/60);return b-=60*d,{value:a,day:c,hour:d,minute:b}},DiagnosisTimerMinute.prototype.encode=function(a){return this.data.day=parseInt(a.day),this.data.hour=parseInt(a.hour),this.data.minute=parseInt(a.minute),this.data.value=1440*this.data.day+60*this.data.hour+this.data.minute,this.data.value},DiagnosisTimerMinute.prototype.toString=function(){var a="",b="";return 0!==this.data.day&&(a+=formatNumber(this.data.day)+":",b+="d:"),0===this.data.day&&0===this.data.minute||(a+=formatNumber(this.data.hour)+":",b+="h:"),a+=formatNumber(this.data.minute),b+="m",a+" "+b};var DiagnosisTimerSiemensDate=function(a){DiagnosisTimer.call(this,a)};DiagnosisTimerSiemensDate.prototype=Object.create(DiagnosisTimer.prototype),DiagnosisTimerSiemensDate.prototype.constructor=DiagnosisTimerSiemensDate,DiagnosisTimerSiemensDate.prototype.decode=function(a){try{var b=1989,c=12,d=30,e=/(.*?)-(.*?)-(.*?)$/,f=a.replace(e,function(a,e,f,g){b=parseInt(e),c=parseInt(f),d=parseInt(g)});return{value:a,year:b,month:c,day:d}}catch(e){return{value:a,year:b,month:c,day:d}}},DiagnosisTimerSiemensDate.prototype.encode=function(a){return this.data.year=a.year,this.data.month=a.month,this.data.day=a.day,this.data.value=a.year+"-"+this.formatNumber(a.month)+"-"+this.formatNumber(a.day),this.data.value},DiagnosisTimerSiemensDate.prototype.toString=function(){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return(this.data.day<10?"0"+this.data.day:this.data.day)+" "+a[this.data.month-1]+" "+this.data.year};var DiagnosisTimerSiemensTimeOfDate=function(a){DiagnosisTimer.call(this,a)};DiagnosisTimerSiemensTimeOfDate.prototype=Object.create(DiagnosisTimer.prototype),DiagnosisTimerSiemensTimeOfDate.prototype.constructor=DiagnosisTimerSiemensTimeOfDate,DiagnosisTimerSiemensTimeOfDate.prototype.decode=function(a){try{var b=12,c=0,d=0,e=/(.*?):(.*?):(.*?)\.(.*?)$/,f=a.replace(e,function(a,e,f,g,h){b=parseInt(e),c=parseInt(f),d=parseInt(g)});return{value:a,hour:b,minute:c,second:d}}catch(e){return{value:a,hour:b,minute:c,second:d}}},DiagnosisTimerSiemensTimeOfDate.prototype.encode=function(a){return this.data.hour=a.hour,this.data.minute=a.minute,this.data.second=a.second,this.data.value=a.hour+":"+a.minute+":"+a.second+".0",this.data.value},DiagnosisTimerSiemensTimeOfDate.prototype.toString=function(){var a="AM",b=this.data.hour;return b>12&&(b-=12,a="PM"),b+":"+(this.data.minute<10?"0"+this.data.minute:this.data.minute)+":"+(this.data.second<10?"0"+this.data.second:this.data.second)+" "+a};var DiagnosisTimerSiemensTime=function(a){DiagnosisTimer.call(this,a)};DiagnosisTimerSiemensTime.prototype=Object.create(DiagnosisTimer.prototype),DiagnosisTimerSiemensTime.prototype.constructor=DiagnosisTimerSiemensTime,DiagnosisTimerSiemensTime.prototype.decode=function(a){try{var b=0,c=0,d=0,e=0,f=0,g=/(\d+D)?(\d+H)?(\d+M)?(\d+S)?(\d+MS)?$/,h=this,i=a.replace(g,function(a,g,i,j,k,l){b=h.getNumberFromString(g),c=h.getNumberFromString(i),d=h.getNumberFromString(j),e=h.getNumberFromString(k),f=h.getNumberFromString(l)});return{value:a,day:b,hour:c,minute:d,second:e,ms:f}}catch(g){return{value:a,day:b,hour:c,minute:d,second:e,ms:f}}},DiagnosisTimerSiemensTime.prototype.encode=function(a){return this.data.day=a.days,this.data.hour=a.hour,this.data.minute=a.minute,this.data.second=a.second,this.data.ms=a.ms,this.data.value=a.days+"D"+a.hour+"H"+a.minute+"M"+a.second+"S"+a.ms+"MS",this.data.value},DiagnosisTimerSiemensTime.prototype.toString=function(){var a="",b="",c=!1;if(0!==this.data.day&&(a+=this.data.day,b+="d",c=!0),!(0===this.data.day&&0===this.data.hour||0===this.data.hour&&0===this.data.minute&&0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.hour<10?"0"+this.data.hour:this.data.hour),b+=d+"h",c=!0}if(!(0===this.data.day&&0===this.data.hour&&0===this.data.minute||0===this.data.minute&&0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.minute<10?"0"+this.data.minute:this.data.minute),b+=d+"m",c=!0}if(!(0===this.data.day&&0===this.data.hour&&0===this.data.minute&&0===this.data.second||0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.second<10?"0"+this.data.second:this.data.second),b+=d+"s",c=!0}if(0!==this.data.day||0!==this.data.hour||0!==this.data.minute||0!==this.data.second||0!==this.data.ms){var d=c?":":"";a+=d+(this.data.ms<10?"0"+this.data.ms:this.data.ms),b+=d+"ms"}var e=a+" "+b;return" "===e?"0 s":e},DiagnosisTimerSiemensTime.prototype.getNumberFromString=function(a){var b=0;try{if("undefined"!=typeof a){var c=/(\d+)/;b=parseInt(a.match(c)[0])}return b}catch(a){return b}};var DiagnosisTimerSiemensS5Time=function(a){DiagnosisTimerSiemensTime.call(this,a)};DiagnosisTimerSiemensS5Time.prototype=Object.create(DiagnosisTimerSiemensTime.prototype),DiagnosisTimerSiemensS5Time.prototype.constructor=DiagnosisTimerSiemensS5Time,DiagnosisTimerSiemensS5Time.prototype.encode=function(a){return this.data.hour=a.hour,this.data.minute=a.minute,this.data.second=a.second,this.data.ms=a.ms,this.data.value=a.hour+"H"+a.minute+"M"+a.second+"S"+a.ms+"MS",this.data.value},DiagnosisTimerSiemensS5Time.prototype.toString=function(){var a="",b="",c=!1;if(this.data.day=0,!(0===this.data.day&&0===this.data.hour||0===this.data.hour&&0===this.data.minute&&0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.hour<10?"0"+this.data.hour:this.data.hour),b+=d+"h",c=!0}if(!(0===this.data.day&&0===this.data.hour&&0===this.data.minute||0===this.data.minute&&0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.minute<10?"0"+this.data.minute:this.data.minute),b+=d+"m",c=!0}if(!(0===this.data.day&&0===this.data.hour&&0===this.data.minute&&0===this.data.second||0===this.data.second&&0===this.data.ms)){var d=c?":":"";a+=d+(this.data.second<10?"0"+this.data.second:this.data.second),b+=d+"s",c=!0}if(0!==this.data.day||0!==this.data.hour||0!==this.data.minute||0!==this.data.second||0!==this.data.ms){var d=c?":":"";a+=d+(this.data.ms<10?"0"+this.data.ms:this.data.ms),b+=d+"ms"}var e=a+" "+b;return" "===e?"0 s":e};var DiagnosisTimerSiemensDateAndTime=function(a){DiagnosisTimer.call(this,a)};DiagnosisTimerSiemensDateAndTime.prototype=Object.create(DiagnosisTimer.prototype),DiagnosisTimerSiemensDateAndTime.prototype.constructor=DiagnosisTimerSiemensDateAndTime,DiagnosisTimerSiemensDateAndTime.prototype.decode=function(a){try{if(!a)return;var b=a.lastIndexOf("-"),c=a.substring(0,b),d=a.substring(b+1);this.date=new DiagnosisTimerSiemensDate(c),this.time=new DiagnosisTimerSiemensTimeOfDate(d);var e=this.date.getData(),f=this.time.getData(),g=$.extend({},e,f);return g.value=a,g}catch(a){console.log("DiagnosisTimerSiemensDateAndTime.prototype.decode failed: "+a)}},DiagnosisTimerSiemensDateAndTime.prototype.encode=function(a){return this.data.year=a.year,this.data.month=a.month,this.data.day=a.day,this.data.hour=a.hour,this.data.minute=a.minute,this.data.second=a.second,this.data.value=a.year+"-"+this.formatNumber(a.month)+"-"+this.formatNumber(a.day)+"-"+a.hour+":"+a.minute+":"+a.second+".0",this.data.value},DiagnosisTimerSiemensDateAndTime.prototype.toString=function(){return this.date.toString()+" "+this.time.toString()};var colorList={G:"green",R:"red",X:"black",B:"blue",O:"lightgrey",P:"pink",Y:"yellow"};function AddDataToSubTab(a,b,c,d,e,f){this.parent=a,this.data=b,this.valueInSecond=b.valueInSecond,this.writable=b.writable,this.objectType=DiagnosisCommon.getObjectType(d),this.textValue="",this.hoursValue=this.minutesValue=this.secondsValue=null,this.plc=c,this.plctag=c+"."+this.data.OPCID,this.plctag2=c+"."+this.data.OPCID2,this.plctagLed=this.plc+"."+this.data.LEDOPCID,this.led=this.LEDValue=this.writeRect=null,this.emosAdviceElement=null,this.myPrivId=f,this.unit=emosWS.getUnit(),this.textPrefixList={1:"T01_",3:"T03_",5:"T05_"},DiagnosisElement.call(this,{data:b,writable:this.writable})}AddDataToSubTab.prototype=Object.create(DiagnosisElement.prototype),AddDataToSubTab.prototype.constructor=AddDataToSubTab,AddDataToSubTab.prototype.setTimerValue=function(){switch(this.type){case timerTypes.Second:this.timerValue=new DiagnosisTimerSecond;break;case timerTypes.Minute:this.timerValue=new DiagnosisTimerMinute;break;case timerTypes.SiemensDate:this.timerValue=new DiagnosisTimerSiemensDate;break;case timerTypes.SiemensTimeOfDay:this.timerValue=new DiagnosisTimerSiemensTimeOfDate;break;case timerTypes.SiemensTime:this.timerValue=new DiagnosisTimerSiemensTime;break;case timerTypes.SiemensS5Time:this.timerValue=new DiagnosisTimerSiemensS5Time;break;case timerTypes.SiemensDateAndTime:this.timerValue=new DiagnosisTimerSiemensDateAndTime;break;default:this.timerValue=new DiagnosisTimer}},AddDataToSubTab.prototype.init=function(){try{var id=getElementGlobalID(),ledId=getElementGlobalID(),ledId1=getElementGlobalID(),textId=getElementGlobalID(),textId1=getElementGlobalID(),plcId=getElementGlobalID(),writeRectId=getElementGlobalID(),writeRectId2=getElementGlobalID(),writeRectId3=getElementGlobalID(),writeRectId4=getElementGlobalID(),writeRectId5=getElementGlobalID(),cancelbuttonId=getElementGlobalID(),savebuttonId=getElementGlobalID(),previewId=getElementGlobalID(),act=getElementGlobalID(),setP=getElementGlobalID(),numberId=getElementGlobalID(),number2Id=getElementGlobalID(),number3Id=getElementGlobalID(),number4Id=getElementGlobalID(),number5Id=getElementGlobalID(),hoursId0=getElementGlobalID(),minutesId0=getElementGlobalID(),secondsId0=getElementGlobalID(),hoursId=getElementGlobalID(),minutesId=getElementGlobalID(),secondsId=getElementGlobalID(),hoursId2=getElementGlobalID(),minutesId2=getElementGlobalID(),secondsId2=getElementGlobalID(),hoursId3=getElementGlobalID(),minutesId3=getElementGlobalID(),secondsId3=getElementGlobalID(),placeholder,hasplc2=!1,hasplcLed=!1,tableValue,elemFormat;switch(this.objectType){case"AddTextLED":case"AddTextLEDLong":case"AddTextInputLED":case"AddTextLEDInputLong":case"AddTextLEDNiveau":placeholder="<span id='"+ledId+"' class='orange'></span><div class='textLed'><span id='"+textId+"'>"+this.data.Text+"</span></div>",this.emosAdviceElement="emosWS.DiagnosisTextLED.prototype",tableValue="<span id='"+ledId1+"' class='orange notwritable'></span>",elemFormat="binary";break;case"AddStringInput":case"AddString":case"AddStringLong":case"AddStringInputLong":placeholder="<span class='DiagnosisNumberLRTextTextSVG plcTag'>PLC_Tag:"+this.plctag+"</span><span id='"+savebuttonId+"' class='savebutton  emosbutton'></span><span id='"+cancelbuttonId+"' class='cancelbutton  emosbutton'></span><span id='"+writeRectId+"' class='writebutton getKeypad keyboardInputInitiator emosbutton'></span><br class='cl'>",placeholder+="<span style='display: inline-block;margin-top: 10px;' class='DiagnosisNumberLRTextNumberSVG orange' id='"+textId+"'>"+this.textValue+"</span>",placeholder+="<div class='DiagnosisStringButtons' style='margin-top:20px;padding-top: 0;'>",placeholder+="<input lang='' maxlength="+this.data.StrLen+" pattern='.{"+this.data.StrStart+","+this.data.StrLen+"}' class='DiagnosisNumberLRTextNumberSVG preview keyboardInput' type='text' id='"+previewId+"' required></p>",placeholder+="</div>",this.emosAdviceElement="emosWS.DiagnosisString.prototype",tableValue="<span class='DiagnosisNumberLRTextNumberSVG orange' id='"+textId1+"'>"+this.textValue+"</span>",elemFormat="alphanum";break;case"AddTextDoubleTimerLong":case"AddTextDoubleTimerInputLong":case"AddTextDoubleTimerLongMin":case"AddTextDoubleTimerInputLongMin":placeholder="<span class='DiagnosisNumberLRTextTextSVG' id='"+textId+"'>"+this.data.Text+"</span><span id='"+savebuttonId+"' class='savemebutton emosbutton'></span><span id='"+cancelbuttonId+"' class='cancelbutton emosbutton'></span><span id='"+writeRectId2+"' class='writebutton emosbutton'></span><br class='cl'><div class='grey'><span class='pickertext' id='"+act+"'>Actual Value</span><span class='pickertime' id='"+numberId+"'><span class='pickertime hours orange' id='"+hoursId0+"'>"+this.hoursValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime minutes orange' id='"+minutesId0+"'>"+this.minutesValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime seconds orange' id='"+secondsId0+"'>"+this.secondsValue+"</span></span></div><div style='padding: 3px;'><span class='pickertext' id='"+setP+"'>Setpoint</span><span id='"+number2Id+"' class='pickertime'><span class='pickertime hours orange' id='"+hoursId+"'>"+this.hoursValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime minutes orange' id='"+minutesId+"'>"+this.minutesValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime seconds orange' id='"+secondsId+"'>"+this.secondsValue+"</span></span></div>",this.emosAdviceElement="emosWS.DiagnosisTextDoubleTimer.prototype",this.timerValue=this.valueInSecond?new DiagnosisTimerSecond:new DiagnosisTimerMinute,hasplc2=!0,tableValue="&nbsp;<span id='"+hoursId3+"'>"+this.hoursValue+"</span><span>:</span><span id='"+minutesId3+"'>"+this.minutesValue+"</span><span>:</span><span id='"+secondsId3+"'>"+this.secondsValue+"</span><br>",tableValue+="(<span id='"+hoursId2+"'>"+this.hoursValue+"</span><span>:</span><span id='"+minutesId2+"'>"+this.minutesValue+"</span><span>:</span><span id='"+secondsId2+"'>"+this.secondsValue+"</span>)",elemFormat="hh:mm:ss";break;case"AddTextInteger":case"AddTextReal":case"AddTextIntegerLong":case"AddTextRealLong":case"AddTextIntegerInput":case"AddTextRealInput":case"AddTextRealInputNiveau":case"AddTextIntegerInputLong":case"AddTextRealInputLong":placeholder="<span class='DiagnosisNumberLRTextTextSVG textfeld' id='"+textId+"'>"+this.data.Text+"</span><span id='"+savebuttonId+"' class='savebutton emosbutton'></span><span id='"+cancelbuttonId+"' class='cancelbutton emosbutton'></span><span id='"+writeRectId3+"' class='writebutton getpad emosbutton'></span><form onsubmit='return false'><span class='DiagnosisNumberLRTextNumberSVG textfeld orange' oninput='this.form.amountRange.value=this.value; this.form.preview.value=this.value' id='"+numberId+"' data-value='"+this.numberValue+"'>"+this.value+emosWS.DiagnosisTextNumber.prototype.getUnitSymbol()+"</span><div class='DiagnosisStringButtons'></form></div>",this.emosAdviceElement="emosWS.DiagnosisTextNumber.prototype",tableValue="<span id='"+number4Id+"'>"+this.value+emosWS.DiagnosisTextNumber.prototype.getUnitSymbol()+"</span>",elemFormat="integer";break;case"AddLEDTextIntegerLong":case"AddTextLEDIntegerLong":case"AddLEDTextRealLong":case"AddLEDTextIntegerInputLong":case"AddTextLEDIntegerInputLong":case"AddLEDTextRealInputLong":this.writable?(this.inputfield=!0,placeholder="<div style='float: right;position: absolute;right: 20px;'><span style='display: none;' class='DiagnosisNumberLRTextTextSVG'></span><span id='"+savebuttonId+"' class='savebutton emosbutton'></span><span id='"+cancelbuttonId+"' class='cancelbutton emosbutton'></span><span id='"+writeRectId4+"' class='writebutton getpad emosbutton'></span><br class='cl'></div><span class='messageCircle' id='"+ledId+"'></span><span class='DiagnosisNumberLRTextText' id='"+textId+"'>"+this.data.Text+"</span><form onsubmit='return false' style='float:left; padding-top: 5px;'><span class='DiagnosisNumberLRTextNumberSVG textfeld' oninput='this.form.amountRange.value=this.value; this.form.preview.value=this.value' id='"+numberId+"' data-value='"+this.numberValue+"'>"+this.value+emosWS.DiagnosisLedTextNumber.prototype.getUnitSymbol()+"</span><div class='DiagnosisStringButtons'></form></div>"):(this.inputfield=!1,placeholder="<span id='"+numberId+"' class='DiagnosisNumbers without'></span><span class='messageCircle without' id='"+ledId+"'></span><span class='DiagnosisNumberLRTextText without' id='"+textId+"'>"+this.data.Text+"</span><span id='"+writeRectId4+"'></span><br class='cl' />"),this.emosAdviceElement="emosWS.DiagnosisLedTextNumber.prototype",hasplcLed=!0,tableValue="<span id='"+number5Id+"'>"+this.value+emosWS.DiagnosisTextNumber.prototype.getUnitSymbol()+"</span>",elemFormat="float";break;case"AddTextIntegerIntegerLong":case"AddTextRealRealLong":case"AddTextIntegerIntegerInputLong":case"AddTextRealRealInputLong":placeholder="<span class='DiagnosisNumberLRTextTextSVG' style='float:none;' id='"+textId+"'>"+this.data.Text+"</span><div style='float:left;margin-right: 55px;'><span style='display: block;' id='"+act+"'>Actual Value</span><span style='display: block;' class='DiagnosisNumberLRTextNumberSVG' id='"+numberId+"' data-value='"+this.numberValue+"'>"+this.numberValue+emosWS.DiagnosisTextNumberNumber.prototype.getUnitSymbol()+"</span></div><form onsubmit='return false' class='textnumnum'><span style='display: block;' id='"+setP+"'>Setpoint</span><span style='display: block; float:left;' class='DiagnosisNumberLRTextNumberSVG textfeld orange' oninput='this.form.amountRange.value=this.value; this.form.preview.value=this.value' id='"+number2Id+"' data-value='"+this.number2Value+"'>"+this.number2Value+emosWS.DiagnosisTextNumberNumber.prototype.getUnitSymbol()+"</span><span id='"+savebuttonId+"' class='savebutton second emosbutton'></span><span id='"+cancelbuttonId+"' class='cancelbutton emosbutton'></span><span id='"+writeRectId5+"' class='writebutton getpad emosbutton'></span><br class='cl'><div class='DiagnosisStringButtons'></form></div>",this.emosAdviceElement="emosWS.DiagnosisTextNumberNumber.prototype",hasplc2=!0,tableValue="<span id='"+number3Id+"' data-value='"+this.number2Value+"'>"+this.number2Value+emosWS.DiagnosisTextNumberNumber.prototype.getUnitSymbol()+"</span>",elemFormat="integer";break;case"AddTextTimerInputLong":case"AddTextSiemensDateInputLong":case"AddTextSiemens_TIME_TimerLong":case"AddTextSiemensTimeInputLong":case"AddTextSiemens_TIME_TimerInputLong":case"AddTextSiemens_S5TIME_TimerInputLong":case"AddTextSiemens_DATE_AND_TIME_TimerInputLong":placeholder="<span class='DiagnosisNumberLRTextTextSVG' id='"+textId+"'>"+this.data.Text+"</span><span id='"+savebuttonId+"' class='savemebutton emosbutton'></span><span id='"+cancelbuttonId+"' class='cancelbutton emosbutton'></span><span id='"+writeRectId2+"' class='writebutton emosbutton'></span><br class='cl'><span id='"+numberId+"' class='pickertime'><span class='pickertime hours orange' id='"+hoursId+"'>"+this.hoursValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime minutes orange' id='"+minutesId+"'>"+this.minutesValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime seconds orange' id='"+secondsId+"'>"+this.secondsValue+"</span></span></div>",this.emosAdviceElement="emosWS.DiagnosisTextTimer.prototype",tableValue="<span id='"+number2Id+"' class='pickertime'><span id='"+hoursId2+"'>"+this.hoursValue+"</span><span>:</span><span id='"+minutesId2+"'>"+this.minutesValue+"</span><span>:</span><span id='"+secondsId2+"'>"+this.secondsValue+"</span></span>",elemFormat="hh:mm:ss","AddTextTimerInputLong"===this.objectType?this.type=timerTypes.Second:"AddTextSiemensDateInputLong"===this.objectType?this.type=timerTypes.SiemensDate:"AddTextSiemensTimeInputLong"===this.objectType?this.type=timerTypes.SiemensTimeOfDay:"AddTextSiemens_TIME_TimerInputLong"===this.objectType?this.type=timerTypes.SiemensTime:"AddTextSiemens_S5TIME_TimerInputLong"===this.objectType?this.type=timerTypes.SiemensS5Time:"AddTextSiemens_DATE_AND_TIME_TimerInputLong"===this.objectType&&(this.type=timerTypes.SiemensDateAndTime),this.setTimerValue()}var addClass;addClass=this.parent.find("tr.compact").length%2===0?"odd":"even",this.panel=$("<tr class='parentsbox priv compact "+addClass+"'><td>"+this.plc+" "+this.data.OPCID+"</td><td>"+elemFormat+"</td><td>"+tableValue+"</td></tr><tr style='display:none;' class='comfort'><td colspan='3'><div class='Groupbox parentsbox priv' id='"+id+"'>"+placeholder+"<br style='clear:both;' /></div></td></tr>"),this.panel[0].myData=this.data,this.panel[0].myKey=this.myKey,this.panel[0].myPrivId=this.myPrivId,this.panel.find(".Groupbox")[0].myData=this.data,this.panel.appendTo(this.parent),this.writeRectId=writeRectId,this.writeRectId2=writeRectId2,this.writeRectId3=writeRectId3,this.writeRectId4=writeRectId4,this.writeRectId5=writeRectId5,this.textId=textId,this.led=document.getElementById(ledId),this.led1=document.getElementById(ledId1),this.text=document.getElementById(textId),this.text1=document.getElementById(textId1),this.writeRect1=document.getElementById(id),this.id=id,this.cancelbutton=document.getElementById(cancelbuttonId),this.savebutton=document.getElementById(savebuttonId),this.number=document.getElementById(numberId),this.number2=document.getElementById(number2Id),this.number3=document.getElementById(number3Id),this.number4=document.getElementById(number4Id),this.number5=document.getElementById(number5Id),this.hours0=document.getElementById(hoursId0),this.minutes0=document.getElementById(minutesId0),this.seconds0=document.getElementById(secondsId0),this.hours=document.getElementById(hoursId),this.minutes=document.getElementById(minutesId),this.seconds=document.getElementById(secondsId),this.hours2=document.getElementById(hoursId2),this.minutes2=document.getElementById(minutesId2),this.seconds2=document.getElementById(secondsId2),this.hours3=document.getElementById(hoursId3),this.minutes3=document.getElementById(minutesId3),this.seconds3=document.getElementById(secondsId3),this.writeRect=document.getElementById(writeRectId),this.writeRect2=document.getElementById(writeRectId2),this.writeRect3=document.getElementById(writeRectId3),this.writeRect4=document.getElementById(writeRectId4),this.writeRect5=document.getElementById(writeRectId5),this.act=act,this.setP=setP,emosWS.advise(this.plctag,eval(this.emosAdviceElement).datachangeListener.bind(this),"",emosWS.tagType.IO),hasplc2&&emosWS.advise(this.plctag2,eval(this.emosAdviceElement).datachange2Listener.bind(this),"",emosWS.tagType.IO),hasplcLed&&emosWS.advise(this.plctagLed,eval(this.emosAdviceElement).datachangeLedListener.bind(this),"",emosWS.tagType.IO),this.getAdviceText(),eval(this.emosAdviceElement).getWritable(this)}catch(a){console.log("adddata init failed: "+a)}},AddDataToSubTab.prototype.updateWrite=function(){eval(this.emosAdviceElement).updateWrite.bind(this)},AddDataToSubTab.prototype.getAdviceText=function(){emosWS.sendAdviseText(this.textPrefixList[this.data.DiagnosisLibID]+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),emosWS.sendAdviseText(this.textPrefixList[this.data.DiagnosisLibID]+"Setpoint","name",function(a){$("#"+this.setP).text(a.value+":")},this),emosWS.sendAdviseText(this.textPrefixList[this.data.DiagnosisLibID]+"ActualValue","name",function(a){$("#"+this.act).text(a.value+":")},this)},emosWS.AddDataToSubTab=AddDataToSubTab;function TopTextLED(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass="DiagnosisTopText",this.plctag=this.plc+"."+this.data.OPCID,this.led=this.border=this.text=null,DiagnosisElement.call(this,{data:b})}TopTextLED.prototype=Object.create(DiagnosisElement.prototype),TopTextLED.prototype.constructor=TopTextLED,TopTextLED.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=this.panel=$("<div class='"+this.positionClass+"' id='"+a+"'><span class='messageCircle orange' id='"+b+"'></span><span id='"+d+"'>"+this.data.Text+"</span></div>");e.appendTo(this.parent),this.led=document.getElementById(b),this.text=document.getElementById(d),this.border=document.getElementById(c),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this)}catch(a){console.log("TopTextLED init failed: "+a)}},TopTextLED.prototype.datachangeListener=function(a){try{var b=GetAsBoolean(a.value),c=colorList[b?this.data.OnLED:this.data.OffLED];this.led.className="messageCircle "+c}catch(a){console.log("TopTextLED datachangeListener failed: "+a)}},emosWS.TopTextLED=TopTextLED;function DiagnosisSetpointRampBar(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LMRLeft,css:"DiagnosisBar"},M:{parent:this.diagnosisWindow.divTypes.LMRMiddle,css:"DiagnosisBar"},R:{parent:this.diagnosisWindow.divTypes.LMRRight,css:"DiagnosisBar"}},this.min=0,this.max=100,this.ymin=2,this.percent0=80,this.plctag=this.plc+"."+this.data.OPCID,this.plctagRamp=this.plc+"."+this.data.OPCRampID,this.visibleOPC=this.plc+"."+this.data.OPCRampVisibleID,this.opcvisible=!0,this.parentDiv=this.numberValue=this.bar=this.lineValue=this.lineValue2=this.lineValueR=this.lineValueR2=this.text=this.number=this.numberR=this.unitText=null,this.unit=emosWS.getUnit(),this.panel=null,this.init()}DiagnosisSetpointRampBar.prototype.getBarValue=function(a){a<this.min?a=this.min:a>this.max&&(a=this.max);var b=this.ymin+(100-(a-this.min)/(this.max-this.min)*100)*this.percent0/100+"%";return b},DiagnosisSetpointRampBar.prototype.getBarDegreeText=function(a){return"- "+(this.min+(this.max-this.min)*a/100)+this.unitText},DiagnosisSetpointRampBar.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},DiagnosisSetpointRampBar.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID(),k=getElementGlobalID(),l=getElementGlobalID(),m=getElementGlobalID(),n=getElementGlobalID(),o=getElementGlobalID(),p=getElementGlobalID(),q=getElementGlobalID();this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent);var r=this.positionClass[this.data.Position];this.unitText=this.getUnitSymbol();var s=this.panel=$("<div class='"+r.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisRampBarTextSVG'><text id='"+e+"' x='50%' y='24px' fill='black' text-anchor='middle' font-weight='bold'>"+this.data.Text+"</text></svg><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisRampBarSVG' id='"+m+"'><rect class='DiagnosisRampBar' id='"+o+"' x='58%' y='"+this.ymin+"%' width='40%' height='"+this.percent0+"%' /><line id='"+p+"' x1='58.5%' y1='15%' x2='97.5%' y2='15%' style='stroke-width:5;stroke:#00FF00'/><line id='"+q+"' x1='58%' y1='15%' x2='98%' y2='15%' style='stroke-width:1;stroke:black'/><rect x='8%' width='90%' height='15' y='87%' style='fill:white;stroke-width:0.5;stroke:grey'/><text id='"+n+"' x='50%' y='93%' text-anchor='right' fill='orange'>"+this.numberValue+"</text></svg><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisRampBarSVG' id='"+b+"'><rect class='DiagnosisRampBar' id='"+d+"' x='1%' y='"+this.ymin+"%' width='40%' height='"+this.percent0+"%' /><line id='"+f+"' x1='1.5%' y1='15%' x2='40.5%' y2='15%' style='stroke-width:5;stroke:yellow'/><line id='"+g+"' x1='1%' y1='15%' x2='41%' y2='15%' style='stroke-width:1;stroke:black'/><rect x='1%' width='90%' height='15' y='87%' style='fill:white;stroke-width:0.5;stroke:grey'/><text id='"+c+"' x='3%' y='93%' text-anchor='left' fill='orange'>"+this.numberValue+"</text><text class='DiagnosisBarDegreeText' id='"+h+"' x='40%' y='83.5%'>"+this.getBarDegreeText(0)+"</text><text class='DiagnosisBarDegreeText' id='"+i+"' x='40%' y='63.5%'>"+this.getBarDegreeText(25)+"</text><text class='DiagnosisBarDegreeText' id='"+j+"' x='40%' y='43.5%'>"+this.getBarDegreeText(50)+"</text><text class='DiagnosisBarDegreeText' id='"+k+"' x='40%' y='23.5%'>"+this.getBarDegreeText(75)+"</text><text class='DiagnosisBarDegreeText' id='"+l+"' x='40%' y='3.5%'>"+this.getBarDegreeText(100)+"</text></svg></div>");s.appendTo(this.parentDiv),this.number=document.getElementById(c),this.numberR=document.getElementById(n),this.text=document.getElementById(e),this.bar=document.getElementById(d),this.lineValue=document.getElementById(f),this.lineValue2=document.getElementById(g),this.lineValueR=document.getElementById(p),this.lineValueR2=document.getElementById(q),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.advise(this.plctagRamp,this.datachangeRampListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),emosWS.advise(this.visibleOPC,function(a){this.opcvisible=GetAsBoolean(a.value),this.setVisibility()}.bind(this),"",emosWS.tagType.IO)}catch(a){console.log("DiagnosisBar init failed: "+a)}},DiagnosisSetpointRampBar.prototype.setVisibility=function(){this.panel.get(0).style.display=this.opcvisible?"block":"none"},DiagnosisSetpointRampBar.prototype.datachangeListener=function(a){try{this.numberValue=GetAsInteger(a.value),this.number.setAttribute("fill","#6c6c6c"),this.number.textContent=this.numberValue+this.getUnitSymbol();var b=this.getBarValue(this.numberValue);this.lineValue.setAttribute("y1",b),this.lineValue.setAttribute("y2",b),this.lineValue2.setAttribute("y1",b),this.lineValue2.setAttribute("y2",b)}catch(a){console.log("DiagnosisSetpointRampBar datachangeListener failed: "+a)}},DiagnosisSetpointRampBar.prototype.datachangeRampListener=function(a){try{var b=GetAsInteger(a.value);this.numberR.setAttribute("fill","#6c6c6c"),this.numberR.textContent=b+this.getUnitSymbol();var c=this.getBarValue(b);this.lineValueR.setAttribute("y1",c),this.lineValueR.setAttribute("y2",c),this.lineValueR2.setAttribute("y1",c),this.lineValueR2.setAttribute("y2",c)}catch(a){console.log("DiagnosisSetpointRampBar datachangeRampListener failed: "+a)}},emosWS.DiagnosisSetpointRampBar=DiagnosisSetpointRampBar;function DiagnosisSetpointBar(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LMRLeft,css:"DiagnosisBar"},M:{parent:this.diagnosisWindow.divTypes.LMRMiddle,css:"DiagnosisBar"},R:{parent:this.diagnosisWindow.divTypes.LMRRight,css:"DiagnosisBar"}},this.min=0,this.max=100,this.ymin=15,this.percent0=67,this.plctag=this.plc+"."+this.data.OPCID,this.parentDiv=this.numberValue=this.bar=this.lineValue=this.lineValue2=this.text=this.number=this.unitText=null,this.unit=emosWS.getUnit(),this.init()}DiagnosisSetpointBar.prototype.getBarValue=function(){
this.numberValue<this.min?this.numberValue=this.min:this.numberValue>this.max&&(this.numberValue=this.max);var a=this.ymin+(100-(this.numberValue-this.min)/(this.max-this.min)*100)*this.percent0/100+"%";return console.log("plctag="+this.plctag+" / bar value % = "+a),a},DiagnosisSetpointBar.prototype.getBarDegreeText=function(a){return"- "+(this.min+(this.max-this.min)*a/100)+this.unitText},DiagnosisSetpointBar.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},DiagnosisSetpointBar.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID(),k=getElementGlobalID();this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent);var l=this.positionClass[this.data.Position];this.unitText=this.getUnitSymbol();var m=$("<div class='"+l.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisBarSVG'><text id='"+d+"' x='50%' y='10%' fill='black' text-anchor='middle' font-weight='bold'>"+this.data.Text+"</text><rect id='"+c+"' x='40%' y='"+this.ymin+"%' width='20%' height='"+this.percent0+"%' style='fill:white;stroke-width:1;stroke:black' /><line id='"+e+"' x1='40.5%' y1='15%' x2='59.5%' y2='15%' style='stroke-width:5;stroke:yellow'/><line id='"+f+"' x1='40%' y1='15%' x2='60%' y2='15%' style='stroke-width:1;stroke:black'/><rect x='20%' width='60%' height='15' y='87%' style='fill:white;stroke-width:0.5;stroke:grey'/><text id='"+b+"' x='50%' y='92%' text-anchor='middle' fill='orange'>"+this.numberValue+"</text><text class='DiagnosisBarDegreeText' id='"+g+"' x='60%' y='83.5%'>"+this.getBarDegreeText(0)+"</text><text class='DiagnosisBarDegreeText' id='"+h+"' x='60%' y='66.75%'>"+this.getBarDegreeText(25)+"</text><text class='DiagnosisBarDegreeText' id='"+i+"' x='60%' y='50%'>"+this.getBarDegreeText(50)+"</text><text class='DiagnosisBarDegreeText' id='"+j+"' x='60%' y='33.25%'>"+this.getBarDegreeText(75)+"</text><text class='DiagnosisBarDegreeText' id='"+k+"' x='60%' y='16.5%'>"+this.getBarDegreeText(100)+"</text></svg></div>");m.appendTo(this.parentDiv),this.number=document.getElementById(b),this.text=document.getElementById(d),this.bar=document.getElementById(c),this.lineValue=document.getElementById(e),this.lineValue2=document.getElementById(f),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this)}catch(a){console.log("DiagnosisBar init failed: "+a)}},DiagnosisSetpointBar.prototype.datachangeListener=function(a){try{this.numberValue=GetAsInteger(a.value),this.number.setAttribute("fill","#6c6c6c"),this.number.textContent=this.numberValue+this.getUnitSymbol();var b=this.getBarValue();this.lineValue.setAttribute("y1",b),this.lineValue.setAttribute("y2",b),this.lineValue2.setAttribute("y1",b),this.lineValue2.setAttribute("y2",b)}catch(a){console.log("TopTextLED datachangeListener failed: "+a)}},emosWS.DiagnosisSetpointBar=DiagnosisSetpointBar;function DiagnosisBar(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LMRLeft,css:"DiagnosisBar"},M:{parent:this.diagnosisWindow.divTypes.LMRMiddle,css:"DiagnosisBar"},R:{parent:this.diagnosisWindow.divTypes.LMRRight,css:"DiagnosisBar"}},this.min=0,this.max=100,this.percent0=67,this.plctag=this.plc+"."+this.data.OPCID,this.parentDiv=this.numberValue=this.bar=this.barValue=this.text=this.number=this.unitText=null,this.unit=emosWS.getUnit(),this.init()}DiagnosisBar.prototype.getBarValue=function(){this.numberValue<this.min?this.numberValue=this.min:this.numberValue>this.max&&(this.numberValue=max);var a=(100-(this.numberValue-this.min)/(this.max-this.min)*100)*this.percent0/100+"%";return a},DiagnosisBar.prototype.getBarDegreeText=function(a){return"- "+(this.min+(this.max-this.min)*a/100)+this.unitText},DiagnosisBar.prototype.getUnitSymbol=function(){switch(this.unit){case emosWS.unitID.Metric:return" "+this.data.UnitMetric;case emosWS.unitID.UnitImperial:return" "+this.data.UnitImperial;case emosWS.unitID.UnitLocale:return" "+this.data.UnitLocale;default:return""}},DiagnosisBar.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID();this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent);var k=this.positionClass[this.data.Position];this.unitText=this.getUnitSymbol();var l=$("<div class='"+k.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisBarSVG'><text id='"+d+"' x='50%' y='10%' fill='black' text-anchor='middle' font-weight='bold'>"+this.data.Text+"</text><rect id='"+c+"' x='40%' y='15%' width='20%' height='67%' style='fill:#293133' /><rect id='"+e+"' x='40%' y='15%' width='20%' height='35%' style='fill:#6c6c6c'/><rect x='20%' width='60%' height='15' y='87%' style='fill:white;stroke-width:0.5;stroke:grey'/><text id='"+b+"' x='50%' y='92%' text-anchor='middle' fill='orange'>"+this.numberValue+"</text><text class='DiagnosisBarDegreeText' id='"+f+"' x='60%' y='83.5%'>"+this.getBarDegreeText(0)+"</text><text class='DiagnosisBarDegreeText' id='"+g+"' x='60%' y='66.75%'>"+this.getBarDegreeText(25)+"</text><text class='DiagnosisBarDegreeText' id='"+h+"' x='60%' y='50%'>"+this.getBarDegreeText(50)+"</text><text class='DiagnosisBarDegreeText' id='"+i+"' x='60%' y='33.25%'>"+this.getBarDegreeText(75)+"</text><text class='DiagnosisBarDegreeText' id='"+j+"' x='60%' y='16.5%'>"+this.getBarDegreeText(100)+"</text></svg></div>");l.appendTo(this.parentDiv),this.number=document.getElementById(b),this.text=document.getElementById(d),this.bar=document.getElementById(c),this.barValue=document.getElementById(e),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this)}catch(a){console.log("DiagnosisBar init failed: "+a)}},DiagnosisBar.prototype.datachangeListener=function(a){try{this.numberValue=GetAsInteger(a.value),this.number.setAttribute("fill","#6c6c6c"),this.number.textContent=this.numberValue+this.getUnitSymbol(),this.barValue.setAttribute("height",this.getBarValue())}catch(a){console.log("TopTextLED datachangeListener failed: "+a)}},emosWS.DiagnosisBar=DiagnosisBar;function DiagnosisSpace(a,b){this.data=b,this.positionClass={L:{parent:a.LRLeft},R:{parent:a.LRRight},Long:{parent:a.LRLong}},this.init()}DiagnosisSpace.prototype.init=function(){try{var a=this.positionClass[this.data.Position],b=$("<div class='DiagnosisSpace'></div>");b.appendTo(a.parent)}catch(a){console.log("DiagnosisSpace init failed: "+a)}},emosWS.DiagnosisSpace=DiagnosisSpace;var valueTypes={Integer:0,Float:1,TimeInSecond:2,TimeInMinute:3,String:4},DiagnosisForm=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;window.addEventListener("load",w,!1);function w(){z()}function x(){switch(b.type){case valueTypes.TimeInSecond:case valueTypes.TimeInMinute:var d=k.val(),e=l.val(),f=m.val(),g=n.val();v=b.value.encode({day:d,hour:e,minute:f,second:g});break;case valueTypes.String:v=u.val();break;default:v=c.val()}emosWS.poke(b.plctag,v),a.dialog("close"),"undefined"!=typeof b.callback&&b.callback(v)}function y(){return a}function z(){try{var b=getElementGlobalID(),d=getElementGlobalID(),v=getElementGlobalID(),w=getElementGlobalID(),y=getElementGlobalID(),z=getElementGlobalID(),A=getElementGlobalID(),B=getElementGlobalID(),C=getElementGlobalID(),D=getElementGlobalID(),E=getElementGlobalID(),F=getElementGlobalID(),G=getElementGlobalID(),H=getElementGlobalID(),I=getElementGlobalID(),J=getElementGlobalID(),K=getElementGlobalID(),L=getElementGlobalID(),M=getElementGlobalID(),N="<div class='vertical controls' id='"+D+"'>   <span id='"+E+"'><input id='"+I+"'>d</span>   <span id='"+F+"'><input id='"+J+"'>h</span>   <span id='"+G+"'><input id='"+K+"'>m</span>   <span id='"+H+"'><input id='"+L+"'>s</span></div>",O="<div class='DiagnosisStringEdit'><textarea rows='4' id='"+M+"'</textarea></div>",P=$("<div id='"+b+"'>   <div class='DiagnosisExtraContent'>       <p id='"+d+"'>plc.tag</p>       <p id='"+v+"'>text</p>   <table style='width:100%; text-align:center'><tr>       <td id='"+w+"'>Min</td>       <td>..............</td>       <td id='"+y+"'>.</td>       <td>..............</td>       <td id='"+z+"'>Max</td>   <tr></table>   </div>   <form>       <div class='DiagnosisDatePickerContainer'>           <div class='DiagnosisDatePickerCenter'>               <span id='"+C+"'>                   <input name='numberValue' id='"+A+"' value='0'>                   <label id='"+B+"'>unit</label>               </span>"+N+"           </div>       </div>"+O+"       <input type='submit' tabindex='-1' style='position:absolute; top:-1000px'>   </form></div>");$("body").append(P),a=$("#"+b).dialog({modal:!0,autoOpen:!1,width:350,title:"Input dialog",buttons:{Cancel:function(){a.dialog("close")},OK:x},close:function(){Q[0].reset()}}),c=$("#"+A).spinner(),e=$("#"+B),f=$("#"+w),g=$("#"+y),h=$("#"+z),i=$("#"+d),j=$("#"+v),k=$("#"+I).spinner({min:0,step:1,start:1}),l=$("#"+J).spinner({min:0,max:23,step:1,start:1}),m=$("#"+K).spinner({min:0,max:59,step:1,start:0}),n=$("#"+L).spinner({min:0,max:59,step:1,start:0}),p=$("#"+D),q=$("#"+E),r=$("#"+F),s=$("#"+G),t=$("#"+H),o=$("#"+C),u=$("#"+M);var Q=a.find("form").on("submit",function(a){a.preventDefault(),x()})}catch(a){console.log("appendFormNumber failed: "+a)}}function A(c){switch(b=c,I(),B(),b.type){case valueTypes.TimeInSecond:F(),G(),H(),g.text("s"),a.dialog("open");break;case valueTypes.TimeInMinute:E(),F(),G(),g.text("m"),a.dialog("open");break;case valueTypes.String:D(),a.dialog("open");break;default:C(),a.dialog("open")}}function B(){i.text(b.plctag),j.text(b.text),f.text("[  "+b.min),h.text(b.max+"  ]")}function C(){c.spinner("option","min",b.min),c.spinner("option","max",b.max),c.spinner("option","step",Math.pow(10,-1*(b.precision||0))),c.val(b.value),e.text(b.unit),o.show()}function D(){u.val(b.value),u.show()}function E(){q.show();var a=b.value.data;k.val(a.day)}function F(){r.show();var a=b.value.data;l.val(a.hour)}function G(){s.show();var a=b.value.data;m.val(a.minute)}function H(){t.show();var a=b.value.data;n.val(a.second)}function I(){o.hide(),q.hide(),r.hide(),s.hide(),t.hide(),u.hide(),g.text(".")}return{open:A,getFormNumberDialog:y}}(),DiagnosisDateForm=function(){var a,b,c,d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g,h,i,j,k,l,m,n,o,p,q;window.addEventListener("load",r,!1);function r(){u()}function s(){console.log("Value is changed");var d=g.datepicker("getDate"),e=d.getFullYear(),f=d.getMonth()+1,h=d.getDate(),n=i.val(),o=j.val(),p=k.val(),q=l.val(),r=m.val(),s=c.encode({year:e,month:f,day:h,days:n,hour:o,minute:p,second:q,ms:r});emosWS.poke(b.plctag,s),a.dialog("close"),"undefined"!=typeof b.callback&&b.callback(c)}function t(){return a}function u(){try{var b=getElementGlobalID(),c=getElementGlobalID(),r=getElementGlobalID(),t=getElementGlobalID(),u=getElementGlobalID(),v=getElementGlobalID(),w=getElementGlobalID(),x=getElementGlobalID(),y=getElementGlobalID(),z="<div id='"+e+"'></div>",A="<div class='vertical controls' id='"+x+"'>   <span id='"+b+"'><input id='"+c+"'>d</span>   <input id='"+r+"'>h   <input id='"+t+"'>m   <input id='"+u+"'>s   <span id='"+w+"'><input style='width: 2em' id='"+v+"'>ms</span></div>",B=$("<div id='"+d+"'>   <div class='DiagnosisExtraContent'>       <p id='"+f+"'>plc.tag</p>       <p id='"+y+"'>Adjust Date</p>   </div>   <form><div class='DiagnosisDatePickerContainer'>   <div class='DiagnosisDatePickerCenter'>"+z+A+"   </div></div>           <input type='submit' tabindex='-1' style='position:absolute; top:-1000px'>   </form></div>");$("body").append(B),a=$("#"+d).dialog({modal:!0,autoOpen:!1,width:400,title:"Input dialog",buttons:{Cancel:function(){a.dialog("close")},OK:s},close:function(){}}),g=$("#"+e).datepicker({changeMonth:!0,changeYear:!0}),g.datepicker("option","firstDay",1),g.datepicker("option","yearRange","0:3000"),p=$("#"+b),i=$("#"+c).spinner({min:0,step:1,start:1}),j=$("#"+r).spinner({min:0,max:23,step:1,start:1}),k=$("#"+t).spinner({min:0,max:59,step:1,start:0}),l=$("#"+u).spinner({min:0,max:59,step:1,start:0}),m=$("#"+v).spinner({min:0,max:999,step:1,start:0}),q=$("#"+w),o=$("#"+x),h=$("#"+f),n=$("#"+y);var C=a.find("form").on("submit",function(a){a.preventDefault(),s()})}catch(a){console.log("appendFormNumber failed: "+a)}}function v(d){switch(b=d,c=b.value,h.text(b.plctag),w(),c.constructor){case DiagnosisTimerSiemensDate:x(),n.text("Adjust date (Simens DATE):"),a.dialog("open");break;case DiagnosisTimerSiemensTimeOfDate:n.text("Adjust time (Simens TIME_OF_DAY):"),y(),a.dialog("open");break;case DiagnosisTimerSiemensTime:n.text("Adjust time (Simens TIME):"),z(),y(),A(),a.dialog("open");break;case DiagnosisTimerSiemensS5Time:n.text("Adjust time (Simens S5TIME):"),y(),A(),a.dialog("open");break;case DiagnosisTimerSiemensDateAndTime:n.text("Adjust date and time (Simens DATE/HND_TIME):"),x(),y(),a.dialog("open")}}function w(){g.hide(),p.hide(),o.hide(),q.hide()}function x(){g.show();var a=c.data,b=new Date(a.year,a.month-1,a.day);g.datepicker("setDate",b)}function y(){o.show();var a=c.data;j.val(a.hour),k.val(a.minute),l.val(a.second)}function z(){p.show();var a=c.data;i.val(a.day)}function A(){q.show();var a=c.data;m.val(a.ms)}return{open:v,getDialog:t}}();function DiagnosisTextTimer(a,b,c,d,e,f,g){this.parent=a,this.data=b,this.plc=c,this.type=d,this.writable=e,this.myKey=g,this.diagnosisWindow=f,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisTextTimer parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",Number2X:"99%",Number2Y:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisTextTimer parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",Number2X:"99%",Number2Y:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextTimer parentsbox",BorderWidth:"97.5%",WriteRectWidth:"25%",RectX:"47%",WriteRectX:"72.5%",TextX:"5",TextY:"15",Number2X:"97%",Number2Y:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.border=this.text=this.number=this.writeRect2=this.numberValue=this.timerValue=null,this.numberColor=this.writable?"#76a0b5":"black",this.myMobiscroll=null,this.type===timerTypes.Second?(this.plcBase=this.data.Base||"s",this.visuBase=this.data.VisuBase||"s"):this.plcBase=this.visuBase=null,DiagnosisElement.call(this,{data:b,writable:e})}DiagnosisTextTimer.prototype=Object.create(DiagnosisElement.prototype),DiagnosisTextTimer.prototype.constructor=DiagnosisTextTimer,DiagnosisTextTimer.prototype.setTimerValue=function(){switch(this.type){case timerTypes.Second:this.timerValue=new DiagnosisTimerSecond(0,this.plcBase,this.visuBase);break;case timerTypes.Minute:this.timerValue=new DiagnosisTimerMinute;break;case timerTypes.SiemensDate:this.timerValue=new DiagnosisTimerSiemensDate;break;case timerTypes.SiemensTimeOfDay:this.timerValue=new DiagnosisTimerSiemensTimeOfDate;break;case timerTypes.SiemensTime:this.timerValue=new DiagnosisTimerSiemensTime;break;case timerTypes.SiemensS5Time:this.timerValue=new DiagnosisTimerSiemensS5Time;break;case timerTypes.SiemensDateAndTime:this.timerValue=new DiagnosisTimerSiemensDateAndTime;break;default:this.timerValue=new DiagnosisTimer}},DiagnosisTextTimer.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=this.positionClass[this.data.Position],g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID(),k=getElementGlobalID();this.setTimerValue();var l=this.panel=$("<div class='"+f.css+"' id='"+a+"'><span class='DiagnosisNumberLRTextTextSVG' id='"+d+"'>"+this.data.Text+"</span><span id='"+k+"' class='savemebutton emosbutton'></span><span id='"+j+"' class='cancelbutton emosbutton'></span><span id='"+e+"' class='writebutton emosbutton'></span><br class='cl'><span id='"+b+"' class='pickertime myPicker'><span class='pickertime hours orange' id='"+g+"'>"+this.hoursValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime minutes orange' id='"+h+"'>"+this.minutesValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime seconds orange' id='"+i+"'>"+this.secondsValue+"</span></span></div></div>");l[0].myData=this.data,l[0].myKey=this.myKey,l[0].myPlc=this.plctag,l[0].myType=this.type,$(this.parentDiv)[0].myData=this.data,l.appendTo(this.parentDiv),this.number=document.getElementById(b),this.text=document.getElementById(d),this.border=document.getElementById(c),this.writeRect2=document.getElementById(e),this.cancelbutton=document.getElementById(j),this.savebutton=document.getElementById(k),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.getWritable(this)}catch(a){console.log("DiagnosisTextTimer init failed: "+a)}},DiagnosisTextTimer.prototype.getWritable=function(a){a.writable&&(a.writeRect2.style.cursor="pointer",a.writeRect2.style.display="block",a.writeRect2.addEventListener("click",DiagnosisTextTimer.prototype.onClick.bind(a)),a.cancelbutton.addEventListener("click",DiagnosisTextTimer.prototype.onButtonCancel.bind(a)),a.savebutton.addEventListener("click",DiagnosisTextTimer.prototype.onButtonSave.bind(a)))},DiagnosisTextTimer.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect2.style.cursor="pointer",this.writeRect2.style.pointerEvents="auto",this.writeRect2.style.display="block",this.number.style.color=this.numberColor="#76a0b5"):(this.writeRect2.style.cursor="auto",this.writeRect2.style.pointerEvents="none",this.number.style.color=this.numberColor="black",this.writeRect2.style.display="none")},DiagnosisTextTimer.prototype.onButtonSave=function(a){var b,c,d,e;if(a.length?(c=a,c.type=a[0].myType,d=a.find(".myPicker"),e=a[0].myPlc,c.writeRect2=document.getElementById(c.find(".writebutton").attr("id")),c.cancelbutton=document.getElementById(c.find(".cancelbutton").attr("id")),c.savebutton=document.getElementById(c.find(".savemebutton").attr("id"))):(d=this.myMobiscroll,e=this.plctag,c=this),3===c.type){var f=d.mobiscroll("getVal",!0).getFullYear(),g=d.mobiscroll("getVal",!0).getMonth()+1,h=d.mobiscroll("getVal",!0).getDate();b=f+"-"+g+"-"+h}else if(4===c.type){var i=d.mobiscroll("getVal",!0).getHours(),j=d.mobiscroll("getVal",!0).getMinutes(),k=d.mobiscroll("getVal",!0).getSeconds();k=k.toFixed(1),b=i+":"+j+":"+k}else if(5===c.type){var l=d.mobiscroll("getVal",!0).split(" ");b=l[0]+"D"+l[1]+"H"+l[2]+"M"+l[3]+"S"+l[4]+"MS"}else if(6===c.type){var l=d.mobiscroll("getVal",!0).split(" ");b=l[0]+"H"+l[1]+"M"+l[2]+"S"+l[3]+"MS"}else if(7===c.type){var f=d.mobiscroll("getVal",!0).getFullYear(),g=d.mobiscroll("getVal",!0).getMonth()+1,h=d.mobiscroll("getVal",!0).getDate(),i=d.mobiscroll("getVal",!0).getHours(),j=d.mobiscroll("getVal",!0).getMinutes(),k=d.mobiscroll("getVal",!0).getSeconds();k=k.toFixed(1),b=f+"-"+g+"-"+h+"-"+i+":"+j+":"+k}else b="s"===this.visuBase?this.timerValue.encode({hour:d.mobiscroll("getVal",!0).getHours(),minute:d.mobiscroll("getVal",!0).getMinutes(),second:d.mobiscroll("getVal",!0).getSeconds()}):this.timerValue.encode({minute:d.mobiscroll("getVal",!0).getHours(),second:d.mobiscroll("getVal",!0).getMinutes(),msecond:d.mobiscroll("getVal",!0).getSeconds()});emosWS.poke(e,b),d.mobiscroll("destroy"),c.writeRect2.style.display="block",c.cancelbutton.style.display="none",c.savebutton.style.display="none"},DiagnosisTextTimer.prototype.onButtonCancel=function(){this.myMobiscroll.mobiscroll("destroy"),this.writeRect2.style.display="block",this.cancelbutton.style.display="none",this.savebutton.style.display="none"},DiagnosisTextTimer.prototype.onClick=function(a){var b,c,d,e,f,g,h,i,j="HHiiss";switch(console.log(this.type),this.type){case timerTypes.Second:b=this.timerValue,"s"===this.visuBase?(d=this.timerValue.data.hour,e=this.timerValue.data.minute,f=this.timerValue.data.second):(d=this.timerValue.data.minute,e=this.timerValue.data.second,f=this.timerValue.data.msecond),h=this.data.IntTimeMin,i=this.data.IntTimeMax;break;case timerTypes.SiemensDate:case timerTypes.SiemensTimeOfDay:case timerTypes.SiemensDateAndTime:case timerTypes.SiemensS5Time:case timerTypes.SiemensTime:b=this.timerValue,c=this.timerValue.data.day,d=this.timerValue.data.hour,e=this.timerValue.data.minute,f=this.timerValue.data.second,g=this.timerValue.data.ms,h=this.data.IntTimeMin,i=this.data.IntTimeMax;break;default:console.log("default")}self=a.target,$("#"+$(this)[0].id).siblings().children(".dw-inline").length&&($("#"+$(this)[0].id).siblings().animate({height:"45px"}),setTimeout(function(){$("#"+$(this)[0].id).siblings().children("myTime").mobiscroll("destroy")},400));var k=$(self).position().top,l=$(self).closest(".dPage").scrollTop();this.writeRect2.style.display="none",this.cancelbutton.style.display="block",this.savebutton.style.display="block",$(self).closest(".dPage").animate({scrollTop:k+l-21});var m=[];m.push(d),m.push(e),m.push(f);var n=Math.floor(i/3600)>0?Math.floor(i/3600):"00";n=n>=24?23:n;var o=(i-3600*n)/60>0?Math.floor((i-3600*n)/60):0;o=60===o?59:o;var p=i-3600*n-60*o;p=60===p?59:p;var q=n+":"+o+":"+p,r=new Date(b.data.year,b.data.month-1,b.data.day,b.data.hour,b.data.minute,b.data.second);if(3===this.type){var s=this.timerValue.data.month-1;m=new Date(this.timerValue.data.year,s,this.timerValue.data.day),this.myMobiscroll=$("#"+this.number.id).mobiscroll().date({theme:"wp",mode:"mixed",display:"inline",lang:"de",scrollLock:!1,dateOrder:"ddmmyy",dateFormat:"dd/mm/yy",minDate:m,maxDate:new Date(2030,11,31),showLabel:!1}).mobiscroll("setValue",m)}else 5===this.type?(m=[],m.push(c),m.push(d),m.push(e),m.push(f),m.push(g),this.myMobiscroll=$("#"+this.number.id).mobiscroll().scroller({theme:"wp",mode:"mixed",display:"inline",lang:"de",scrollLock:!1,cssClass:"longtype",wheels:[[{label:"day",keys:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]},{label:"hrs",keys:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]},{label:"min",keys:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]},{label:"sec",keys:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]},{label:"ms",keys:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]}]]}).mobiscroll("setValue",m)):6===this.type?(m=[],m.push(d),m.push(e),m.push(f),m.push(g),this.myMobiscroll=$("#"+this.number.id).mobiscroll().scroller({theme:"wp",mode:"mixed",display:"inline",lang:"de",scrollLock:!1,cssClass:"longtype",wheels:[[{label:"hrs",keys:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]},{label:"min",keys:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]},{label:"sec",keys:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]},{label:"ms",keys:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59]}]]}).mobiscroll("setValue",m)):7===this.type?this.myMobiscroll=$("#"+this.number.id).mobiscroll().datetime({theme:"wp",mode:"mixed",display:"inline",lang:"de",scrollLock:!1,dateOrder:"ddmmyy",dateFormat:"dd/mm/yy",timeFormat:"HH:ii:ss",timeWheels:j,maxDate:new Date(2030,11,31),showLabel:!1}).mobiscroll("setValue",r):this.myMobiscroll=$("#"+this.number.id).mobiscroll().time({theme:"wp",mode:"mixed",display:"inline",lang:"de",scrollLock:!1,timeFormat:"HH:ii:ss",timeWheels:j,minDate:new Date((new Date).setHours(0,0,0,0)),maxDate:new Date((new Date).setHours(n,o,p,0)),showLabel:!1}).mobiscroll("setValue",m)},DiagnosisTextTimer.prototype.datachangeListener=function(a){try{this.number.style.color=this.numberColor,this.timerValue.setValue(a.value),this.number.textContent=this.timerValue.toString(),this.number2&&(this.number2.textContent=this.timerValue.toString())}catch(a){console.log("datachangeListener datachangeListener failed: "+a)}},emosWS.DiagnosisTextTimer=DiagnosisTextTimer;function DiagnosisTextDoubleTimer(a,b,c,d,e,f,g){this.parent=a,this.data=b,this.plc=c,this.valueInSecond=d,this.writable=e,this.diagnosisWindow=f,this.myKey=g,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.Groupbox,css:"DiagnosisTextDoubleTimer parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"50%",NumberY:"15",Number2X:"99%",Number2Y:"15"},R:{parent:this.diagnosisWindow.divTypes.Groupbox,css:"DiagnosisTextDoubleTimer parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"50%",NumberY:"15",Number2X:"99%",Number2Y:"15"},Long:{parent:this.diagnosisWindow.divTypes.DiagnosisLong,css:"DiagnosisTextDoubleTimer parentsbox",BorderWidth:"72%",WriteRectWidth:"25%",RectX:"47%",WriteRectX:"72.5%",TextX:"5",TextY:"15",NumberX:"71.5%",NumberY:"15",Number2X:"97%",Number2Y:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.plctag2=this.plc+"."+this.data.OPCID2,this.border=this.text=this.number=this.number2=this.rect=this.writeRect=this.numberValue=this.number2Value=this.timerValue=null,this.hoursValue=this.minutesValue=this.secondsValue=null,this.numberColor=this.writable?"#76a0b5":"black",this.id=null,this.myMobiscroll=null,d?(this.plcBase=this.data.Base||"s",this.visuBase=this.data.VisuBase||"s"):this.plcBase=this.visuBase=null,DiagnosisElement.call(this,{data:b,writable:e})}DiagnosisTextDoubleTimer.prototype=Object.create(DiagnosisElement.prototype),DiagnosisTextDoubleTimer.prototype.constructor=DiagnosisTextDoubleTimer,DiagnosisTextDoubleTimer.prototype.setTimerValue=function(){this.timerValue=this.valueInSecond?new DiagnosisTimerSecond(0,this.plcBase,this.visuBase):new DiagnosisTimerMinute},DiagnosisTextDoubleTimer.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID(),k=getElementGlobalID(),l=getElementGlobalID(),m=getElementGlobalID(),n=getElementGlobalID(),o=this.positionClass[this.data.Position],p=getElementGlobalID(),q=getElementGlobalID();this.id=a,this.setTimerValue();var r=this.panel=$("<div class='"+o.css+"' id='"+a+"'><span class='DiagnosisNumberLRTextTextSVG' id='"+k+"'>"+this.data.Text+"</span><span id='"+n+"' class='savemebutton emosbutton'></span><span id='"+m+"' class='cancelbutton emosbutton'></span><span id='"+l+"' class='writebutton emosbutton'></span><br class='cl'><div class='grey'><span class='pickertext' id='"+p+"'>Actual Value</span><span class='pickertime' id='"+b+"'><span class='pickertime hours orange' id='"+d+"'>"+this.hoursValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime minutes orange' id='"+e+"'>"+this.minutesValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime seconds orange' id='"+f+"'>"+this.secondsValue+"</span></span></div><div class='timesetter' style='padding: 3px;'><span class='pickertext' id='"+q+"'>Setpoint</span><span id='"+c+"' class='pickertime myPicker'><span class='pickertime hours orange' id='"+g+"'>"+this.hoursValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime minutes orange' id='"+h+"'>"+this.minutesValue+"</span><span class='doppelpunkt'>:</span><span class='pickertime seconds orange' id='"+i+"'>"+this.secondsValue+"</span></span></div></div>");r[0].myData=this.data,r[0].myKey=this.myKey,r[0].myPlc=this.plctag2,r[0].valueInSecond=this.valueInSecond,$(this.parentDiv)[0].myData=this.data,r.appendTo(this.parentDiv),this.number=document.getElementById(b),this.number2=document.getElementById(c),this.hours0=document.getElementById(d),this.minutes0=document.getElementById(e),this.seconds0=document.getElementById(f),this.hours=document.getElementById(g),this.minutes=document.getElementById(h),this.seconds=document.getElementById(i),this.text=document.getElementById(k),this.border=document.getElementById(j),this.writeRect2=document.getElementById(l),this.cancelbutton=document.getElementById(m),this.savebutton=document.getElementById(n),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.advise(this.plctag2,this.datachange2Listener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+"Setpoint","name",function(a){$("#"+q).text(a.value+":")}),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+"ActualValue","name",function(a){$("#"+p).text(a.value+":")}),this.getWritable(this)}catch(a){console.log("DiagnosisTextDoubleTimer init failed: "+a)}},DiagnosisTextDoubleTimer.prototype.getWritable=function(a){a.writable&&(a.writeRect2.style.cursor="pointer",a.writeRect2.style.display="block",a.writeRect2.addEventListener("click",DiagnosisTextDoubleTimer.prototype.onClick.bind(a)),a.cancelbutton.addEventListener("click",DiagnosisTextDoubleTimer.prototype.onButtonCancel.bind(a)),
a.savebutton.addEventListener("click",DiagnosisTextDoubleTimer.prototype.onButtonSave.bind(a)))},DiagnosisTextDoubleTimer.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect2.style.cursor="pointer",this.writeRect2.style.pointerEvents="auto",this.writeRect2.style.display="block",$(".timesetter").css("color","#76a0b5")):(this.writeRect2.style.cursor="auto",this.writeRect2.style.pointerEvents="none",this.writeRect2.style.display="none",$(".timesetter").css("color","black"))},DiagnosisTextDoubleTimer.prototype.onButtonSave=function(a){var b,c,d;a.length?(b=a,c=a.find(".myPicker"),d=a[0].myPlc,b.valueInSecond=a[0].valueInSecond,b.writeRect2=document.getElementById(b.find(".writebutton").attr("id")),b.cancelbutton=document.getElementById(b.find(".cancelbutton").attr("id")),b.savebutton=document.getElementById(b.find(".savemebutton").attr("id"))):(c=this.myMobiscroll,d=this.plctag2,b=this);var e=c.mobiscroll("getVal",!0).getHours(),f=c.mobiscroll("getVal",!0).getMinutes(),g=c.mobiscroll("getVal",!0).getSeconds(),h;h=b.valueInSecond?"s"===this.visuBase?this.timerValue.encode({hour:e,minute:f,second:g}):this.timerValue.encode({minute:e,second:f,msecond:g}):this.timerValue.encode({day:e,hour:f,second:g}),emosWS.poke(d,h),c.mobiscroll("destroy"),b.writeRect2.style.display="block",b.cancelbutton.style.display="none",b.savebutton.style.display="none"},DiagnosisTextDoubleTimer.prototype.onButtonCancel=function(){this.myMobiscroll.mobiscroll("destroy"),this.writeRect2.style.display="block",this.cancelbutton.style.display="none",this.savebutton.style.display="none"},DiagnosisTextDoubleTimer.prototype.onClick=function(a){self=a.target,$("#"+$(this)[0].id).siblings().children(".dw-inline").length&&($("#"+$(this)[0].id).siblings().animate({height:"45px"}),setTimeout(function(){$("#"+$(this)[0].id).siblings().children("myTime").mobiscroll("destroy")},400));var b=$(self).position().top,c=$(self).closest(".dPage").scrollTop();this.writeRect2.style.display="none",this.cancelbutton.style.display="block",this.savebutton.style.display="block",$(self).closest(".dPage").animate({scrollTop:b+c-21});var d=this.timerValue.data.hour,e=this.timerValue.data.minute,f=this.timerValue.data.second,g=[];this.valueInSecond?"s"===this.visuBase?(g.push(this.timerValue.data.hour),g.push(this.timerValue.data.minute),g.push(this.timerValue.data.second)):(g.push(this.timerValue.data.minute),g.push(this.timerValue.data.second),g.push(this.timerValue.data.msecond)):(g.push(this.timerValue.data.day),g.push(this.timerValue.data.hour),g.push(this.timerValue.data.minute));var h=this.data.IntTimeMin,i=this.data.IntTimeMax,j="HHiiss",k=Math.floor(i/3600)>0?Math.floor(i/3600):"00";k=k>=24?23:k;var l=(i-3600*k)/60>0?Math.floor((i-3600*k)/60):0;l=60===l?59:l;var m=i-3600*k-60*l;m=60===m?59:m;var n=k+":"+l+":"+m,o=this.plctag2;this.myMobiscroll=$("#"+this.number2.id).mobiscroll().time({theme:"wp",mode:"mixed",display:"inline",lang:"de",scrollLock:!1,timeWheels:j,minDate:new Date((new Date).setHours(0,0,0,0)),maxDate:new Date((new Date).setHours(k,l,m,0)),showLabel:!1}).mobiscroll("setValue",g)},DiagnosisTextDoubleTimer.prototype.datachangeListener=function(a){try{$(".pickertime").removeClass("orange"),this.timerValue.setValue(a.value),this.valueInSecond?"s"===this.visuBase?(this.hours0.textContent=(this.timerValue.data.hour<10?"0"+this.timerValue.data.hour:this.timerValue.data.hour)+" h",this.minutes0.textContent=(this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute)+" m",this.seconds0.textContent=(this.timerValue.data.second<10?"0"+this.timerValue.data.second:this.timerValue.data.second)+" s",this.seconds3&&(this.hours3.textContent=this.timerValue.data.hour<10?"0"+this.timerValue.data.hour:this.timerValue.data.hour,this.minutes3.textContent=this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute,this.seconds3.textContent=this.timerValue.data.second<10?"0"+this.timerValue.data.second:this.timerValue.data.second)):(this.hours0.textContent=(this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute)+" m",this.minutes0.textContent=(this.timerValue.data.second<10?"0"+this.timerValue.data.second:this.timerValue.data.second)+" s",this.seconds0.textContent=(this.timerValue.data.msecond<10?"0"+this.timerValue.data.msecond:this.timerValue.data.msecond)+" ms",this.seconds3&&(this.hours3.textContent=this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute,this.minutes3.textContent=this.timerValue.data.second<10?"0"+this.timerValue.data.second:this.timerValue.data.second,this.seconds3.textContent=this.timerValue.data.msecond<10?"0"+this.timerValue.data.msecond:this.timerValue.data.msecond)):(this.hours0.textContent=(this.timerValue.data.day<10?"0"+this.timerValue.data.day:this.timerValue.data.day)+" d",this.minutes0.textContent=(this.timerValue.data.hour<10?"0"+this.timerValue.data.hour:this.timerValue.data.hour)+" h",this.seconds0.textContent=(this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute)+" m",this.seconds3&&(this.hours3.textContent=this.timerValue.data.day<10?"0"+this.timerValue.data.day:this.timerValue.data.day,this.minutes3.textContent=this.timerValue.data.hour<10?"0"+this.timerValue.data.hour:this.timerValue.data.hour,this.seconds3.textContent=this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute))}catch(a){console.log("DiagnosisTextDoubleTimer datachangeListener failed: "+a)}},DiagnosisTextDoubleTimer.prototype.datachange2Listener=function(a){try{this.timerValue.setValue(a.value);var b=[];this.valueInSecond?"s"===this.visuBase?(this.hours.textContent=(this.timerValue.data.hour<10?"0"+this.timerValue.data.hour:this.timerValue.data.hour)+" h",this.minutes.textContent=(this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute)+" m",this.seconds.textContent=(this.timerValue.data.second<10?"0"+this.timerValue.data.second:this.timerValue.data.second)+" s",this.seconds2&&(this.hours2.textContent=this.timerValue.data.hour<10?"0"+this.timerValue.data.hour:this.timerValue.data.hour,this.minutes2.textContent=this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute,this.seconds2.textContent=this.timerValue.data.second<10?"0"+this.timerValue.data.second:this.timerValue.data.second),b=[this.timerValue.data.hour,this.timerValue.data.minute,this.timerValue.data.second]):(this.hours.textContent=(this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute)+" m",this.minutes.textContent=(this.timerValue.data.second<10?"0"+this.timerValue.data.second:this.timerValue.data.second)+" s",this.seconds.textContent=(this.timerValue.data.msecond<10?"0"+this.timerValue.data.msecond:this.timerValue.data.msecond)+" ms",this.seconds2&&(this.hours2.textContent=this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute,this.minutes2.textContent=this.timerValue.data.second<10?"0"+this.timerValue.data.second:this.timerValue.data.second,this.seconds2.textContent=this.timerValue.data.msecond<10?"0"+this.timerValue.data.msecond:this.timerValue.data.msecond),b=[this.timerValue.data.minute,this.timerValue.data.second,this.timerValue.data.msecond]):(this.hours.textContent=(this.timerValue.data.day<10?"0"+this.timerValue.data.day:this.timerValue.data.day)+" d",this.minutes.textContent=(this.timerValue.data.hour<10?"0"+this.timerValue.data.hour:this.timerValue.data.hour)+" h",this.seconds.textContent=(this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute)+" m",this.seconds2&&(this.hours2.textContent=this.timerValue.data.day<10?"0"+this.timerValue.data.day:this.timerValue.data.day,this.minutes2.textContent=this.timerValue.data.hour<10?"0"+this.timerValue.data.hour:this.timerValue.data.hour,this.seconds2.textContent=this.timerValue.data.minute<10?"0"+this.timerValue.data.minute:this.timerValue.data.minute),b=[this.timerValue.data.day,this.timerValue.data.hour,this.timerValue.data.minute]),$("#"+this.writeRect2.id).mobiscroll("setValue",b)}catch(a){console.log("DiagnosisTextDoubleTimer datachange2Listener failed: "+a)}},emosWS.DiagnosisTextDoubleTimer=DiagnosisTextDoubleTimer;function DiagnosisTextNumber(a,b,c,d,e,f){this.parent=a,this.data=b,this.plc=c,this.writable=d,this.diagnosisWindow=e,this.myKey=f,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisTextInteger parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisTextInteger parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextInteger parentsbox",BorderWidth:"97.5%",WriteRectWidth:"25%",WriteRectX:"72.5%",TextX:"5",TextY:"15",NumberX:"96.5%",NumberY:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.numberValue=this.border=this.text=this.number=this.writeRect3=0,this.unit=emosWS.getUnit(),this.numberColor=this.writable?"#76a0b5":"black",this.sliderId=null,this.oldTextVal=0,this.inputfield=!1,this.IOObject=null,DiagnosisElement.call(this,{data:b,writable:d})}DiagnosisTextNumber.prototype=Object.create(DiagnosisElement.prototype),DiagnosisTextNumber.prototype.constructor=DiagnosisTextNumber,DiagnosisTextNumber.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=this.positionClass[this.data.Position],g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j="";this.inputfield=!0,j="<form onsubmit='return false'><span class='DiagnosisNumberLRTextNumberSVG textfeld orange' oninput='this.form.amountRange.value=this.value; this.form.preview.value=this.value' id='"+b+"' data-value='"+this.numberValue+"'>"+this.numberValue+"</span><div class='DiagnosisStringButtons'></form></div>";var k=this.panel=$("<div class='"+f.css+"' id='"+a+"'><span class='DiagnosisNumberLRTextTextSVG textfeld' id='"+d+"'>"+this.data.Text+"</span><span id='"+h+"' class='savebutton emosbutton'></span><span id='"+g+"' class='cancelbutton emosbutton'></span><span id='"+e+"' class='writebutton getpad emosbutton'></span><br class='cl'>"+j+"</div>");k[0].myData=this.data,k[0].myKey=this.myKey,k[0].poke=this.poke.bind(this),k.appendTo(this.parentDiv),$(this.parentDiv)[0].myData=this.data,this.number=document.getElementById(b),this.text=document.getElementById(d),this.border=document.getElementById(c),this.writeRect3=document.getElementById(e),this.cancelbutton=document.getElementById(g),this.savebutton=document.getElementById(h),this.holder=document.getElementById(i),this.IOObject=emosWS.advise(this.plctag,this.datachangeListenerB.bind(this),"",emosWS.tagType.IOObject,this.data.UnitMetric,1,this.data.UnitImperial,1,this.data.UnitLocale,1,this.data.UnitInit,this.data.Precision),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.getWritable(this)}catch(a){console.error("DiagnosisTextNumber init failed: "+a)}},DiagnosisTextNumber.prototype.poke=function(a){this.IOObject.setValue(a)},DiagnosisTextNumber.prototype.getWritable=function(a){a.writable?(a.writeRect3.style.cursor="pointer",a.number.setAttribute("pointer-events","none"),a.writeRect3.addEventListener("click",this.onClick.bind(a)),this.writable=a.writable,this.writeRect3=a.writeRect3,this.cancelbutton=a.cancelbutton,this.savebutton=a.savebutton,this.writeRectId3=a.writeRectId3,this.number=a.number,this.updateWrite()):$("#"+a.number.id).addClass("notwritable")},DiagnosisTextNumber.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect3.style.cursor="pointer",this.writeRect3.style.pointerEvents="auto",this.writeRect3.style.display="block",this.number.style.color="#76a0b5"):(this.writeRect3.style.cursor="auto",this.writeRect3.style.pointerEvents="none",$("#"+this.number.id).addClass("notwritable"),this.writeRect3.style.display="none",this.number.style.color="black")},DiagnosisTextNumber.prototype.onClick=function(){this.writeRect3.style.display="none",this.cancelbutton.style.display="block",this.savebutton.style.display="block"},DiagnosisTextNumber.prototype.datachangeListenerB=function(a){try{var b=a.value;$(".textfeld").removeClass("orange"),this.numberValue=b.value,this.number.textContent=this.numberValue+this.getUnitSymbol(),$("#"+this.number.id).attr("data-value",this.numberValue),this.inputfield&&(this.number.value=this.writeRect3.value=this.number.textContent,this.oldTextVal=this.number.value),this.number4&&(this.number4.textContent=this.numberValue+this.getUnitSymbol()),this.setInputRange(b.properties,this.data)}catch(a){console.error("DiagnosisTextNumber datachangeListenerB failed: "+a)}},DiagnosisTextNumber.prototype.datachangeListener=function(a){try{this.msg=a,$(".textfeld").removeClass("orange"),this.data.Precision?this.numberValue=parseFloat(a.value).toFixed(this.data.Precision):this.numberValue=GetAsInteger(a.value),this.number.textContent=this.numberValue+this.getUnitSymbol(),$("#"+this.number.id).attr("data-value",this.numberValue),this.inputfield&&(this.number.value=this.writeRect3.value=a.value,this.oldTextVal=this.number.value),this.number4&&(this.number4.textContent=this.numberValue+this.getUnitSymbol())}catch(a){console.error("DiagnosisTextNumber datachangeListener failed: "+a)}},emosWS.DiagnosisTextNumber=DiagnosisTextNumber;function DiagnosisTextNumberNumber(a,b,c,d,e,f,g){this.parent=a,this.data=b,this.plc=c,this.dataType=d,this.writable=e,this.diagnosisWindow=f,this.myKey=g,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisTextNumberNumber parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15",Number2X:"99%",Number2Y:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisTextNumberNumber parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15",Number2X:"99%",Number2Y:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextNumberNumber parentsbox",BorderWidth:"97.5%",WriteRectWidth:"25%",RectX:"47%",WriteRectX:"72.5%",TextX:"5",TextY:"15",NumberX:"71.5%",NumberY:"15",Number2X:"96.5%",Number2Y:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.plctag2=this.plc+"."+this.data.OPCID2,this.border=this.text=this.number=this.number2=this.rect=this.writeRect=this.numberValue=this.number2Value=this.min=this.max=null,this.unit=emosWS.getUnit(),this.numberColor=this.writable?"#76a0b5":"black",this.IOObject=null,DiagnosisElement.call(this,{data:b,writable:e})}DiagnosisTextNumberNumber.prototype=Object.create(DiagnosisElement.prototype),DiagnosisTextNumberNumber.prototype.constructor=DiagnosisTextNumberNumber,DiagnosisTextNumberNumber.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID(),k=getElementGlobalID(),l=getElementGlobalID(),m=getElementGlobalID(),n=getElementGlobalID();switch(this.dataType){case this.diagnosisWindow.dataTypes.Integer:this.min=this.data.IntInputMin,this.max=this.data.IntInputMax;break;case this.diagnosisWindow.dataTypes.Real:this.min=this.data.RealInputMin,this.max=this.data.RealInputMax}var o=this.positionClass[this.data.Position],p=this.panel=$("<div class='"+o.css+"' id='"+a+"'><span class='DiagnosisNumberLRTextTextSVG' style='float:none;' id='"+e+"'>"+this.data.Text+"</span><div style='float:left;margin-right: 55px;'><span style='display: block;' id='"+m+"'>Actual Value</span><span style='display: block; box-shadow:none; background: none;padding-left: 0' class='DiagnosisNumberLRTextNumberSVG' id='"+b+"' data-value='"+this.numberValue+"'>"+this.numberValue+"</span></div><form onsubmit='return false' class='textnumnum'><span style='display: block;' id='"+n+"'>Setpoint</span><span style='display: block; float:left;' class='DiagnosisNumberLRTextNumberSVG textfeld orange' oninput='this.form.amountRange.value=this.value; this.form.preview.value=this.value' id='"+c+"' data-value='"+this.number2Value+"'>"+this.number2Value+"</span><span id='"+l+"' class='savebutton second emosbutton'></span><span id='"+k+"' class='cancelbutton emosbutton'></span><span id='"+j+"' class='writebutton getpad emosbutton'></span><br class='cl'><div class='DiagnosisStringButtons'></form></div></div>");p[0].myData=this.data,p[0].myKey=this.myKey,p[0].poke=this.poke.bind(this),p.appendTo(this.parentDiv),$(this.parentDiv)[0].myData=this.data,this.number=document.getElementById(b),this.number2=document.getElementById(c),this.text=document.getElementById(e),this.border=document.getElementById(d),this.rect=document.getElementById(f),this.writeRect5=document.getElementById(j),this.cancelbutton=document.getElementById(h),this.savebutton=document.getElementById(i),emosWS.advise(this.plctag,this.datachangeListenerB.bind(this),"",emosWS.tagType.IOObject,this.data.UnitMetric,1,this.data.UnitImperial,1,this.data.UnitLocale,1,this.data.UnitInit,this.data.Precision),this.IOObject=emosWS.advise(this.plctag2,this.datachange2ListenerB.bind(this),"",emosWS.tagType.IOObject,this.data.UnitMetric,1,this.data.UnitImperial,1,this.data.UnitLocale,1,this.data.UnitInit,this.data.Precision),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+"Setpoint","name",function(a){$("#"+n).text(a.value+":")}),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+"ActualValue","name",function(a){$("#"+m).text(a.value+":")}),this.getWritable(this)}catch(a){console.log("DiagnosisTextNumberNumber init failed: "+a)}},DiagnosisTextNumberNumber.prototype.poke=function(a){this.IOObject.setValue(a)},DiagnosisTextNumberNumber.prototype.getWritable=function(a){a.writable&&(a.number2.setAttribute("pointer-events","none"),a.writeRect5.style.cursor="pointer",a.writeRect5.addEventListener("click",DiagnosisTextNumberNumber.prototype.onClick.bind(a)),this.writable=a.writable,this.writeRect5=a.writeRect5,this.cancelbutton=a.cancelbutton,this.savebutton=a.savebutton,this.writeRectId=a.writeRectId,this.number2=a.number2,this.updateWrite())},DiagnosisTextNumberNumber.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect5.style.cursor="pointer",this.writeRect5.style.pointerEvents="auto",this.writeRect5.style.display="block",this.number2.style.color="#76a0b5"):(this.writeRect5.style.cursor="auto",this.writeRect5.style.pointerEvents="none",this.writeRect5.style.display="none",this.number2.style.color="black")},DiagnosisTextNumberNumber.prototype.onClick=function(a){$(a.target).hide().prev().show().prev().show()},DiagnosisTextNumberNumber.prototype.datachangeListenerB=function(a){try{var b=a.value;this.numberValue=b.value,this.number.textContent=b.valueWithSymbol,$("#"+this.number.id).attr("data-value",this.numberValue),this.number.value=this.numberValue}catch(a){console.error("DiagnosisTextNumberNumber datachangeListenerB failed: "+a)}},DiagnosisTextNumberNumber.prototype.datachange2ListenerB=function(a){try{var b=a.value;this.number2Value=b.value,this.number2.textContent=b.valueWithSymbol,$("#"+this.number2.id).attr("data-value",this.number2Value).removeClass("orange"),this.number3&&(this.number3Value=b.value,this.number3.textContent=b.valueWithSymbol,this.number3.value=this.number3Value),this.number2.value=this.number2Value,this.setInputRange(b.properties,this.data)}catch(a){console.error("DiagnosisTextNumberNumber datachange2ListenerB failed: "+a)}},DiagnosisTextNumberNumber.prototype.datachangeListener=function(a){try{this.msg1=a,this.numberValue=GetAsInteger(a.value),this.number.textContent=this.numberValue+" "+this.getUnitSymbol(),$("#"+this.number.id).attr("data-value",this.numberValue),this.number.value=this.numberValue}catch(a){console.error("DiagnosisTextNumberNumber datachangeListener failed: "+a)}},DiagnosisTextNumberNumber.prototype.datachange2Listener=function(a){try{this.msg2=a,this.number2Value=GetAsInteger(a.value),this.number2.textContent=this.number2Value+" "+this.getUnitSymbol(),$("#"+this.number2.id).attr("data-value",this.number2Value).removeClass("orange"),this.number3&&(this.number3Value=GetAsInteger(a.value),this.number3.textContent=this.number3Value+this.getUnitSymbol(),this.number3.value=this.number3Value),this.number2.value=this.number2Value}catch(a){console.error("DiagnosisTextNumberNumber datachange2Listener failed: "+a)}},emosWS.DiagnosisTextNumberNumber=DiagnosisTextNumberNumber;function DiagnosisLedTextNumberNumber(a,b,c,d,e){this.parent=a,this.data=b,this.plc=c,this.writable=d,this.diagnosisWindow=e,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisLedText parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15",Number2X:"99%",Number2Y:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisLedText parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",RectX:"50%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15",Number2X:"99%",Number2Y:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisLedText parentsbox",BorderWidth:"92.4%",WriteRectWidth:"25%",RectX:"47%",WriteRectX:"72.5%",TextX:"27",TextY:"15",NumberX:"71.5%",NumberY:"15",Number2X:"96.5%",Number2Y:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.plctag2=this.plc+"."+this.data.OPCID2,this.plctagLed=this.plc+"."+this.data.LEDOPCID,this.ledValue=this.border=this.led=this.text=this.number=this.number2=this.writeRect=this.numberValue=this.number2Value=null,this.unit=emosWS.getUnit(),this.numberColor=this.writable?"#76a0b5":"black",this.IOObject=null,DiagnosisElement.call(this,{data:b,writable:d})}DiagnosisLedTextNumberNumber.prototype=Object.create(DiagnosisElement.prototype),DiagnosisLedTextNumberNumber.prototype.constructor=DiagnosisLedTextNumberNumber,DiagnosisLedTextNumberNumber.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=this.positionClass[this.data.Position],i=getElementGlobalID(),j=getElementGlobalID(),k=getElementGlobalID(),l="<div style='float: right;position: absolute;right: 20px;'><span style='display: none;' class='DiagnosisNumberLRTextTextSVG'></span><span id='"+k+"' class='savebutton second emosbutton'></span><span id='"+j+"' class='cancelbutton emosbutton'></span><span id='"+i+"' class='writebutton getpad emosbutton'></span><br class='cl'></div><span class='DiagnosisNumberLRTextText doubleText' id='"+f+"'>"+this.data.Text+"</span><span class='messageCircle doubleText' id='"+b+"'></span><form onsubmit='return false'><span class='DiagnosisNumberLRTextNumberSVG textfeld' id='"+c+"'>"+this.numberValue+"</span><span class='DiagnosisNumberLRTextNumberSVG textfeld' oninput='this.form.amountRange.value=this.value; this.form.preview.value=this.value' id='"+d+"' data-value='"+this.number2Value+"'>"+this.number2Value+"</span><div class='DiagnosisStringButtons'></form></div>",m=this.panel=$("<div class='"+h.css+"' id='"+a+"'>"+l+"<br class='cl' /></div>");m[0].myData=this.data,m[0].myData.writable=this.writable,m[0].myKey=this.myKey,m[0].poke=this.poke.bind(this),m.appendTo(this.parentDiv),this.number=document.getElementById(c),this.number2=document.getElementById(d),this.text=document.getElementById(f),this.border=document.getElementById(e),this.writeRect4=document.getElementById(i),this.cancelbutton=document.getElementById(j),this.savebutton=document.getElementById(k),this.led=document.getElementById(b),emosWS.advise(this.plctag,this.datachangeListenerB.bind(this),"",emosWS.tagType.IOObject,this.data.UnitMetric,1,this.data.UnitImperial,1,this.data.UnitLocale,1,this.data.UnitInit,this.data.Precision),this.IOObject=emosWS.advise(this.plctag2,this.datachange2ListenerB.bind(this),"",emosWS.tagType.IOObject,this.data.UnitMetric,1,this.data.UnitImperial,1,this.data.UnitLocale,1,this.data.UnitInit,this.data.Precision),emosWS.advise(this.plctagLed,this.datachangeLedListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.getWritable(this)}catch(a){console.error("DiagnosisLedTextNumberNumber init failed: "+a)}},DiagnosisLedTextNumberNumber.prototype.poke=function(a){this.IOObject.setValue(a)},DiagnosisLedTextNumberNumber.prototype.getWritable=function(a){a.writable&&(this.writable=a.writable,this.writeRect4=a.writeRect4,this.cancelbutton=a.cancelbutton,this.savebutton=a.savebutton,this.writeRectId4=a.writeRectId4,a.writeRect4.style.cursor="pointer",a.writeRect4.addEventListener("click",this.onClick.bind(a)),a.number2.setAttribute("pointer-events","none"))},DiagnosisLedTextNumberNumber.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect4.style.cursor="pointer",this.writeRect4.style.pointerEvents="auto",this.writeRect4.style.display="block",this.number2.style.color=this.numberColor="#76a0b5"):(this.writeRect4.style.cursor="auto",this.writeRect4.style.pointerEvents="none",$("#"+this.number2.id).addClass("notwritable"),this.writeRect4.style.display="none",this.number2.style.color=this.numberColor="black")},DiagnosisLedTextNumberNumber.prototype.onClick=function(){this.writeRect4.style.display="none",this.cancelbutton.style.display="block",this.savebutton.style.display="block"},DiagnosisLedTextNumberNumber.prototype.datachangeLedListener=function(a){try{this.ledValue=GetAsBoolean(a.value);var b=colorList[this.ledValue?this.data.OnLED:this.data.OffLED];$("#"+this.led.id).addClass(b)}catch(a){console.log("DiagnosisLedTextNumberNumber datachangeLedListener failed: "+a)}},DiagnosisLedTextNumberNumber.prototype.datachangeListenerB=function(a){try{var b=a.value;this.numberValue=b.value,this.number.style.fill="black",this.number.textContent=b.valueWithSymbol}catch(a){console.error("DiagnosisLedTextNumberNumber DatachangeListener failed: "+a)}},DiagnosisLedTextNumberNumber.prototype.datachange2ListenerB=function(a){try{var b=a.value;this.number2Value=b.value,this.number2.textContent=b.valueWithSymbol,this.writeRect4.value=this.number2Value,this.number2.value=b.value,this.oldTextVal=this.number2.value,$("#"+this.number2.id).attr("data-value",this.number2Value),$(this.number5).length>0&&(this.number5.textContent=b.valueWithSymbol,$("#"+this.number5.id).attr("data-value",this.number2Value)),this.setInputRange(b.properties,this.data)}catch(a){console.error("DiagnosisLedTextNumberNumber datachange2ListenerB failed: "+a)}},DiagnosisLedTextNumberNumber.prototype.datachangeListener=function(a){try{this.msg2=a,this.numberValue=GetAsDouble(a.value),this.number.style.fill="black",this.number.textContent=this.numberValue+this.getUnitSymbol()}catch(a){console.error("DiagnosisLedTextNumberNumber datachangeListener failed: "+a)}},DiagnosisLedTextNumberNumber.prototype.datachange2Listener=function(a){try{this.msg2=a,this.data.Precision?this.number2Value=parseFloat(a.value).toFixed(this.data.Precision):this.number2Value=GetAsInteger(a.value),this.number2.textContent=this.number2Value+this.getUnitSymbol(),this.writeRect4.value=this.number2Value,this.number2.value=a.value,this.oldTextVal=this.number2.value,$("#"+this.number2.id).attr("data-value",this.number2Value),$(this.number5).length>0&&(this.number5.textContent=this.number2Value+this.getUnitSymbol(),$("#"+this.number5.id).attr("data-value",this.number2Value))}catch(a){console.error("DiagnosisLedTextNumber datachange2Listener failed: "+a)}},emosWS.DiagnosisLedTextNumberNumber=DiagnosisLedTextNumberNumber;function DiagnosisLedTextNumber(a,b,c,d,e,f){this.parent=a,this.data=b,this.plc=c,this.writable=d,this.diagnosisWindow=e,this.myKey=f,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisLedText parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisLedText parentsbox",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisLedText parentsbox",BorderWidth:"92.4%",WriteRectWidth:"12.5%",WriteRectX:"85%",TextX:"27",TextY:"15",NumberX:"96.5%",NumberY:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.plctagLed=this.plc+"."+this.data.LEDOPCID,this.numberValue=this.ledValue=this.border=this.led=this.text=this.number=this.writeRect4=this.numberValue=null,this.unit=emosWS.getUnit(),this.numberColor=this.writable?"#76a0b5":"black",this.inputfield=!1,this.IOObject=null,DiagnosisElement.call(this,{data:b,writable:d})}DiagnosisLedTextNumber.prototype=Object.create(DiagnosisElement.prototype),DiagnosisLedTextNumber.prototype.constructor=DiagnosisLedTextNumber,DiagnosisLedTextNumber.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=this.positionClass[this.data.Position],h=getElementGlobalID(),i=getElementGlobalID(),j="";this.writable?(this.inputfield=!0,j="<div style='float: right;position: absolute;right: 20px;'><span style='display: none;' class='DiagnosisNumberLRTextTextSVG'></span><span id='"+i+"' class='savebutton emosbutton'></span><span id='"+h+"' class='cancelbutton emosbutton'></span><span id='"+f+"' class='writebutton getpad emosbutton'></span><br class='cl'></div><span class='DiagnosisNumberLRTextText' id='"+e+"'>"+this.data.Text+"</span><span class='messageCircle' id='"+b+"'></span><form onsubmit='return false'><span class='DiagnosisNumberLRTextNumberSVG textfeld' oninput='this.form.amountRange.value=this.value; this.form.preview.value=this.value' id='"+c+"' data-value='"+this.numberValue+"'>"+this.value+"</span><div class='DiagnosisStringButtons'></form></div>"):(this.inputfield=!1,j="<span id='"+c+"' class='DiagnosisNumbers without'></span><span class='messageCircle without' id='"+b+"'></span><span class='DiagnosisNumberLRTextText without' id='"+e+"'>"+this.data.Text+"</span><span id='"+f+"'></span><br class='cl' />");var k=this.panel=$("<div class='"+g.css+"' id='"+a+"'>"+j+"<br class='cl' /></div>");k[0].myData=this.data,k[0].myKey=this.myKey,k[0].poke=this.poke.bind(this),k.appendTo(this.parentDiv),this.number=document.getElementById(c),this.text=document.getElementById(e),this.border=document.getElementById(d),this.writeRect4=document.getElementById(f),this.cancelbutton=document.getElementById(h),this.savebutton=document.getElementById(i),this.led=document.getElementById(b),this.IOObject=emosWS.advise(this.plctag,this.datachangeListenerB.bind(this),"",emosWS.tagType.IOObject,this.data.UnitMetric,1,this.data.UnitImperial,1,this.data.UnitLocale,1,this.data.UnitInit,this.data.Precision),emosWS.advise(this.plctagLed,this.datachangeLedListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){
""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.getWritable(this)}catch(a){console.error("DiagnosisLedTextNumber init failed: "+a)}},DiagnosisLedTextNumber.prototype.poke=function(a){this.IOObject.setValue(a)},DiagnosisLedTextNumber.prototype.getWritable=function(a){a.writable&&(a.writeRect4.style.cursor="pointer",a.writeRect4.addEventListener("click",this.onClick.bind(a)),a.number.setAttribute("pointer-events","none"),this.writable=a.writable,this.writeRect4=a.writeRect4,this.cancelbutton=a.cancelbutton,this.savebutton=a.savebutton,this.writeRectId4=a.writeRectId4,this.number=a.number,this.updateWrite())},DiagnosisLedTextNumber.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?($(this.number5).length>0&&(this.number5.style.color=this.numberColor="#76a0b5"),this.number.style.color=this.numberColor="#76a0b5",this.writeRect4.style.cursor="pointer",this.writeRect4.style.pointerEvents="auto",this.writeRect4.style.display="block"):(this.number.style.color=this.numberColor="black",this.writeRect4.style.cursor="auto",this.writeRect4.style.pointerEvents="none",$("#"+this.number.id).addClass("notwritable"),this.writeRect4.style.display="none")},DiagnosisLedTextNumber.prototype.onClick=function(){this.writeRect4.style.display="none",this.cancelbutton.style.display="block",this.savebutton.style.display="block"},DiagnosisLedTextNumber.prototype.datachangeLedListener=function(a){try{this.ledValue=GetAsBoolean(a.value);var b=colorList[this.ledValue?this.data.OnLED:this.data.OffLED];$("#"+this.led.id).addClass(b)}catch(a){console.error("DiagnosisLedTextNumber datachangeLedListener failed: "+a)}},DiagnosisLedTextNumber.prototype.datachangeListenerB=function(a){try{var b=a.value;this.numberValue=b.value,this.number.style.color=this.numberColor,this.number.textContent=b.valueWithSymbol,this.writeRect4.value=this.numberValue,this.number.value=b.value,this.oldTextVal=this.number.value,$("#"+this.number.id).attr("data-value",this.numberValue),$(this.number5).length>0&&(this.number5.textContent=b.valueWithSymbol,$("#"+this.number5.id).attr("data-value",this.numberValue)),this.setInputRange(b.properties,this.data)}catch(a){console.error("DiagnosisLedTextNumber atachangeListener failed: "+a)}},DiagnosisLedTextNumber.prototype.datachangeListener=function(a){try{this.msg=a,this.data.Precision?this.numberValue=parseFloat(a.value).toFixed(this.data.Precision):this.numberValue=GetAsInteger(a.value),this.number.textContent=this.numberValue+this.getUnitSymbol(),this.writeRect4.value=this.numberValue,this.number.value=a.value,this.oldTextVal=this.number.value,$("#"+this.number.id).attr("data-value",this.numberValue),$(this.number5).length>0&&(this.number5.textContent=this.numberValue+this.getUnitSymbol(),$("#"+this.number5.id).attr("data-value",this.numberValue))}catch(a){console.error("DiagnosisLedTextNumber datachangeListener failed: "+a)}},emosWS.DiagnosisLedTextNumber=DiagnosisLedTextNumber;function DiagnosisBrowserPage(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisBrowserPage"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisBrowserPage"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisBrowserPage"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.OPCID=this.data.OPCID,this.url=this.data.URL,this.plctag=this.plc,this.iframe=null,this.init()}DiagnosisBrowserPage.prototype.init=function(){try{var a=getElementGlobalID(),b=this.positionClass[this.data.Position],c=$("<div class='"+b.css+"'><iframe class='DiagnosisBrowserIFrame' id='"+a+"' src='"+this.url+"'></iframe></div>");c.appendTo(this.parentDiv),this.iframe=document.getElementById(a),this.url.indexOf("$")>=0&&""!==this.OPCID&&emosWS.advise(this.plc+"."+this.data.OPCID,this.datachangeListener.bind(this),"",emosWS.tagType.IO)}catch(a){console.log("DiagnosisControlNetArray init failed: "+a)}},DiagnosisBrowserPage.prototype.datachangeListener=function(a){var b=this.url;this.iframe.src=b.replace("$",a.value)},emosWS.DiagnosisBrowserPage=DiagnosisBrowserPage;function DiagnosisControlNetArray(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisControlNetArray",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisControlNetArray",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisControlNetArray",BorderWidth:"92.4%",WriteRectWidth:"12.5%",WriteRectX:"85%",TextX:"27",TextY:"15",NumberX:"96.5%",NumberY:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.aOPCIA=this.data.AOPCID,this.aOPCMidID=this.data.AOPCMidID,this.aOPCEndID=this.data.AOPCEndID,this.sOPCIA=this.data.SOPCID,this.sOPCMidID=this.data.SOPCMidID,this.sOPCEndID=this.data.SOPCEndID,this.start=parseInt(this.data.Start),this.stop=parseInt(this.data.Stop),this.elements=this.stop-this.start+1,this.rows=Math.floor(this.elements/11),this.plctag=this.plc,this.controls={},this.rowElements=11,this.init()}DiagnosisControlNetArray.prototype.init=function(){try{for(var a=getElementGlobalID(),b=this.start,c=this.stop+1;b<c;b++)this.controls[b]={id:getElementGlobalID(),alarmValue:null,statusValue:null,rect:null};for(var d=this.positionClass[this.data.Position],e="",f=0,g=0,h=35,i=40,j=20,k=25,l=k*this.rows,b=0;b<this.rows;b++){for(var c=b===this.rows-1?this.elements-b*this.rowElements:this.rowElements,m=0;m<c;m++){var n=b*this.rowElements+m+this.start;e+="<rect class='DiagnosisControlRectSVG' x='"+(f+m*i)+"' y='"+g+"' width='"+h+"' height='"+j+"' id='"+this.controls[n].id+"'/><text text-anchor='middle' class='DiagnosisControlTextSVG' x='"+(f+h/2+m*i)+"' y='"+(g+15)+"'>"+n+"</text>"}g+=k}var o=$("<div class='"+d.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='"+l+"' class='DiagnosisControlArraySVG'>"+e+"</svg></div>");o.appendTo(this.parentDiv);for(var b=this.start,c=this.stop+1;b<c;b++)this.controls[b].rect=document.getElementById(this.controls[b].id),emosWS.advise(this.getAlarmPlctag(b),this.datachangeAlarmListener.bind(this),b,emosWS.tagType.IO),emosWS.advise(this.getStatusPlctag(b),this.datachangeStatusListener.bind(this),b,emosWS.tagType.IO)}catch(a){console.log("DiagnosisControlNetArray init failed: "+a)}},DiagnosisControlNetArray.prototype.getAlarmPlctag=function(a){var b=(100+a).toString().substring(1);return this.plctag+"."+this.aOPCIA+b+this.aOPCMidID+a+this.aOPCEndID},DiagnosisControlNetArray.prototype.getStatusPlctag=function(a){var b=(100+a).toString().substring(1);return this.plctag+"."+this.sOPCIA+b+this.sOPCMidID+a+this.sOPCEndID},DiagnosisControlNetArray.prototype.datachangeAlarmListener=function(a,b){try{var c=this.controls[b];c.alarmValue=GetAsBoolean(a.value),c.alarmValue?c.rect.style.fill=colorList.R:c.statusValue||(c.rect.style.fill=colorList.O)}catch(a){console.log("DiagnosisControlNetArray datachangeAlarmListener failed: "+a)}},DiagnosisControlNetArray.prototype.datachangeStatusListener=function(a,b){try{var c=this.controls[b];c.statusValue=GetAsBoolean(a.value),c.alarmValue||(c.statusValue?c.rect.style.fill=colorList.G:c.rect.style.fill=colorList.O)}catch(a){console.log("DiagnosisControlNetArray datachangeStatusListener failed: "+a)}},emosWS.DiagnosisControlNetArray=DiagnosisControlNetArray;function DiagnosisBitBar(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisBitBar",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisBitBar",BorderWidth:"100%",WriteRectWidth:"25%",WriteRectX:"75%",TextX:"5",TextY:"15",NumberX:"99%",NumberY:"15"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisBitBar",BorderWidth:"92.4%",WriteRectWidth:"12.5%",WriteRectX:"85%",TextX:"27",TextY:"15",NumberX:"96.5%",NumberY:"15"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.numberValue=null,this.barBytes=2,this.leds={},DiagnosisElement.call(this,{data:b})}DiagnosisBitBar.prototype=Object.create(DiagnosisElement.prototype),DiagnosisBitBar.prototype.constructor=DiagnosisBitBar,DiagnosisBitBar.prototype.init=function(){try{for(var a=getElementGlobalID(),b=0,c=8*this.barBytes;b<c;b++)this.leds[b]={id:getElementGlobalID(),value:null,svg:null};for(var d=this.positionClass[this.data.Position],e="",f=0,g=10,h=10,i=12,j=6,b=0;b<this.barBytes;b++){for(var k=0;k<8;k++){var l=8*(this.barBytes-b-1)+(7-k);e+="<text class='DiagnosisNumberNumberTextSVG' x='"+(f+k*g)+"' y='"+h+"'>"+(7-k)+"</text><rect class='DiagnosisBitSVG' x='"+(f+k*g)+"' y='"+i+"' width='"+j+"' height='"+j+"' id='"+this.leds[l].id+"'/>"}f+=9*g}var m=this.panel=$("<div class='"+d.css+"' id='"+a+"'><svg xmlns='http://www.w3.org/2000/svg' version='1.1' class='DiagnosisBitBarSVG'>"+e+"</svg></div>");m.appendTo(this.parentDiv);for(var b=0,c=8*this.barBytes;b<c;b++)this.leds[b].svg=document.getElementById(this.leds[b].id);emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO)}catch(a){console.log("DiagnosisBitBar init failed: "+a)}},DiagnosisBitBar.prototype.datachangeListener=function(a){try{this.numberValue=GetAsInteger(a.value);for(var b=4294967296,c=(b+this.numberValue).toString(2),d=0,e=8*this.barBytes;d<e;d++){this.leds[d].value=c[c.length-d-1];var f="1"===this.leds[d].value?colorList.G:colorList.O;this.leds[d].svg.style.fill=f}}catch(a){console.log("DiagnosisBitBar datachangeListener failed: "+a)}},emosWS.DiagnosisBitBar=DiagnosisBitBar;function DiagnosisTextLED(a,b,c,d,e,f){this.parent=a,this.data=b,this.plc=c,this.writable=d,this.myKey=f,this.diagnosisWindow=e,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisTextLed parentsbox",rectWidth:"100%",rectHeight:"20",writeRectX:"91%",writeRectY:"10",writeRectWidth:"20",ledX:"95.5%",ledY:"10",ledR:"7"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisTextLed parentsbox",rectWidth:"100%",rectHeight:"20",writeRectX:"91%",writeRectY:"10",writeRectWidth:"20",ledX:"95.5%",ledY:"10",ledR:"7"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextLed parentsbox",rectWidth:"97.5%",rectHeight:"20",writeRectX:"93.1%",writeRectY:"10",writeRectWidth:"20",ledX:"95.4%",ledY:"10",ledR:"7"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.led=this.border=this.text=this.LEDValue=null,DiagnosisElement.call(this,{data:b,writable:d})}DiagnosisTextLED.prototype=Object.create(DiagnosisElement.prototype),DiagnosisTextLED.prototype.constructor=DiagnosisTextLED,DiagnosisTextLED.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=this.positionClass[this.data.Position];this.panel=$("<div class='"+e.css+"' id='"+a+"'><span id='"+b+"' class='orange'></span><div class='textLed'><span id='"+d+"'>"+this.data.Text+"</span></div><br style='clear:both;' /></div>"),this.panel[0].myData=this.data,this.panel[0].myData.writable=this.writable,this.panel[0].myKey=this.myKey,this.panel.appendTo(this.parentDiv),this.led=document.getElementById(b),this.text=document.getElementById(d),this.border=document.getElementById(c),this.writeRect1=document.getElementById(a),emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),this.getWritable(this),$(this.parentDiv).children().length>4&&$(this.parentDiv).addClass("higherDiv")}catch(a){console.log("DiagnosisTextLED init failed: "+a)}},DiagnosisTextLED.prototype.getWritable=function(a){a.writable?(a.led.style.cursor="pointer",a.led.className=a.led.className+" writable",a.led.addEventListener("click",function(){emosWS.poke(a.plctag,a.LEDValue?"0":"-1")}.bind(a)),a.led1&&(a.led1.style.cursor="pointer")):(a.led.className=a.led.className+" notwritable",a.led1&&(a.led1.className=a.led1.className+" notwritable"))},DiagnosisTextLED.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.led.style.cursor="pointer",this.led.style.pointerEvents="auto",this.led.style.opacity=1,this.led1&&(this.led1.style.cursor="pointer",this.led1.style.pointerEvents="auto",this.led1.style.opacity=1)):(this.led.style.cursor="auto",this.led.style.pointerEvents="none",this.led.style.opacity=.3,this.led1&&(this.led1.style.cursor="auto",this.led1.style.pointerEvents="none",this.led1.style.opacity=.3))},DiagnosisTextLED.prototype.datachangeListener=function(a){try{this.LEDValue=GetAsBoolean(a.value);var b=colorList[this.LEDValue?this.data.OnLED:this.data.OffLED];this.led.setAttribute("class",b),this.led1&&this.led1.setAttribute("class",b),this.writable?(this.led.className=this.led.className+" writable",this.led1&&(this.led1.className=this.led1.className+" notwritable")):(this.led.className=this.led.className+" notwritable",this.led1&&(this.led1.className=this.led1.className+" notwritable"))}catch(a){console.log("DiagnosisTextLED datachangeListener failed: "+a)}},emosWS.DiagnosisTextLED=DiagnosisTextLED;function DiagnosisDoubleText(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisDoubleText"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisDoubleText"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisDoubleText"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.text=this.text2=null,DiagnosisElement.call(this,{data:b})}DiagnosisDoubleText.prototype=Object.create(DiagnosisElement.prototype),DiagnosisDoubleText.prototype.constructor=DiagnosisDoubleText,DiagnosisDoubleText.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID();"undefined"!=typeof this.data.VisibleOPCID&&""!==this.data.VisibleOPCID&&(this.plctag=""===this.data.VisibleOPCID?"":this.plc+"."+this.data.OPCID);var d=this.positionClass[this.data.Position],e=this.panel=$("<div class='"+d.css+"' id='"+a+"'><div class='DiagnosisDoubleTextDiv' id='"+c+"'>"+this.data.Text2+"</div><div class='DiagnosisDoubleTextDiv' id='"+b+"'>"+this.data.Text+"</div></div>");e.appendTo(this.parentDiv),this.text=document.getElementById(b),this.text2=document.getElementById(c),""!==this.plctag&&emosWS.advise(this.plctag,function(a){try{var b=GetAsBoolean(a.value);this.text.style.visibility=b?"visible":"hidden",this.text2.style.visibility=b?"visible":"hidden"}catch(a){console.log("DiagnosisDoubleText datachangeListener failed: "+a)}}.bind(this),"",emosWS.tagType.IO),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=a.value)}.bind(this),this),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID2,"name",function(a){""!==a.value&&(this.text2.textContent=a.value)}.bind(this),this)}catch(a){console.log("DiagnosisDoubleText init failed: "+a)}},emosWS.DiagnosisDoubleText=DiagnosisDoubleText;function DiagnosisString(a,b,c,d,e,f){this.parent=a,this.data=b,this.plc=c,this.writable=d,this.diagnosisWindow=e,this.specClass=e.specClass,this.myKey=f,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisString parentsbox"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisString parentsbox"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisString parentsbox"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctagVisible=this.textValue="",this.plctag=this.plc+"."+this.data.OPCID,this.text=null,this.textColor=this.writable?"#76a0b5":"black",this.textId=null,this.oldTextVal=null,DiagnosisElement.call(this,{data:b,writable:d})}DiagnosisString.prototype=Object.create(DiagnosisElement.prototype),DiagnosisString.prototype.constructor=DiagnosisString,DiagnosisString.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID();this.textId=b,this.writeRectId=c,"undefined"!=typeof this.data.VisibleOPCID&&""!==this.data.VisibleOPCID&&(this.plctagVisible=""===this.data.VisibleOPCID?"":this.plc+"."+this.data.VisibleOPCID),"MS.M1000_Funct"===this.data.OPCID&&$(this.parentDiv).addClass("specClass");var g=this.positionClass[this.data.Position],h=this.panel=$("<div class='"+g.css+"' id='"+a+"'><span class='DiagnosisNumberLRTextTextSVG plcTag'>PLC_Tag:"+this.plctag+"</span><span id='"+e+"' class='savebutton emosbutton'></span><span id='"+d+"' class='cancelbutton emosbutton'></span><span id='"+c+"' class='writebutton getKeypad keyboardInputInitiator emosbutton'></span><br class='cl'><span style='display: inline-block;margin-top: 10px;' class='DiagnosisNumberLRTextNumberSVG orange' id='"+b+"'>"+this.textValue+"</span><div class='DiagnosisStringButtons' style='margin-top:20px;padding-top: 0;'><input lang='' maxlength="+this.data.StrLen+" pattern='.{"+this.data.StrStart+","+this.data.StrLen+"}' class='DiagnosisNumberLRTextNumberSVG preview keyboardInput' type='text' id='"+f+"' required></p></div></div>");h[0].myData=this.data,h[0].myKey=this.myKey,$(this.parentDiv)[0].myData=this.data,h.appendTo(this.parentDiv),this.text=document.getElementById(b),this.writeRect=document.getElementById(c),this.cancelbutton=document.getElementById(d),this.savebutton=document.getElementById(e),""!==this.plctag&&emosWS.advise(this.plctag,this.datachangeListener.bind(this),"",emosWS.tagType.IO),this.getWritable(this)}catch(a){console.log("DiagnosisString init failed: "+a)}},DiagnosisString.prototype.onClick=function(a){$("#"+this.writeRectId).siblings(".DiagnosisStringButtons").animate({height:$("#"+this.writeRectId).siblings(".DiagnosisStringButtons").get(0).scrollHeight}),this.writeRect.style.display="none",this.cancelbutton.style.display="block",this.savebutton.style.display="block"},DiagnosisString.prototype.getWritable=function(a){a.writable&&(a.writeRect.style.cursor="pointer",a.writeRect.addEventListener("click",DiagnosisString.prototype.onClick.bind(a)),this.writable=a.writable,this.writeRect=a.writeRect,this.cancelbutton=a.cancelbutton,this.savebutton=a.savebutton,this.writeRectId=a.writeRectId,this.text=a.text,this.updateWrite())},DiagnosisString.prototype.updateWrite=function(){emosWS.login.au.hasPaintShopRight(this.userRight)?(this.writeRect.style.cursor="pointer",this.writeRect.style.pointerEvents="auto",this.text.style.color=this.textColor="#76a0b5",this.writeRect.style.display="block"):(this.writeRect.style.cursor="auto",this.writeRect.style.pointerEvents="none",this.text.style.color=this.textColor="black",this.writeRect.style.display="none")},DiagnosisString.prototype.datachangeListener=function(a){try{var b=GetAsBoolean(a.value);$("#"+this.textId).text(a.value).removeClass("orange"),this.textValue=a.value,this.text1&&$("#"+this.text1.id).text(a.value).removeClass("orange")}catch(a){console.log("DiagnosisString datachangeListener failed: "+a)}},emosWS.DiagnosisString=DiagnosisString;function DiagnosisStringField(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisString"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisString"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisString"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.plctag=this.plc+"."+this.data.OPCID,this.text=null,this.textValue="",DiagnosisElement.call(this,{data:b})}DiagnosisStringField.prototype=Object.create(DiagnosisElement.prototype),DiagnosisStringField.prototype.constructor=DiagnosisStringField,DiagnosisStringField.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=this.positionClass[this.data.Position],d=this.panel=$("<div class='"+c.css+"' id='"+a+"'><textarea class='DiagnosisStringFieldTextArea' rows='4' id='"+b+"' readonly></p></div>");d.appendTo(this.parentDiv),this.text=document.getElementById(b),emosWS.advise(this.plctag,function(a){""!==a.value&&(this.text.value=a.value,this.text.style["background-color"]="white",this.textValue=a.value)}.bind(this))}catch(a){console.log("DiagnosisString init failed: "+a)}},emosWS.DiagnosisStringField=DiagnosisStringField;function DiagnosisChildWindow(a,b,c,d){this.parent=a,this.data=b,this.plc=c,this.diagnosisWindow=d,this.positionClass={L:{parent:this.diagnosisWindow.divTypes.LRLeft,css:"DiagnosisText"},R:{parent:this.diagnosisWindow.divTypes.LRRight,css:"DiagnosisText"},Long:{parent:this.diagnosisWindow.divTypes.Long,css:"DiagnosisTextLong"}},this.parentDiv=this.parent.getDiv(this.positionClass[this.data.Position].parent),this.dataText=""===this.data.Text?".":this.data.Text,this.plctag="",this.text="",this.init()}DiagnosisChildWindow.prototype.init=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=this.data.Name+" "+this.data.Comment+" - ",d="TextID: "+this.data.TextID,e=$("<div class='DiagnosisGerneralElement'><svg id='"+a+"' width='100%' height='20'><rect width='100%' height='20' style='fill:white;stroke-width:1;stroke:grey' /><text id='"+b+"' x='5' y='15' fill='black'>"+c+d+"</text></svg></div>");e.appendTo(this.parentDiv),this.text=document.getElementById(b),emosWS.sendAdviseText(this.diagnosisWindow.getTextPrefix()+this.data.TextID,"name",function(a){""!==a.value&&(this.text.textContent=c+a.value)}.bind(this),this)}catch(a){console.log("DiagnosisChildWindow init failed: "+a)}},emosWS.DiagnosisChildWindow=DiagnosisChildWindow;function HDiagnosisWindow(a){console.log(a),this.requestId=a.id,this.DiagnosisLibID=a.DiagnosisLibID,this.PLC=a.PLC,this.ID=a.Tag,this.DiagnosisControl=a.DiagnosisControl,this.GroupRightIndex=a.GroupRightIndex,this.additionalClass=a.additionalClass?a.additionalClass:"",this.Counter=a.myCounter?a.myCounter:0,this.childWindows=null,this.Enabled=!0,this.divTypes={None:0,LRLeft:1,LRRight:2,Long:3,LMRLeft:4,LMRMiddle:5,LMRRight:6},this.dataTypes={Integer:0,Real:1},this.windowData=null,this.childWindowsData={},this.qualityGood=!1,this.badQualityTagList={},this.winName="",this.OPCVersionID="",this.OPCVersion="",this.versionList=[],this.rootVersion=null,this.plcVersion="",this.run=!1,this.data=a.data,this.msg=a,this.specClass="",this.data&&(this.childWindows=this.data.childWindows,this.childWindowsData=this.data.childWindowsData,this.windowData=this.data.windowData,this.winName=this.data.winName),this.diaheadId=getElementGlobalID(),this.textPrefixList={1:"T01_",3:"T03_",5:"T05_"},this.initialize()}HDiagnosisWindow.prototype=Object.create(ADiagnosisWindow.prototype),HDiagnosisWindow.prototype.constructor=HDiagnosisWindow,HDiagnosisWindow.prototype.appendWindow=function(a){try{this.myid=a,this.appendChildData();var b=this,c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=function(){var a={type:"DiagnosisWindowClosed",id:this.requestId}}.bind(this),i=this.ID.split("_"),j=i[i.length-3]+"_"+i[i.length-2],k=i[i.length-1],l;l="statusWelcome"!==this.additionalClass?'<div class="diahead_left"><span class="processname">'+k+'</span><span class="partname">'+j+'</span></div><div class="diahead_right"><ul class="dieahead_head"><li class="arrangeTabs emosbutton"></li><li class="copyTab emosbutton"></li><li class="closeTabs emosbutton"></li></ul></div><br class="cl" />':'<div class="diahead_left"><span class="processname">Summaries</span></div>';var m=$('<div class ="diagnose '+this.additionalClass+" "+this.Counter+'"><div class="diahead" id="'+this.diaheadId+'">'+l+'</div><div class="DiagnosisContent" id="'+a+'"><div class="DiagnoseBody" role="main"></div></div></div>'),n=$('<div class="DiagnosisFooter"><span class="footerHead" id="'+g+'"></span><span id="'+c+'" class="scrollLeft"></span><span id="'+d+'" class="scrollRight"></span><span id="'+e+'" class="scrollUp"></span><span id="'+f+'" class="scrollDown active"></span></div>)');n.appendTo(m);var o=m.find(".DiagnoseBody");$(o)[0].msg=b.msg,m.appendTo("#center"),this.appendBody(o)}catch(a){console.log("appendWindow failed: "+a)}},HDiagnosisWindow.prototype.appendHead=function(a){try{var b=this.windowData.Head;for(var c in b){var d=b[c];if("object"==typeof d){var e=DiagnosisCommon.getObjectType(c);switch(e){case"TopTextLED":new TopTextLED(a,d,this.PLC+this.ID,this)}}}}catch(a){console.log("appendHead failed: "+a)}},HDiagnosisWindow.prototype.appendBody=function(a){this.appendPageControl(a,this.windowData.PageControl)},HDiagnosisWindow.prototype.appendPageControl=function(a,b){try{new PageControl(a,b,this)}catch(a){console.log("appendPageControl failed: "+a)}},HDiagnosisWindow.prototype.appendPage=function(a,b,c,d,e,f){try{var a=a,b=b,d=d;a.LRLeft=null,a.LRRight=null,a.LRLong=null,a.LMRLeft=null,a.LMRMiddle=null,a.LMRRight=null,a.getDiv=function(b){switch(b){case this.divTypes.LRLeft:if(!a.LRLeft){var c=getElementGlobalID(),d=$("<div class='DiagnosisLRLeft' id='"+c+"'></div>");d.appendTo(a),a.LRLeft=document.getElementById(c),a.LRLong=null}return a.LRLeft;case this.divTypes.LRRight:if(!a.LRRight){var e=getElementGlobalID(),d=$("<div class='Groupbox' id='"+e+"'></div>");d.appendTo(a),a.LRRight=document.getElementById(e),a.LRLong=null}return a.LRRight;case this.divTypes.Long:if(!a.LRLong){var f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),d=$("<div class='Groupbox' id='"+f+"'><div id='"+g+"'></div><div id='"+h+"'></div><div id='"+i+"'></div></div>");d.appendTo(a),a.LRLong=document.getElementById(g),a.LRLeft=document.getElementById(h),a.LRRight=document.getElementById(i),a.LMRLeft=document.getElementById(h),a.LMRMiddle=document.getElementById(f),a.LMRRight=document.getElementById(i)}return a.LRLong;case this.divTypes.LMRLeft:if(!a.LMRLeft){var j=getElementGlobalID(),d=$("<div class='DiagnosisLMRLeft' id='"+j+"'></div>");d.appendTo(a),a.LMRLeft=document.getElementById(j),a.LRLong=null}return a.LMRLeft;case this.divTypes.LMRMiddle:if(!a.LMRMiddle){var k=getElementGlobalID(),d=$("<div class='DiagnosisLMRMiddle' id='"+k+"'></div>");d.appendTo(a),a.LMRMiddle=document.getElementById(k),a.LRLong=null}return a.LMRMiddle;case this.divTypes.LMRRight:if(!a.LMRRight){var l=getElementGlobalID(),d=$("<div class='DiagnosisLMRRight' id='"+l+"'></div>");d.appendTo(a),a.LMRRight=document.getElementById(l),a.LRLong=null}return a.LMRRight;case this.divTypes.Groupbox:var m=getElementGlobalID(),d=$("<div class='Groupbox' id='"+m+"'></div>");return d.appendTo(a),a.LMRRight=document.getElementById(m),a.LRLong=document.getElementById(m),a.LRLeft=document.getElementById(m),a.LRRight=document.getElementById(m),a.LMRLeft=document.getElementById(m),a.LMRMiddle=document.getElementById(m),a.LRLong;default:return null}}.bind(this);var g=function(){emosWS.login.au.hasPaintShopRight(d)?a.get(0).style.visibility="visible":a.get(0).style.visibility="hidden"};sortHashArray(b).forEach(function(d){var e=b[d];if("Messages"===e){var f=a.parent().find(".addMess");this.appendHead(f)}if("object"==typeof e){var g=DiagnosisCommon.getObjectType(d);switch(g){case"AlarmClient":new AlarmClient(a,e,this.PLC+this.ID,c);break;case"AddText":new DiagnosisText(a,e,this.PLC+this.ID,this);break;case"AddString":new DiagnosisString(a,e,this.PLC+this.ID,(!1),this,d);break;case"AddStringInput":new DiagnosisString(a,e,this.PLC+this.ID,(!0),this,d);break;case"AddStringLong":e.Position="Long",new DiagnosisString(a,e,this.PLC+this.ID,(!1),this,d);break;case"AddStringInputLong":e.Position="Long",new DiagnosisString(a,e,this.PLC+this.ID,(!0),this,d);break;case"AddStringFieldLong":e.Position="Long",new DiagnosisStringField(a,e,this.PLC+this.ID,this);break;case"AddTextLong":case"AddHeadLine":e.Position="Long",new DiagnosisText(a,e,this.PLC+this.ID,this);break;case"AddTextLED":new DiagnosisTextLED(a,e,this.PLC+this.ID,(!1),this,d);break;case"AddTextLEDLong":e.Position="Long",new DiagnosisTextLED(a,e,this.PLC+this.ID,(!1),this,d);break;case"AddTextInputLED":new DiagnosisTextLED(a,e,this.PLC+this.ID,(!0),this,d);break;case"AddTextLEDInputLong":e.Position="Long",new DiagnosisTextLED(a,e,this.PLC+this.ID,(!0),this,d);break;case"AddTextLEDNiveau":new DiagnosisTextLED(a,e,this.PLC+this.ID,(!1),this,d);break;case"AddTextInteger":case"AddTextReal":new DiagnosisTextNumber(a,e,this.PLC+this.ID,(!1),this,d);break;case"AddTextIntegerLong":case"AddTextRealLong":e.Position="Long",new DiagnosisTextNumber(a,e,this.PLC+this.ID,(!1),this,d);break;case"AddTextIntegerInput":case"AddTextRealInput":case"AddTextRealInputNiveau":new DiagnosisTextNumber(a,e,this.PLC+this.ID,(!0),this,d);break;case"AddTextIntegerInputLong":case"AddTextRealInputLong":e.Position="Long",new DiagnosisTextNumber(a,e,this.PLC+this.ID,(!0),this,d);break;case"AddTextIntegerIntegerLong":e.Position="Long",new DiagnosisTextNumberNumber(a,e,this.PLC+this.ID,this.dataTypes.Integer,(!1),this,d);break;case"AddTextRealRealLong":e.Position="Long",new DiagnosisTextNumberNumber(a,e,this.PLC+this.ID,this.dataTypes.Real,(!1),this,d);break;case"AddTextIntegerIntegerInputLong":e.Position="Long",new DiagnosisTextNumberNumber(a,e,this.PLC+this.ID,this.dataTypes.Integer,(!0),this,d);break;case"AddTextRealRealInputLong":e.Position="Long",new DiagnosisTextNumberNumber(a,e,this.PLC+this.ID,this.dataTypes.Real,(!0),this,d);break;case"AddLEDTextIntegerLong":case"AddTextLEDIntegerLong":case"AddLEDTextRealLong":e.Position="Long",new DiagnosisLedTextNumber(a,e,this.PLC+this.ID,(!1),this,d);break;case"AddLEDTextIntegerInputLong":case"AddTextLEDIntegerInputLong":case"AddLEDTextRealInputLong":e.Position="Long",new DiagnosisLedTextNumber(a,e,this.PLC+this.ID,(!0),this,d);break;case"AddLEDTextRealRealLong":e.Position="Long",new DiagnosisLedTextNumberNumber(a,e,this.PLC+this.ID,(!1),this);break;case"AddLEDTextRealRealInputLong":e.Position="Long",new DiagnosisLedTextNumberNumber(a,e,this.PLC+this.ID,(!0),this);break;case"AddSpace":new DiagnosisSpace(a,e);break;case"AddSpaceLong":e.Position="Long",new DiagnosisSpace(a,e);break;case"AddBar":new DiagnosisBar(a,e,this.PLC+this.ID,this);break;case"AddBitBar":new DiagnosisBitBar(a,e,this.PLC+this.ID,this);break;case"CreateControlNetArray":e.Position="Long",new DiagnosisControlNetArray(a,e,this.PLC+this.ID,this);break;case"AddBrowserPage":e.Position="Long",new DiagnosisBrowserPage(a,e,this.PLC+this.ID,this);break;case"AddSetpointBar":new DiagnosisSetpointBar(a,e,this.PLC+this.ID,this);break;case"AddSetpointRampBar":e.Position="M",new DiagnosisSetpointRampBar(a,e,this.PLC+this.ID,this);break;case"AddPageControl":new SubPageControl(a,e,this,(!0));break;case"AddDoubleTextLong":e.Position="Long";break;case"AddTextTimerLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.Second,(!1),this,d);break;case"AddTextTimerInputLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.Second,(!0),this,d);break;case"AddTextSiemensDateLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.SiemensDate,(!1),this,d);break;case"AddTextSiemensDateInputLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.SiemensDate,(!0),this,d);break;case"AddTextSiemensTimeLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.SiemensTimeOfDay,(!1),this,d);break;case"AddTextSiemensTimeInputLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.SiemensTimeOfDay,(!0),this,d);
break;case"AddTextSiemens_TIME_TimerLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.SiemensTime,(!1),this,d);break;case"AddTextSiemens_TIME_TimerInputLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.SiemensTime,(!0),this,d);break;case"AddTextSiemens_S5TIME_TimerLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.SiemensS5Time,(!1),this,d);break;case"AddTextSiemens_S5TIME_TimerInputLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.SiemensS5Time,(!0),this,d);break;case"AddTextSiemens_DATE_AND_TIME_TimerLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.SiemensDateAndTime,(!1),this,d);break;case"AddTextSiemens_DATE_AND_TIME_TimerInputLong":e.Position="Long",new DiagnosisTextTimer(a,e,this.PLC+this.ID,timerTypes.SiemensDateAndTime,(!0),this,d);break;case"AddTextDoubleTimerLong":e.Position="Long",new DiagnosisTextDoubleTimer(a,e,this.PLC+this.ID,(!0),(!1),this,d);break;case"AddTextDoubleTimerInputLong":e.Position="Long",new DiagnosisTextDoubleTimer(a,e,this.PLC+this.ID,(!0),(!0),this,d);break;case"AddTextDoubleTimerLongMin":e.Position="Long",new DiagnosisTextDoubleTimer(a,e,this.PLC+this.ID,(!1),(!1),this,d);break;case"AddTextDoubleTimerInputLongMin":e.Position="Long",new DiagnosisTextDoubleTimer(a,e,this.PLC+this.ID,(!1),(!0),this,d);break;case"AddChildWindow":e.Position="Long";break;default:new GeneralElement(a,{Text:g},this)}}}.bind(this)),g(),emosWS.addEventListener("UserRight",g)}catch(a){console.log("appendPage failed: "+a)}},HDiagnosisWindow.prototype.appendElement=function(a,b){try{var c=getElementGlobalID(),d=$("<div id='"+c+"'><ul></ul></div>");d.appendTo(a);var e=d.tabs(),f=e.find("ul");sortHashArray(b).forEach(function(a){if("object"==typeof b[a]){var d=c+a;$("<li><a href='#"+d+"'>"+d+"</a></li>").appendTo(f);var g=$("<div id='"+d+"'></div>");g.appendTo(e),this.appendElement(g,b[a])}else $("<p>"+a+" = "+b[a]+"</p>").appendTo(e)}.bind(this)),e.tabs("refresh")}catch(a){console.log("appendElement failed: "+a)}},HDiagnosisWindow.prototype.doCondition=function(){try{this.data?(this.startAnimate(),this.buildSubMenueForChildWin()):this.adviseDiagnosisData(this.DiagnosisControl,this.startAnimate.bind(this))}catch(a){console.log("HDiagnosisWindow doCondition failed: "+a)}},HDiagnosisWindow.prototype.buildSubMenueForChildWin=function(){try{if(this.childWindows){$(".arrangeTabs ").addClass("hasChild");var a=this.data.childWindowsData,b=[];b.push("<li class='sub'>duplicate this Window</li>"),$.each(this.childWindows,function(c,d){b.push("<li class='sub' data-obj='"+d+"'>"+a[d].Comment+"</li>")}),$("<ul/>",{class:"subMenu",html:b.join("")}).appendTo("#"+this.diaheadId)}}catch(a){console.log("buildSubMenueForChildWin: "+a)}},HDiagnosisWindow.prototype.startAnimate=function(){this.run||(this.createDiagnosisWindow(),this.run=!0)},HDiagnosisWindow.prototype.initialize=function(){try{this.doCondition()}catch(a){console.log("HDiagnosisWindow initialize failed: "+a)}},emosWS.HTMLDiagnosisWindow=HDiagnosisWindow;var privateCallback;function EmosAlarm(a,b){this.placeholderName=a,this.configuration=b,this.table=null,this.headerList=[["T04_Time.name","dateTime"],["T04_AlarmServer.name","alarmServer"],["T04_AlarmGroup.name","alarmGroup"],["T04_Type.name","alarmType"],["T04_Field.name","location"],["T04_ClassID.name","classID"],["T04_Priority.name","priority"],["T04_Text.name","alarmText"],["T04_Tagname.name","tagname"],["T04_Duration.name","duration"]],this.data=[],this.headerCells=[],this.dataLength=0,this.typeIndex=this.indexOfAHeader("T04_Type.name"),this.classIDIndex=this.indexOfAHeader("T04_ClassID.name"),this.tagnameIndex=this.indexOfAHeader("T04_Tagname.name"),this.typeIndex=this.indexOfAHeader("T04_Type.name"),this.updateJob=null,this.updateBusy=!1,this.otable=null,$.fn.dataTableExt.oApi.fnAddDataAndDisplay=function(a,b){var c=this.oApi._fnAddData(a,b),d=a.aoData[c].nTr;this.oApi._fnReDraw(a);for(var e=-1,f=0,g=a.aiDisplay.length;f<g;f++)if(a.aoData[a.aiDisplay[f]].nTr===d){e=f;break}return e>=0&&(a._iDisplayStart=Math.floor(f/a._iDisplayLength)*a._iDisplayLength,this.oApi._fnCalculateEnd(a)),this.oApi._fnDraw(a),{nTr:d,iPos:c}}}EmosAlarm.prototype.indexOfAHeader=function(a){for(var b=0,c=this.headerList.length;b<c;b++)if(this.headerList[b][0]===a)return b;return-1},EmosAlarm.prototype.empty=function(){this.otable.fnClearTable()},EmosAlarm.prototype.update=function(a,b){try{var c=b;if("alarmText"===a.type&&"internal"!==a.tagname)switch(a.alarmType){case"3RTN":case"2ACK":for(var d=c.otable.fnGetData(),e=0,f=d.length;e<f;e++)if(d[e][c.tagnameIndex]===a.tagname){c.otable.fnDeleteRow(e);break}if("3RTN"===a.alarmType)break;default:var g=c.getLocalTime(a.date,a.time);a.date=g[0],a.time=g[1],a.dateTime=a.date+" "+a.time,a.beginTime=c.convertToTimestamp(a.date,a.time),a.duration=c.convertToDate(a.beginTime),c.dataLength++,a.id=c.dataLength,c.data.unshift(a);for(var h=[],e=0,f=c.headerList.length;e<f;e++)h[e]=a[c.headerList[e][1]];c.otable.fnAddData(h)}else if("dataChange"===a.type){var i=c.indexOfAHeader(a.tag);i>=0&&(c.headerCells[i].innerHTML=a.value)}}catch(a){console.log("update() failed: "+a)}},EmosAlarm.prototype.updateAlarmList=function(){var a=5e3,b=this;this.updateJob=setInterval(function(){if(!b.updateBusy){b.updateBusy=!0;for(var a=b.table.getElementsByTagName("tr"),c=1;c<a.length;c++){var d=a[c].getElementsByTagName("td");d[d.length-1].innerHTML=convertToDate(b.data[c-1].beginTime)}b.updateBusy=!1}},a)},EmosAlarm.prototype.convertToTimestamp=function(a,b){try{if(""===a)return"";var c=a.split("-"),d=b.split(":"),e=d[2].split(",");return new Date(c[1]+"/"+c[2]+"/"+c[0]+" "+d[0]+":"+d[1]+":"+e[0]).getTime()}catch(a){console.log("convertToTime() failed: "+a)}},EmosAlarm.prototype.getLocalTime=function(a,b){try{if(""===a)return["",""];var c=a.split("."),d=b.split(":"),e=d[2].split(","),f=new Date(c[1]+"/"+c[0]+"/"+c[2]+" "+d[0]+":"+d[1]+":"+e[0]+" UTC"),g=f.getDate();g=g<10?"0"+g:g;var h=f.getMonth()+1;h=h<10?"0"+h:h;var i=f.getHours();i=i<10?"0"+i:i;var j=f.getMinutes();j=j<10?"0"+j:j;var k=f.getSeconds();k=k<10?"0"+k:k;var l=f.getFullYear()+"-"+h+"-"+g,m=i+":"+j+":"+k+","+e[1];return[l,m]}catch(a){console.log("getLocalTime() failed: "+a)}},EmosAlarm.prototype.render=function(){try{var a=this;this.table=document.getElementById(this.placeholderName);var b=this.table.createTHead().insertRow();b.className="alarmTable header";for(var c=0,d=this.headerList.length;c<d;c++)b.insertCell().innerHTML=this.headerList[c][0];this.headerCells=b.getElementsByTagName("td"),$("#"+this.placeholderName+" tbody tr").live("click",function(){var b="",c=$("td",this);b+="Time:   \t"+$(c[a.indexOfAHeader("T04_Time.name")]).text()+"\n",b+="Text:   \t"+$(c[a.indexOfAHeader("T04_Text.name")]).text()+"\n",b+="Tagname:\t"+$(c[a.indexOfAHeader("T04_Tagname.name")]).text()+"\n",alert(b)}),this.otable=$("#"+this.placeholderName).dataTable({sScrollY:"400px",oLanguage:{sSearch:"Search all columns:"},fnCreatedRow:function(b,c,d){switch(c[a.classIDIndex]){case"1":$(b).addClass("1NEW"===c[a.typeIndex]?"alarmTable alarmnew":"alarmTable alarmack");break;case"2":$(b).addClass("1NEW"===c[a.typeIndex]?"alarmTable warningnew":"alarmTable warningack");break;default:$(b).addClass("1NEW"===c[a.typeIndex]?"alarmTable othernew":"alarmTable otherack")}},aaSorting:[[0,"dsc"]]});var e=this.otable,f=new Array;$("tfoot input").keyup(function(){e.fnFilter(this.value,$("tfoot input").index(this))}),$("tfoot input").each(function(a){f[a]=this.value}),$("tfoot input").focus(function(){"search_init"==this.className&&(this.className="",this.value="")}),$("tfoot input").blur(function(a){""==this.value&&(this.className="search_init",this.value=f[$("tfoot input").index(this)])})}catch(a){console.log("Alarm render failed: "+a)}},EmosAlarm.prototype.convertToDate=function(a){try{if(""===a)return"";var b=(new Date).getTime(),c=parseInt((b-a)/1e3),d=parseInt(c/86400),e=parseInt(c/3600)%24,f=parseInt(c/60)%60,g=c%60;return d+":"+(e<10?"0"+e:e)+":"+(f<10?"0"+f:f)+":"+(g<10?"0"+g:g)}catch(a){console.log("convertToDate() failed: "+a)}},emosWS.EmosAlarm=EmosAlarm;function ForeignObject(a){this.placeholderVisible="undefined"!=typeof a.placeholderVisible&&a.placeholderVisible,this.targetId=a.uiID,this.name=a.name||this.targetId,this.id=this.targetId+"_div",this.elementId=this.getElementId(),this.placeHolder=getSVGElement(this.targetId),this.placeHolder&&(this.width=this.placeHolder.getAttribute("width"),this.height=this.placeHolder.getAttribute("height"),this.x=this.placeHolder.getAttribute("x"),this.y=this.placeHolder.getAttribute("y")),this.divElement=null,this.divJElement=null,this.element=null,this.isSVGForeignObject=this.useHTMLElement&&emosWS.attr.supportForeignObject,this.render()}ForeignObject.prototype.render=function(){try{if(this.isSVGForeignObject){var a=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");setTimeout(function(){""!==a.parentNode.style.visibility&&a.setAttribute("style","visibility: "+a.parentNode.style.visibility)},500);var b=document.createElementNS("http://www.w3.org/1999/xhtml","body");b.setAttribute("style","margin:0; width:100%; height:100%"),a.appendChild(b),a.setAttribute("width",this.width),a.setAttribute("height",this.height),a.setAttribute("x",this.x),a.setAttribute("y",this.y),this.placeHolder.parentNode.replaceChild(a,this.placeHolder),this.divElement=b,this.renderMore()}else{var c=document.createElementNS("http://www.w3.org/2000/svg","rect");this.placeHolder.appendChild(c),c.setAttribute("width",this.width),c.setAttribute("height",this.height),c.setAttribute("x",this.x),c.setAttribute("y",this.y);var d=$('<div class="PlaceHolder" id="'+this.id+'"></div>');$("body").append(d),this.divElement=document.getElementById(this.id),this.divJElement=$("#"+this.id),this.renderMore(),this.placeholderVisible||this.hidePlaceHolder();var e=this,f=function(){e.onResize()};window.attachEvent?window.attachEvent("onresize",f):window.addEventListener&&window.addEventListener("resize",f,!0),f()}window[this.name]=this.element,emosWS.addLanguageChangeListener(function(a){this.onLanguage(a)}.bind(this))}catch(a){console.log("ForeignObject render failed: "+a)}},ForeignObject.prototype.renderMore=function(){},ForeignObject.prototype.elementInViewport=function(a){var b=a.offsetTop,c=a.offsetLeft,d=a.offsetWidth,e=a.offsetHeight;while(a.offsetParent)a=a.offsetParent,b+=a.offsetTop,c+=a.offsetLeft;return b>=window.pageYOffset&&c>=window.pageXOffset&&b+e<=window.pageYOffset+window.innerHeight&&c+d<=window.pageXOffset+window.innerWidth},ForeignObject.prototype.setStyle=function(a){this.isSVGForeignObject?(a.style.width="100%",a.style.height="100%"):a.setAttribute("class","ForeignObject")},ForeignObject.prototype.onResize=function(){try{var a=this.placeHolder.getBoundingClientRect();this.divElement.style.top=a.top+"px",this.divElement.style.left=a.left+"px",this.divElement.style.width=a.width-1+"px",this.divElement.style.height=a.height-1+"px";var b=a.width/this.width;this.element&&(this.element.style.fontSize=b+"em"),this.onResizeMore()}catch(a){console.log("ForeignObject onResize failed: "+a)}},ForeignObject.prototype.onLanguage=function(a){},ForeignObject.prototype.onResizeMore=function(){},ForeignObject.prototype.getElementId=function(){return this.targetId+"_"+this.constructor.name},ForeignObject.prototype.hidePlaceHolder=function(){this.placeHolder.setAttribute("visibility","hidden")},ForeignObject.prototype.getElement=function(){return this.isSVGForeignObject?getSVGElement(this.elementId):document.getElementById(this.elementId)},emosWS.ForeignObject=ForeignObject;function AlarmFilterReport(a){this.wrapperCSS=this.wrapperCSS||"AlarmFilterWrapper",this.tableCSS=this.tableCSS||"AlarmFilterReport",this.placeholderID=a.uiID,this.alarmGroup=a.Advise_AlarmGroup,this.useSingleLine=a.Display_SingleLine,this.dateWidth=a.Width01_Date,this.timeWidth=a.Width02_Time,this.alarmServerWidth=a.Width03_AlarmServer,this.alarmGroupWidth=a.Width04_AlarmGroup,this.groupAliaseWidth=a.Width05_GroupAlias,this.typeWidth=a.Width06_Type,this.fieldWidth=a.Width07_Field,this.classWidth=a.Width08_Class,this.priorityWidth=a.Width09_Priority,this.textWidth=a.Width10_Text,this.tagWidth=a.Width11_Tagname,this.durationWidth=a.Width12_Duration,this.alarmNewTextColor=a.Color01_AlmNewText,this.alarmNewBGColor=a.Color02_AlmNewBkgr,this.alarmAckTextColor=a.Color03_AlmAckText,this.alarmAckBGColor=a.Color04_AlmAckBkgr,this.warnNewTextColor=a.Color05_WrnNewText,this.warnNewBGColor=a.Color06_WrnNewBkgr,this.warnAckTextColor=a.Color07_WrnAckText,this.warnAckBGColor=a.Color08_WrnAckBkgr,this.otherNewTextColor=a.Color09_OthNewText,this.otherNewBGColor=a.Color10_OthNewBkgr,this.otherAckTextColor=a.Color11_OthAckText,this.otherAckBGColor=a.Color12_OthAckBkgr,this.useBold=a.Display_BoldFont,this.filterClass=a.Filter_Class,this.filterPrioFrom=a.Filter_PriorityFrom,this.filterPrioTo=a.Filter_PriorityTo,this.columnsSize=[a.Width01_Date,a.Width02_Time,a.Width03_AlarmServer,a.Width04_AlarmGroup,a.Width05_GroupAlias,a.Width06_Type,a.Width07_Field,a.Width08_Class,a.Width09_Priority,a.Width10_Text,a.Width11_Tagname,a.Width12_Duration];for(var b=0,c=0,d=this.columnsSize.length;c<d;c++)b+=this.columnsSize[c];for(var c=0,d=this.columnsSize.length;c<d;c++)this.columnsSize[c]=parseInt(this.columnsSize[c]/b*100);this.texIDList={date:"T04_Date",time:"T04_Time",alarmServer:"T04_AlarmServer",alarmGroup:"T04_AlarmGroup",alias:"T04_AlarmAlias",alarmType:"T04_Type",location:"T04_Field",classID:"T04_ClassID",priority:"T04_Priority",alarmText:"T04_Text",tagname:"T04_Tagname",duration:"T04_Duration"},this.columns=["date","time","alarmServer","alarmGroup","alias","alarmType","location","classID","priority","alarmText","tagname","duration"],this.commandText={T04_Acknowledge:""},this.alarmTable={object:null,id:null},ForeignObject.call(this,a),ESAnimation.call(this)}AlarmFilterReport.prototype=Object.create(ForeignObject.prototype),AlarmFilterReport.prototype=emosWS.fn.emosExtend(AlarmFilterReport.prototype,ESAnimation.prototype),AlarmFilterReport.prototype.constructor=AlarmFilterReport,AlarmFilterReport.prototype.initializeMore=function(){this.adviseData()},AlarmFilterReport.prototype.renderMore=function(){this.createCSS(),this.createTable(),this.adviseText()},AlarmFilterReport.prototype.createCSS=function(){var a=document.createElement("style");a.type="text/css",a.innerHTML="            .alarmTable.alarmnew tr, .alarmTable.alarmnew td{\n                background-color:"+this.alarmNewBGColor+";\n                color:"+this.alarmNewTextColor+";\n                white-space: nowrap;\n                overflow: hidden;\n            }\n            .alarmTable.alarmack tr, .alarmTable.alarmack td{\n                background-color:"+this.alarmAckBGColor+";\n                color:"+this.alarmAckTextColor+";\n                white-space: nowrap;\n                overflow: hidden;\n            }\n            .alarmTable.warningnew tr, .alarmTable.warningnew td{\n                background-color:"+this.warnNewBGColor+";\n                color:"+this.warnNewTextColor+";\n                white-space: nowrap;\n                overflow: hidden;\n            }\n            .alarmTable.warningack tr, .alarmTable.warningack td{\n                background-color:"+this.warnAckBGColor+";\n                color:"+this.warnAckTextColor+";\n                white-space: nowrap;\n                overflow: hidden;\n            }\n            .alarmTable.othernew tr, .alarmTable.othernew td{\n                background-color:"+this.otherNewBGColor+";\n                color:"+this.otherNewTextColor+";\n                white-space: nowrap;\n                overflow: hidden;\n            }\n            .alarmTable.otherack tr, .alarmTable.otherack td{\n                background-color:"+this.otherAckBGColor+";\n                color:"+this.otherAckTextColor+";\n                white-space: nowrap;\n                overflow: hidden;\n            }\n            ",document.getElementsByTagName("head")[0].appendChild(a)},AlarmFilterReport.prototype.createTable=function(){this.alarmTable.id=getElementGlobalID();for(var a='<div class="'+this.wrapperCSS+'" id="'+this.elementId+'">\n            <table border="0" class="'+this.tableCSS+'" id="'+this.alarmTable.id+'">',b=0,c=this.columns.length;b<c;b++)a+='<col style="width:'+this.columnsSize[b]+'%">';a+="</table></div>";var d=$(a);this.divJElement.append(d),this.element=document.getElementById(this.elementId),this.table=document.getElementById(this.alarmTable.id),this.createTableHeader()},AlarmFilterReport.prototype.createTableHeader=function(){try{var a=this.table.createTHead().insertRow();a.className="AlarmFilterHeader",a.myCells={};for(var b in this.texIDList){var c=a.insertCell();c.innerHTML=this.texIDList[b],a.myCells[this.texIDList[b]+".name"]=c,emosWS.sendAdviseText(this.texIDList[b],"name",function(b){a.myCells[b.tag].innerHTML=b.value})}}catch(a){console.log("createTableHeader() failed: "+a)}},AlarmFilterReport.prototype.validateMsg=function(a){try{if("alarmText"!==a.type||"internal"===a.tagname)return!1;var b=parseInt(a.classID),c=parseInt(a.priority);return!(this.filterPrioFrom[b]>c||this.filterPrioTo[b]<c)&&(a.newClassID=this.filterClass[b],!0)}catch(a){console.log("validateMsg() failed: "+a)}},AlarmFilterReport.prototype.adviseText=function(){try{var a=this;for(var b in this.commandText)emosWS.sendAdviseText(b,"name",function(b){var c=b.tag.split(".name")[0];c&&(a.commandText[c]=b.value)})}catch(a){console.log("adviseText() failed: "+a)}},AlarmFilterReport.prototype.adviseData=function(){try{var a=this;emosWS.sendAdviseAlarmText(this.alarmGroup,emosWS.getLanguage(),function(b){a.validateMsg(b)&&a.updateTable(b)})}catch(a){console.log("adviseData() failed: "+a)}},AlarmFilterReport.prototype.updateTable=function(a){try{for(var b=this.table.rows,c=1;c<b.length;c++){var d=b[c].myMsg;if(d.tagname===a.tagname){this.table.deleteRow(c);break}}this.addRow(a,1)}catch(a){console.log("updateTable() failed: "+a)}},AlarmFilterReport.prototype.addRow=function(a,b){try{if(a&&"3RTN"!==a.alarmType){var c=this.table.insertRow(b);c.myMsg=a;var d="";switch(a.newClassID){case 0:d="1NEW"===a.alarmType?"alarmTable alarmnew":"alarmTable alarmack";break;case 1:d="1NEW"===a.alarmType?"alarmTable warningnew":"alarmTable warningack";break;default:d="1NEW"===a.alarmType?"alarmTable othernew":"alarmTable otherack"}c.className=d,c.title="";for(var e=0,f=this.columns.length;e<f;e++){var g=a[this.columns[e]]||"N/A";if(c.title+=this.columns[e]+":   "+g+"\n",g){var h=c.insertCell(-1);h.innerHTML=g}}c.addEventListener("click",this.onRowClick.bind(this,c),!1)}}catch(a){console.log("updateTable() failed: "+a)}},AlarmFilterReport.prototype.onRowClick=function(a){if("1NEW"===a.myMsg.alarmType){var b=a.title+"\n\n"+this.commandText.T04_Acknowledge+"?";confirm(b)&&emosWS.poke(a.myMsg.alarmGroup+".Alarm","-1")}else alert(a.title)},AlarmFilterReport.prototype.onLanguage=function(a){this.clearTable()},AlarmFilterReport.prototype.clearTable=function(){$("#"+this.alarmTable.id+"tbody tr").remove()},emosWS.AlarmFilterReport=AlarmFilterReport;function AlarmFilterSingleLine(a){this.wrapperCSS="AlarmFilterSingleLineWrapper",this.tableCSS="AlarmFilterSingleLine",this.table=null,this.alarmState={activeClass:null,activeAlarmGroup:null,list:{},alarms:{}},this.clearTable(),AlarmFilterReport.call(this,a)}AlarmFilterSingleLine.prototype=Object.create(AlarmFilterReport.prototype),AlarmFilterSingleLine.prototype.constructor=AlarmFilterSingleLine,AlarmFilterSingleLine.prototype.adviseData=function(){try{var a=this;emosWS.sendAdviseAlarmText(this.alarmGroup,emosWS.getLanguage(),function(b){a.validateMsg(b)&&(a.updateAlarmState(b),a.updateTable())})}catch(a){console.log("adviseData() failed: "+a)}},AlarmFilterSingleLine.prototype.createTableHeader=function(){},AlarmFilterSingleLine.prototype.updateTable=function(){try{this.table.rows.length>0&&this.table.deleteRow(0),this.addRow(this.alarmState.activeAlarmGroup,0)}catch(a){console.log("updateTable() failed: "+a)}},AlarmFilterSingleLine.prototype.onRowClick=function(){loadHREF("ActualAlarm.htm","ifContent")},AlarmFilterSingleLine.prototype.updateAlarmState=function(a){try{var b=a.tagname,c=parseInt(a.alarmType),d=a.newClassID;if(this.alarmState.list[b]&&3===c?(delete this.alarmState.list[b],delete this.alarmState.alarms[d][b],this.alarmState.activeAlarmGroup&&this.alarmState.activeAlarmGroup.tagname===b&&(this.alarmState.activeAlarmGroup=null)):(this.alarmState.list[b]=c,this.alarmState.alarms[d][b]={alarmType:c,msg:a},this.alarmState.activeAlarmGroup&&this.alarmState.activeAlarmGroup.tagname===b&&(this.alarmState.activeAlarmGroup.alarmType=c)),this.alarmState.activeAlarmGroup)(d<this.alarmState.activeClass||d===this.alarmState.activeClass&&c<=parseInt(this.alarmState.activeAlarmGroup.alarmType))&&(this.alarmState.activeAlarmGroup=a,this.alarmState.activeClass=d);else if(0===Object.keys(this.alarmState.list).length)this.alarmState.activeClass=1e3,this.alarmState.activeAlarmGroup=null;else{var e=1e3,f=null;this.alarmState.activeClass=1e3===this.alarmState.activeClass?0:this.alarmState.activeClass;for(var g=this.alarmState.activeClass;g<3;g++)if(Object.keys(this.alarmState.alarms[g]).length>0){var h=4;for(var i in this.alarmState.alarms[g])if(this.alarmState.alarms[g][i].alarmType<h){h=this.alarmState.alarms[g][i].alarmType,f=this.alarmState.alarms[g][i].msg,e=g;break}}this.alarmState.activeClass=e,this.alarmState.activeAlarmGroup=f}}catch(a){console.log("updatealarmState() failed: "+a)}},AlarmFilterSingleLine.prototype.clearTable=function(){this.alarmState.activeClass=1e3,this.alarmState.activeAlarmGroup=null;for(var a=0;a<3;a++)this.alarmState.alarms[a]={}},emosWS.AlarmFilterSingleLine=AlarmFilterSingleLine;function AlarmFilter(a){1===parseInt(a.Display_SingleLine)?new AlarmFilterSingleLine(a):new AlarmFilterReport(a)}emosWS.AlarmFilter=AlarmFilter;var EmosGraph=function(a,b){this.placeholderName=a,this.configuration=b,this.m=[20,20,20,40],this.w=400-this.m[1]-this.m[3],this.h=200-this.m[0]-this.m[2],this.initData=function(){for(var a=140,b=[],c=0;c<a;c++)b[c]=0;return b},this.data=this.initData(),this.x=d3.scale.linear().domain([0,this.data.length]).range([0,this.w]),this.y=d3.scale.linear().domain([-100,100]).range([this.h,0]);var c=this;this.line=d3.svg.line().x(function(a,b){return this.x(b)}).y(function(a){return this.y(a)}),this.render=function(){this.body=d3.select("#"+this.placeholderName).append("svg:svg").attr("class","EmosGraph").attr("width",this.w+this.m[1]+this.m[3]).attr("height",this.h+this.m[0]+this.m[2]).append("svg:g").attr("transform","translate("+this.m[3]+","+this.m[0]+")");var a=d3.svg.axis().scale(this.x).tickSize(-this.h).tickSubdivide(!0);this.body.append("svg:g").attr("class","x axis").attr("transform","translate(0,"+this.h+")").call(a);var b=d3.svg.axis().scale(this.y).tickSize(-this.w).tickSubdivide(!0).orient("left");this.body.append("svg:g").attr("class","y axis").attr("transform","translate(0,0)").call(b),this.body.append("svg:path").attr("d",this.line(this.data))},this.redraw=function(a){try{for(var b=[],d=0;d<c.data.length-1;d++)b[d]=c.data[d+1];b[c.data.length-1]=parseFloat(a.value),c.data=b,c.body.selectAll("path").attr("d",c.line(c.data))}catch(a){console.log("redraw() failed: "+a)}}};emosWS.EmosGraph=EmosGraph;var Gauge=function(a,b){this.placeholderName=a;var c=this;this.configure=function(a){this.config=a,this.config.size=.9*this.config.size,this.config.raduis=.97*this.config.size/2,this.config.cx=this.config.size/2,this.config.cy=this.config.size/2,this.config.min=void 0!=a.min?a.min:0,this.config.max=void 0!=a.max?a.max:100,this.config.range=this.config.max-this.config.min,this.config.majorTicks=a.majorTicks||5,this.config.minorTicks=a.minorTicks||2,this.config.greenColor=a.greenColor||"#109618",this.config.yellowColor=a.yellowColor||"#FF9900",this.config.redColor=a.redColor||"#DC3912",this.config.transitionDuration=a.transitionDuration||500},this.render=function(){this.body=d3.select("#"+this.placeholderName).append("svg:svg").attr("class","gauge").attr("width",this.config.size).attr("height",this.config.size),this.body.append("svg:circle").attr("cx",this.config.cx).attr("cy",this.config.cy).attr("r",this.config.raduis).style("fill","#ccc").style("stroke","#000").style("stroke-width","0.5px"),this.body.append("svg:circle").attr("cx",this.config.cx).attr("cy",this.config.cy).attr("r",.9*this.config.raduis).style("fill","#fff").style("stroke","#e0e0e0").style("stroke-width","2px");for(var a in this.config.greenZones)this.drawBand(this.config.greenZones[a].from,this.config.greenZones[a].to,c.config.greenColor);for(var a in this.config.yellowZones)this.drawBand(this.config.yellowZones[a].from,this.config.yellowZones[a].to,c.config.yellowColor);for(var a in this.config.redZones)this.drawBand(this.config.redZones[a].from,this.config.redZones[a].to,c.config.redColor);if(void 0!==this.config.label){var b=Math.round(this.config.size/9);this.body.append("svg:text").attr("x",this.config.cx).attr("y",this.config.cy/2+b/2).attr("dy",b/2).attr("text-anchor","middle").text(this.config.label).style("font-size",b+"px").style("fill","#333").style("stroke-width","0px")}for(var b=Math.round(this.config.size/16),d=this.config.range/(this.config.majorTicks-1),e=this.config.min;e<=this.config.max;e+=d){for(var f=d/this.config.minorTicks,g=e+f;g<Math.min(e+d,this.config.max);g+=f){var h=this.valueToPoint(g,.75),i=this.valueToPoint(g,.85);this.body.append("svg:line").attr("x1",h.x).attr("y1",h.y).attr("x2",i.x).attr("y2",i.y).style("stroke","#666").style("stroke-width","1px")}var h=this.valueToPoint(e,.7),i=this.valueToPoint(e,.85);if(this.body.append("svg:line").attr("x1",h.x).attr("y1",h.y).attr("x2",i.x).attr("y2",i.y).style("stroke","#333").style("stroke-width","2px"),e===this.config.min||e===this.config.max){var j=this.valueToPoint(e,.63);this.body.append("svg:text").attr("x",j.x).attr("y",j.y).attr("dy",b/3).attr("text-anchor",e===this.config.min?"start":"end").text(e).style("font-size",b+"px").style("fill","#333").style("stroke-width","0px")}}var k=this.body.append("svg:g").attr("class","pointerContainer"),l=(this.config.min+this.config.max)/2,m=this.buildPointerPath(l),n=d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("basis");k.selectAll("path").data([m]).enter().append("svg:path").attr("d",n).style("fill","#dc3912").style("stroke","#c63310").style("fill-opacity",.7),k.append("svg:circle").attr("cx",this.config.cx).attr("cy",this.config.cy).attr("r",.12*this.config.raduis).style("fill","#4684EE").style("stroke","#666").style("opacity",1);var b=Math.round(this.config.size/10);k.selectAll("text").data([l]).enter().append("svg:text").attr("x",this.config.cx).attr("y",this.config.size-this.config.cy/4-b).attr("dy",b/2).attr("text-anchor","middle").style("font-size",b+"px").style("fill","#000").style("stroke-width","0px"),this.redraw(this.config.min,0)},this.buildPointerPath=function(a){var b=this.config.range/13,d=k(a,.85),e=k(a-b,.12),f=k(a+b,.12),g=a-this.config.range*(1/.75)/2,h=k(g,.28),i=k(g-b,.12),j=k(g+b,.12);return[d,e,j,h,i,f,d];function k(a,b){var d=c.valueToPoint(a,b);return d.x-=c.config.cx,d.y-=c.config.cy,d}},this.drawBand=function(a,b,d){0>=b-a||this.body.append("svg:path").style("fill",d).attr("d",d3.svg.arc().startAngle(this.valueToRadians(a)).endAngle(this.valueToRadians(b)).innerRadius(.65*this.config.raduis).outerRadius(.85*this.config.raduis)).attr("transform",function(){return"translate("+c.config.cx+", "+c.config.cy+") rotate(270)"})},this.redraw=function(a,b){var d=this.body.select(".pointerContainer");d.selectAll("text").text(Math.round(a)+" %");var e=d.selectAll("path");e.transition().duration(void 0!==b?b:this.config.transitionDuration).attrTween("transform",function(){var b=a;a>c.config.max?b=c.config.max+.02*c.config.range:a<c.config.min&&(b=c.config.min-.02*c.config.range);var d=c.valueToDegrees(b)-90,e=c._currentRotation||d;return c._currentRotation=d,function(a){var b=e+(d-e)*a;return"translate("+c.config.cx+", "+c.config.cy+") rotate("+b+")"}})},this.valueToDegrees=function(a){return a/this.config.range*270-(this.config.min/this.config.range*270+45)},this.valueToRadians=function(a){return this.valueToDegrees(a)*Math.PI/180},this.valueToPoint=function(a,b){return{x:this.config.cx-this.config.raduis*b*Math.cos(this.valueToRadians(a)),y:this.config.cy-this.config.raduis*b*Math.sin(this.valueToRadians(a))}},this.configure(b)};emosWS.Gauge=Gauge;function InputText(a){this.useHTMLElement=!0,this.text=a.text||"",this.pattern=a.pattern||"",this.maxlength="undefined"!=typeof a.maxlength?a.maxlength:0,this.fontSize=a["font-size"],this.onchange=a.onchange,this.onkeypress=a.onkeypress,ForeignObject.call(this,a)}InputText.prototype=Object.create(ForeignObject.prototype),InputText.prototype.constructor=InputText,InputText.prototype.renderMore=function(){var a=document.createElement("input");a.setAttribute("type","text"),this.setStyle(a),a.setAttribute("id",this.elementId),this.pattern&&a.setAttribute("pattern",this.pattern),this.maxlength&&a.setAttribute("maxlength",this.maxlength),this.divElement.appendChild(a),this.element=this.getElement(),this.addEditXFunctionality(),this.element.value=this.text,this.fontSize&&(this.element.style["font-size"]=this.fontSize),this.element.value=this.text;var b=this;this.onchange&&this.element.addEventListener("change",function(){b.onchange(this.value,this)},!1),this.onkeypress&&this.element.addEventListener("keypress",function(a){b.onkeypress(a,this)},!0)},InputText.prototype.addEditXFunctionality=function(){var a=this.element,b=function(a){a>>>=0;var b=255&a,c=(65280&a)>>>8,d=(16711680&a)>>>16;return"rgb("+[b,c,d].join(",")+")"};Object.defineProperty(a,"Text",{get:function(){return a.value},set:function(b){a.value=b}}),Object.defineProperty(a,"BackColor",{get:function(){return a.style["background-color"]},set:function(c){a.style["background-color"]=b(c)}})},emosWS.InputText=InputText;function ComboBox(a){this.useHTMLElement=!0,this.optionTexts=a.options,this.onchange=a.onchange,ForeignObject.call(this,a)}ComboBox.prototype=Object.create(ForeignObject.prototype),ComboBox.prototype.constructor=ComboBox,ComboBox.prototype.renderMore=function(){try{var a=document.createElement("select");this.setStyle(a),a.setAttribute("id",this.elementId),this.divElement.appendChild(a),this.element=this.getElement();for(var b=0,c=this.optionTexts.length;b<c;b++)this.element.options.add(new Option(this.optionTexts[b],b));var d=this;this.onchange&&this.element.addEventListener("change",function(){d.onchange(this[this.value].label,this.value,this)},!1)}catch(a){console.log("ComboBox renderMore() failed: "+a)}},emosWS.ComboBox=ComboBox;function Checkbox(a){this.useHTMLElement=!0,this.onclick=a.onclick,ForeignObject.call(this,a)}Checkbox.prototype=Object.create(ForeignObject.prototype),Checkbox.prototype.constructor=Checkbox,Checkbox.prototype.renderMore=function(){try{var a=document.createElement("input");a.setAttribute("type","checkbox"),this.setStyle(a),a.setAttribute("id",this.elementId),this.divElement.appendChild(a),this.element=this.getElement();var b=this;this.onclick&&this.element.addEventListener("click",function(){b.onclick(this.checked,this)},!1)}catch(a){console.log("Checkbox renderMore() failed: "+a)}},emosWS.Checkbox=Checkbox;function InputButton(a){this.useHTMLElement=!0,this.text=a.text,this.onclick=a.onclick,ForeignObject.call(this,a)}InputButton.prototype=Object.create(ForeignObject.prototype),InputButton.prototype.constructor=InputButton,InputButton.prototype.renderMore=function(){try{var a=document.createElement("input");a.setAttribute("type","button"),this.setStyle(a),a.setAttribute("id",this.elementId),this.divElement.appendChild(a),this.element=this.getElement(),this.element.value=this.text;var b=this;b.onclick&&this.element.addEventListener("click",function(){
b.onclick()},!1)}catch(a){console.log("InputButton renderMore() failed: "+a)}},emosWS.InputButton=InputButton;function InputRadio(a){this.optionTexts=a.options,this.onclick=a.onclick,this.horizontal="undefined"==typeof a.horizontal||a.horizontal,ForeignObject.call(this,a)}InputRadio.prototype=Object.create(ForeignObject.prototype),InputRadio.prototype.constructor=InputRadio,InputRadio.prototype.renderMore=function(){try{this.element=[];for(var a=this,b=this.horizontal?"foRadioHorizonal":"foRadioVertial",c=0,d=this.optionTexts.length;c<d;c++){var e=this.optionTexts[c],f=this.elementId+c,g=document.createElement("radio");this.setStyle(g),g.setAttribute("id",this.elementId),g.setAttribute("name",this.targetId),g.setAttribute("value",e),this.divElement.appendChild(g),this.element.push(g);var h=document.createElement("label");h.innerHTML=e,this.divElement.appendChild(h),this.element.push(h),this.onclick&&g.addEventListener("click",function(){a.onclick(this)},!1)}}catch(a){console.log("InputRadio renderMore() failed: "+a)}},emosWS.InputRadio=InputRadio;function VariableDialog(){this.divElement=null,this.ui=null,this.tree=null,this.treeId=null,this.trendId=null,this.PLCListName="emosTrendPLCList",this.PLCList=this.retrievePLCList(),this.createGUI(),window.TrendPageVariableDialog=this}VariableDialog.prototype.createGUI=function(){try{var a=getElementGlobalID();this.treeId=getElementGlobalID();var b='<div id="'+a+'" class="VariableDialog">\n                    <div id="'+this.treeId+'" class="css-treeview"></div>\n                </div>',c=$(b);$("body").append(c),this.ui=$("#"+a).dialog({title:"Variable dialog",width:200,height:400,resizable:!0}),this.ui.dialog("close"),this.tree=$("#"+this.treeId),this.divElement=document.getElementById(a)}catch(a){console.log("VariableDialog createGUI() failed: "+a)}},VariableDialog.prototype.setPosition=function(a){this.ui.dialog("option","position",{my:"left top+30",at:"left top",of:a})},VariableDialog.prototype.setTrendId=function(a){this.trendId||(this.trendId=a,this.getPlanList())},VariableDialog.prototype.storePLCList=function(){"undefined"!=typeof Storage&&localStorage.setItem(this.PLCListName,JSON.stringify(this.PLCList))},VariableDialog.prototype.retrievePLCList=function(){if("undefined"!=typeof Storage)return JSON.parse(localStorage.getItem(this.PLCListName))||{}},VariableDialog.prototype.getPlanList=function(){emosWS.sendTrendGetPlantList(this.trendId)},VariableDialog.prototype.onDataTrendPlantList=function(a){try{for(var b=JSON.parse(a.data).PLC,c=0,d=b.length;c<d;c++)"undefined"==typeof this.PLCList[b[c]]&&(this.PLCList[b[c]]=null);this.storePLCList(),this.updatePLC()}catch(a){console.log("VariableDialog onDataTrendPlantList() failed: "+a)}},VariableDialog.prototype.onDataTrendItemList=function(a){try{var b=JSON.parse(a.data),c=b.Items,d=b.PLC;this.PLCList[d]=[];for(var e=0,f=c.length;e<f;e++){var g=c[e];this.PLCList[d].push(g)}this.storePLCList(),this.updateTag(d)}catch(a){console.log("VariableDialog onDataTrendItemList() failed: "+a)}},VariableDialog.prototype.updatePLC=function(){try{for(var a in this.PLCList){var b=this.treeId+a,c='<li id="'+b+'li"><input type="checkbox" id="'+b+'" /><label for="'+b+'">'+a+"</label>",d=$(c);this.tree.append(d),this.PLCList[a]?this.updateTag(a):document.getElementById(b).addEventListener("click",function(a){console.log(a+" cliked!"),this.PLCList[a]?this.PLCList[a]=[]:emosWS.sendTrendGetItemList(this.trendId,a)}.bind(this,a),!1)}}catch(a){console.log("VariableDialog updatePLC() failed: "+a)}},VariableDialog.prototype.updateTag=function(a){try{if(this.PLCList[a]){for(var b=this.treeId+a+"li",c="<ul>",d=0,e=this.PLCList[a].length;d<e;d++){var f=b+d,g=this.PLCList[a][d],h="";for(var i in g)h+=i+":  "+g[i]+"\n";c+='<li><p id="'+f+'" draggable="true" title="'+h+'">'+g.Tag+"</p></li>"}c+="</ul>";var j=$(c);$("#"+b).append(j);for(var d=0,e=this.PLCList[a].length;d<e;d++){var f=b+d,k=document.getElementById(f);k.addEventListener("dragstart",function(b){b.dataTransfer.setData("text",a+b.target.textContent)},!1)}}}catch(a){console.log("VariableDialog updateTag() failed: "+a)}},emosWS.VariableDialog=VariableDialog;function Diagram(a){this.divElement=null,this.id=null,this.chartId=null,this.timeLineId=null,this.previewId=null,this.backId=null,this.nextId=null,this.seriesData=[],this.ui=null,this.chart=null,this.graph=null,this.tagList={},this.chartDataX=["x"],this.chartDataYList={},this.liveInterval=1e3,this.historicInterval=120,this.jitter=5,this.nullValue=.1122,this.lastUpdate=null,this.legends=["x"],this.rowsData=[this.legends],this.liveDuration=1,this.useShowAllData=!0,this.resolution=1,this.stopLive=!1,this.chartData={xs:{},columns:[]},this.tagDataIndex={},this.tagDataLength=0,this.callbackList={},this.timestampList=[],this.useLive=a.useLive,this.usePoint=a.usePoint,this.useDataInterpolated=a.useDataInterpolated,this.backgroundColor="transparent",this.droptBackgroundColor="#2E64FE",this.blackhole=null,this.trendRegisteredListeners=[],this.trendPage=a,a.diagramList.push(this),this.createGUI()}Diagram.prototype.getXAxisID=function(a){return"x"+a},Diagram.prototype.addNewTag=function(a){var b=this.getXAxisID(this.tagDataLength),c=2*this.tagDataLength;this.chartData.xs[a]=b,this.tagDataIndex[a]={x:c,y:c+1},this.chartData.columns.splice(this.tagDataIndex[a].x,0,[b]),this.chartData.columns.splice(this.tagDataIndex[a].y,0,[a]),this.tagDataLength++},Diagram.prototype.getTS=function(a){var b=new Date(a),c=b.getTime()/this.resolution;return parseInt(c)},Diagram.prototype.getValue=function(a){return parseFloat(a)},Diagram.prototype.addNewTagValue=function(a,b){this.chartData.columns[this.tagDataIndex[a].x].push(this.getTS(b.ts)),this.chartData.columns[this.tagDataIndex[a].y].push(this.getValue(b.value))},Diagram.prototype.joinData=function(a,b){var c={};[a,b].forEach(function(a){a.x.forEach(function(b,d){c[b.toString()]={x:b,y:a.y[d]}})});var d=[];for(var e in c)d.push(e);d.sort();var f={x:[],y:[]};return d.forEach(function(a){f.x.push(c[a].x),f.y.push(c[a].y)}),f},Diagram.prototype.addNewTagValues=function(a,b){var c={x:[],y:[]};b.Values.forEach(function(a){c.x.push(this.getTS(a.TS)),c.y.push(this.getValue(a.Value))}.bind(this));var d=this.chartData.columns[this.tagDataIndex[a].x].slice(),e=this.chartData.columns[this.tagDataIndex[a].y].slice(),f=d.shift(),g=e.shift(),h={x:d,y:e},i=this.joinData(h,c);i.x.unshift(f),i.y.unshift(g),this.chartData.columns[this.tagDataIndex[a].x]=i.x,this.chartData.columns[this.tagDataIndex[a].y]=i.y},Diagram.prototype.clearChartData=function(){this.chartData.columns.forEach(function(a){a.splice(1,a.length-1)})},Diagram.prototype.createGUI=function(){try{this.id=getElementGlobalID(),this.chartId=this.id+"chart",this.timeLineId=this.id+"tl",this.previewId=this.id+"pre",this.backId=this.id+"back",this.nextId=this.id+"next",this.id=getElementGlobalID();var a='<div id="'+this.id+'" class="TrendPageRow TrendPageDiagram">\n                        <div id="'+this.backId+'" class="TrendPageDiagramBackNext TrendPageDiagramBack"></div>\n                        <div id="'+this.chartId+'" class="TrendPageDiagramChart"></div>\n                        <div id="'+this.nextId+'" class="TrendPageDiagramBackNext TrendPageDiagramNext"></div>\n                    </div>',b=$(a);this.trendPage.diagrams.append(b),this.ui=document.getElementById(this.id),this.backgroundColor=this.ui.style.backgroundColor,this.chart=document.getElementById(this.chartId);var c=this;this.ui.addEventListener("drop",function(a){c.drop(a)},!1),this.ui.addEventListener("dragover",function(a){c.allowDrop(a)},!1),this.ui.addEventListener("dragleave",function(a){c.ui.style.backgroundColor=c.backgroundColor},!1),this.chart.addEventListener("dblclick",function(){this.trendPage.filterDateDialog.show(this)}.bind(this),!1),document.getElementById(this.backId).addEventListener("click",function(){this.loadDataBack()}.bind(this),!1),document.getElementById(this.nextId).addEventListener("click",function(){this.loadDataNext()}.bind(this),!1)}catch(a){console.log("Diagram createGUI() failed: "+a)}},Diagram.prototype.addTrendRegisteredListener=function(a){this.trendPage.trendId?a():this.trendRegisteredListeners.push(a)},Diagram.prototype.onTrendRegistered=function(){this.trendRegisteredListeners.forEach(function(a){a()})},Diagram.prototype.onDataTrendItemValueList=function(a){try{var b=a.PLC+a.Tag;console.log("onDataTrendItemValueList: plctag = "+b),"undefined"!=typeof this.tagDataIndex[b]&&(this.addNewTagValues(b,a),this.loadChart())}catch(a){console.log("Diagram onDataTrendItemValueList() failed: "+a)}},Diagram.prototype.refreshSize=function(a){this.ui.style.height=a+"px",this.graph&&this.graph.resize({height:a})},Diagram.prototype.createChart=function(){try{var a=this,b="#"+this.chartId;this.graph=c3.generate({bindto:b,data:this.chartData,axis:{x:{tick:{count:3,format:function(a){var b=new Date(a*this.resolution);return b.toLocaleString()+" ."+b.getMilliseconds()}.bind(this)}}},subchart:{show:this.trendPage.advanced},zoom:{enabled:!0},point:{show:this.usePoint},transition:{duration:0},type:this.useDataInterpolated?"line":"step"});var c=setInterval(function(){this.useLive&&this.loadChart()}.bind(this),this.liveInterval)}catch(a){console.log("Diagram createChart() failed: "+a)}},Diagram.prototype.showAllData=function(){this.useShowAllData=!0,this.setLive(!1),this.loadChart()},Diagram.prototype.setLive=function(a){this.useLive=a,this.stopLive=!a&&this.stopLive},Diagram.prototype.setDataInterpolated=function(a){this.useDataInterpolated!==a&&(this.useDataInterpolated=a),this.graph.transform(a?"line":"step")},Diagram.prototype.getLiveData=function(){var a=parseInt((new Date).getTime()/this.resolution)-6e4*this.liveDuration/this.resolution,b={xs:this.chartData.xs,columns:[]};for(var c in this.tagDataIndex){for(var d=this.chartData.columns[this.tagDataIndex[c].x],e=this.chartData.columns[this.tagDataIndex[c].y],f=1,g=d.length-1,h=g;h>0;h--){if(d[h]<a)break;f=h}var i=d.slice(f,d.length),j=e.slice(f,e.length);i.unshift(d[0]),j.unshift(e[0]),b.columns.push(i),b.columns.push(j)}return b},Diagram.prototype.setPoint=function(a){this.usePoint=this.graph.internal.config.point_show=a,this.graph.internal.redraw()},Diagram.prototype.refreshChart=function(){this.graph=c3.generate({bindto:"#"+this.chartId,data:{rows:this.rowsData},axis:{x:{tick:{count:3,format:function(a){return new Date(a).toLocaleString()}}}},subchart:{show:this.trendPage.advanced},zoom:{enabled:!0},point:{show:this.usePoint}})},Diagram.prototype.processNewData=function(a,b){try{console.log("------processNewData-------");for(var c={},d=null,e=[],f=0,g=this.legends.length;f<g;f++)e.push(this.nullValue),a===this.legends[f]&&(d=f);if(d){for(var f=1,g=this.rowsData.length;f<g;f++)c[this.rowsData[f][0].toString()]=this.rowsData[f];b.forEach(function(a){var b=parseInt(new Date(a.TS).getTime()/1e3),f=c[b]||e.slice();f[0]=b,f[d]=parseFloat(a.Value),c[b.toString()]=f});var h=[];for(var i in c)h.push(i);h.sort();var j=[this.legends];h.forEach(function(a){j.push(c[a])});for(var k=1,l=this.legends.length;k<l;k++)for(var m=this.nullValue,f=1,g=j.length;f<g;f++)j[f][k]===this.nullValue?j[f][k]=m:m=j[f][k];this.rowsData=j}}catch(a){console.log("Diagram processNewData() failed: "+a)}},Diagram.prototype.loadChart=function(){var a=this.chartData;this.useLive&&(a=this.getLiveData()),this.graph.load(a)},Diagram.prototype.getActualTagValue=function(){if("undefined"!=typeof this.tagList.ts){for(var a=[this.tagList.ts],b=1,c=this.legends.length;b<c;b++)a.push(this.tagList[this.legends[b]]);return a}return null},Diagram.prototype.getDataBeginDate=function(){return this.getDataDate(!0)},Diagram.prototype.getDataEndDate=function(){return this.getDataDate(!1)},Diagram.prototype.getDataDate=function(a){var b=null;for(var c in this.tagDataIndex){var d=this.chartData.columns[this.tagDataIndex[c].x],e=d[a?1:d.length-1];e&&(null===b&&(b=e),b=(a?e<b:e>b)?e:b)}var f=new Date(b*this.resolution);return console.log("getDataDate "+(a?"begin":"end")+" = "+f.toLocaleString()),null===b?b:f},Diagram.prototype.loadMoreData=function(a,b){var c=b||this.getDataBeginDate(),d=a||new Date(c);a||d.setMinutes(c.getMinutes()-this.historicInterval);for(var e in this.tagDataIndex)this.loadMoreTagData(e,d,c)},Diagram.prototype.loadMoreTagData=function(a,b,c){var d=emosWS.getPLCTag(a),e=d.plc,f=d.tag,g=b.getUTCFullYear(),h=b.getUTCMonth()+1,i=b.getUTCDate(),j=b.getUTCHours(),k=b.getUTCMinutes(),l=b.getUTCSeconds(),m=c.getUTCFullYear(),n=c.getUTCMonth()+1,o=c.getUTCDate(),p=c.getUTCHours(),q=c.getUTCMinutes(),r=c.getUTCSeconds();this.addTrendRegisteredListener(function(){emosWS.sendTrendGetItemValueList(this.trendPage.trendId,e,f,g,h,i,j,k,l,m,n,o,p,q,r)}.bind(this))},Diagram.prototype.adviseData=function(a){try{this.tagList[a]=0,this.addNewTag(a);var b=new Date,c=new Date(b);c.setMinutes(b.getMinutes()-this.historicInterval),b.setMinutes(b.getMinutes()+this.jitter);var d=this.getDataBeginDate();d&&(c=c.getTime()>d.getTime()?d:c),this.loadMoreTagData(a,c,b),this.callbackList[a]=emosWS.advise(a,function(b){this.stopLive||this.addNewTagValue(a,b)}.bind(this),"",emosWS.tagType.IO),this.loadChart()}catch(a){console.log("Diagram adviseData() failed: "+a)}},Diagram.prototype.drop=function(a){try{this.ui.style.backgroundColor=this.backgroundColor,a.preventDefault();var b=a.dataTransfer.getData("text");console.log("dropped: tag="+b),this.initializeChart(b)}catch(a){console.log("Diagram drop() failed: "+a)}},Diagram.prototype.initializeChart=function(a){a&&(this.graph||this.createChart()),this.tagList[a]||this.adviseData(a)},Diagram.prototype.allowDrop=function(a){this.ui.style.backgroundColor=this.droptBackgroundColor,a.preventDefault(),a.stopPropagation()},Diagram.prototype.getExportSVG=function(){return this.ui.innerHTML},Diagram.prototype.getExportData=function(){var a=this.getSetting();return a.chartData=this.chartData,a},Diagram.prototype.getSetting=function(){return{tagDataIndex:this.tagDataIndex,useLive:this.useLive,usePoint:this.usePoint,useDataInterpolated:this.useDataInterpolated,advanced:this.trendPage.advanced}},Diagram.prototype.reset=function(){for(var a in this.callbackList)emosWS.unadvise(a,this.callbackList[a])},Diagram.prototype.onFilterDateSelected=function(a,b){this.loadData(a,b)},Diagram.prototype.loadDataNext=function(){var a=this.getDataEndDate(),b=new Date(a);b.setMinutes(a.getMinutes()+this.historicInterval),this.loadData(a,b)},Diagram.prototype.loadDataBack=function(){var a=this.getDataBeginDate(),b=new Date(a);b.setMinutes(a.getMinutes()-this.historicInterval),this.loadData(b,a)},Diagram.prototype.loadData=function(a,b){this.stopLive=!0,this.clearChartData(),this.loadMoreData(a,b)},emosWS.Diagram=Diagram;function TrendList(){this.trendList=null,this.trendListSize=10,this.createGUI(),this.trendPage=null,window.TrendListDialog=this}TrendList.prototype.createGUI=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c='<div id="'+a+'">\n                        <form>\n                            <select id="'+b+'" class="TrendListOption"></select>\n                            <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">\n                        </form>\n                    </div>',d=$(c);$("body").append(d),this.ui=$("#"+a).dialog({modal:!0,autoOpen:!1,title:"Select a trend",width:400,resizable:!0,buttons:{Cancel:function(){this.ui.dialog("close")}.bind(this),OK:this.onSelected.bind(this)}}),this.ui.find("form").on("submit",function(a){a.preventDefault(),this.onSelected()}.bind(this)),this.trendList=document.getElementById(b),this.trendList.size=this.trendListSize,this.trendList.addEventListener("dblclick",function(){this.onSelected()}.bind(this),!1)}catch(a){console.log("TrendList createGUI() failed: "+a)}},TrendList.prototype.onSelected=function(){this.trendList.value&&this.trendPage.openTrendFromLocalStorage(this.trendList.value),this.ui.dialog("close")},TrendList.prototype.show=function(a){try{this.trendPage=a;while(this.trendList.options.length>0)this.trendList.remove(0);var b=a.retrieveTrends();for(var c in b){var d=document.createElement("option");d.text=c,c===a.trendName&&(d.selected="true"),this.trendList.add(d)}this.ui.dialog("open")}catch(a){console.log("TrendList createGUI() failed: "+a)}},emosWS.TrendList=TrendList;function FilterDate(){this.trendPage=null,this.date1HTML=null,this.hour1HTML=null,this.minute1HTML=null,this.second1HTML=null,this.date2HTML=null,this.hour2HTML=null,this.minute2HTML=null,this.second2HTML=null,this.date1=null,this.date2=null,this.createGUI(),window.FilterDateDialog=this}FilterDate.prototype.createGUI=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=getElementGlobalID(),i=getElementGlobalID(),j=getElementGlobalID(),k=getElementGlobalID(),l='<div id="'+a+'">\n                        <form>\n                            <div class="FilterDateLeft">\n                                <div id="'+b+'"></div>\n                                <div class="vertical controls" id="'+c+'">\n                                    <input id="'+d+'">h\n                                    <input id="'+e+'">m\n                                    <input id="'+f+'">s\n                                </div>\n                            </div>\n                            <div class="FilterDateRight">\n                                <div id="'+g+'"></div>\n                                <div class="vertical controls" id="'+h+'">\n                                    <input id="'+i+'">h\n                                    <input id="'+j+'">m\n                                    <input id="'+k+'">s\n                                </div>\n                            </div>\n                            <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">\n                        </form>\n                    </div>',m=$(l);$("body").append(m),this.ui=$("#"+a).dialog({modal:!0,autoOpen:!1,title:"Select start and end date",width:540,resizable:!0,buttons:{Cancel:function(){this.ui.dialog("close")}.bind(this),OK:this.onSelected.bind(this)}}),this.ui.find("form").on("submit",function(a){a.preventDefault(),this.onSelected()}.bind(this)),this.date1HTML=$("#"+b).datepicker({changeMonth:!0,changeYear:!0}),this.date1HTML.datepicker("option","firstDay",1),this.date1HTML.datepicker("option","yearRange","0:3000"),this.hour1HTML=$("#"+d).spinner({min:0,max:23,step:1,start:1}),this.minute1HTML=$("#"+e).spinner({min:0,max:59,step:1,start:0}),this.second1HTML=$("#"+f).spinner({min:0,max:59,step:1,start:0}),this.date1={date:this.date1HTML,hour:this.hour1HTML,minute:this.minute1HTML,second:this.second1HTML},this.date2HTML=$("#"+g).datepicker({changeMonth:!0,changeYear:!0}),this.date2HTML.datepicker("option","firstDay",1),this.date2HTML.datepicker("option","yearRange","0:3000"),this.hour2HTML=$("#"+i).spinner({min:0,max:23,step:1,start:1}),this.minute2HTML=$("#"+j).spinner({min:0,max:59,step:1,start:0}),this.second2HTML=$("#"+k).spinner({min:0,max:59,step:1,start:0}),this.date2={date:this.date2HTML,hour:this.hour2HTML,minute:this.minute2HTML,second:this.second2HTML}}catch(a){console.log("FilterDate createGUI() failed: "+a)}},FilterDate.prototype.onSelected=function(){var a=this.getTime(this.date1),b=this.getTime(this.date2);a<=b&&this.diagram.onFilterDateSelected(a,b),this.ui.dialog("close")},FilterDate.prototype.show=function(a){try{this.diagram=a,this.setTimeControl(this.date1,a.getDataBeginDate()),this.setTimeControl(this.date2,new Date),this.ui.dialog("open")}catch(a){console.log("FilterDate show() failed: "+a)}},FilterDate.prototype.setTimeControl=function(a,b){try{a.date.datepicker("setDate",b),a.hour.val(b.getHours()),a.minute.val(b.getMinutes()),a.second.val(b.getSeconds())}catch(a){console.log("FilterDate setTimeControl() failed: "+a)}},FilterDate.prototype.getTime=function(a){try{var b=a.date.datepicker("getDate");return b.setHours(a.hour.val()),b.setMinutes(a.minute.val()),b.setSeconds(a.second.val()),b.setMilliseconds(0),b}catch(a){console.log("FilterDate getTime() failed: "+a)}},emosWS.FilterDate=FilterDate;function TrendPage(a){emosWS.require({css:["/lib/css/c3.css"],js:["/lib/js/d3.min.js","/lib/js/c3.min.js","/lib/js/FileSaver.min.js"]},function(){this.advanced="undefined"==typeof a.advanced||a.advanced,this.trendData="undefined"==typeof a.data?[]:a.data,this.src=a.advanced,this.toolbar=null,this.variableDialog=window.TrendPageVariableDialog||new VariableDialog,this.trendListDialog=window.TrendListDialog||new TrendList,this.filterDateDialog=window.FilterDateDialog||new FilterDate,this.diagrams=null,this.diagramsElement=null,this.diagramList=[],this.trendId=null,this.useLive=!this.advanced,this.usePoint=!1,this.useDataInterpolated=!0,this.tbVariableDialog=null,this.tbPrint=null,this.tbSaveData=null,this.tbDelete=null,this.tbHundred=null,this.tbRealtime=null,this.tbRealtimeId=null,this.tbSlider=null,this.tbDataInterpolated=null,this.tbDataInterpolatedId=null,this.tbDataPoint=null,this.tbDataPointId=null,this.tbSaveDiagram=null,this.tbDeleteDiagram=null,this.tbFetchDiagram=null,this.tbNewDiagram=null,this.trendListName="emosDiagramList",this.trendName=null,ForeignObject.call(this,a),ESAnimation.call(this)}.bind(this))}TrendPage.prototype=Object.create(ForeignObject.prototype),TrendPage.prototype=emosWS.fn.emosExtend(TrendPage.prototype,ESAnimation.prototype),TrendPage.prototype.constructor=TrendPage,TrendPage.prototype.initializeMore=function(){emosWS.sendTrendRegister(function(a){switch(a.type){case"trendInfo":this.trendId=a.value,this.variableDialog.setTrendId(this.trendId),this.diagramList.forEach(function(a){a.onTrendRegistered()});break;case"trendPlantList":this.variableDialog.onDataTrendPlantList(a);break;case"trendItemList":this.variableDialog.onDataTrendItemList(a);break;case"trendItemValueList":this.diagramList.forEach(function(b){var c=JSON.parse(a.data);b.onDataTrendItemValueList(c)})}}.bind(this))},TrendPage.prototype.renderMore=function(){this.createGUI()},TrendPage.prototype.createGUI=function(){try{var a=getElementGlobalID(),b=getElementGlobalID(),c=getElementGlobalID(),d=getElementGlobalID(),e=getElementGlobalID(),f=getElementGlobalID(),g=getElementGlobalID(),h=this.tbRealtimeId=getElementGlobalID(),i=this.tbDataInterpolatedId=getElementGlobalID(),j=this.tbDataPointId=getElementGlobalID(),k=getElementGlobalID(),l=getElementGlobalID(),m=getElementGlobalID(),n=getElementGlobalID(),o=getElementGlobalID(),p=this.advanced?'<div id="'+a+'" class="ui-widget-header ui-corner-all TrendPageRow">\n                <button id="'+b+'">Variable dialog</button>\n                <button id="'+d+'">Save / Export Data</button>\n                <button id="'+e+'">Delete Variables in the Diagram</button>\n                <button id="'+f+'">Show all data to a 100 %</button>\n                <button id="'+g+'">Load more historic data</button>\n                <input type="checkbox" id="'+h+'"'+(this.useLive?" checked":"")+'><label for="'+h+'" title="Real Time Trend">Live</label>\n                <input type="checkbox" id="'+i+'"'+(this.useDataInterpolated?" checked":"")+'><label for="'+i+'" title="Show data interpolated">Interpolated</label>\n                <input type="checkbox" id="'+j+'"'+(this.usePoint?" checked":"")+'><label for="'+j+'" title="Show data points (Measuring point)">Point</label>\n                <button id="'+k+'">Save Diagram settings</button>\n                <button id="'+l+'">Delete Diagram settings</button>\n                <button id="'+m+'">Fetch Diagram settings</button>\n                <button id="'+n+'">New diagram</button>\n            </div>':"",q='<div class="TrendPageWrapper" id="'+this.elementId+'">\n                        <div class="TrendPageTable">'+p+'\n                            <div class="TrendPageDiagramsWrapper TrendPageRow">\n                                <div class="TrendPageDiagrams">\n                                    <div id="'+o+'" class="TrendPageTable">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>',r=$(q);this.divJElement.append(r),this.element=document.getElementById(this.elementId),this.diagrams=$("#"+o),this.diagramsElement=document.getElementById(o),this.tbVariableDialog=document.getElementById(b),this.tbPrint=document.getElementById(c),this.tbSaveData=document.getElementById(d),this.tbDelete=document.getElementById(e),this.tbHundred=document.getElementById(f),this.tbRealtime=document.getElementById(h),this.tbDataInterpolated=document.getElementById(i),this.tbDataPoint=document.getElementById(j),this.tbSaveDiagram=document.getElementById(k),this.tbDeleteDiagram=document.getElementById(l),this.tbFetchDiagram=document.getElementById(m),this.tbNewDiagram=document.getElementById(n);var s=this;this.advanced&&($("#"+b).button({text:!1,icons:{primary:"ui-icon-tag"}}).click(function(){s.variableDialog.ui.dialog("open"),s.variableDialog.setPosition(this)}),$("#"+d).button({text:!1,icons:{primary:"ui-icon-clipboard"}}).click(function(){s.save()}),$("#"+e).button({text:!1,icons:{primary:"ui-icon-trash"}}).click(function(){s.reset()}),$("#"+g).button({text:!1,icons:{primary:"ui-icon-transferthick-e-w"}}).click(function(){s.loadMoreData()}),$("#"+f).button({text:!1,icons:{primary:"ui-icon-image"}}).click(function(){s.showAllData()}),this.tbRealtime.addEventListener("click",function(){s.setLive(this.checked)},!1),$("#"+h).button(),this.tbDataInterpolated.addEventListener("click",function(){s.setDataInterpolated(this.checked)},!1),$("#"+i).button(),this.tbDataPoint.addEventListener("click",function(){s.setPoint(this.checked)},!1),$("#"+j).button(),$("#"+k).button({text:!1,icons:{primary:"ui-icon-disk"}}).click(function(){s.saveToLocalStorage()}),$("#"+l).button({text:!1,icons:{primary:"ui-icon-close"}}).click(function(){s.deleteTrend()}),$("#"+m).button({text:!1,icons:{primary:"ui-icon-folder-open"}}).click(function(){s.trendListDialog.show(s)}),$("#"+n).button({text:!1,icons:{primary:"ui-icon-plus"}}).click(function(){new Diagram(s),s.refreshSize()})),this.createDiagrams()}catch(a){console.log("TrendPage createGUI() failed: "+a)}},TrendPage.prototype.showAllData=function(){$("#"+this.tbRealtimeId).prop("checked",!1).button("refresh"),this.diagramList.forEach(function(a){a.showAllData()})},TrendPage.prototype.loadMoreData=function(){this.diagramList.forEach(function(a){a.loadMoreData()})},TrendPage.prototype.setDataInterpolated=function(a){this.useDataInterpolated=a,this.diagramList.forEach(function(b){b.setDataInterpolated(a)})},TrendPage.prototype.setLive=function(a){this.useLive=a,this.diagramList.forEach(function(b){b.setLive(a)})},TrendPage.prototype.setPoint=function(a){this.usePoint=a,this.diagramList.forEach(function(b){b.setPoint(a)})},TrendPage.prototype.createDiagrams=function(){if(0===this.trendData.length)new Diagram(this);else{for(var a=[],b=0,c=this.trendData.length;b<c;b++)a.push(new Diagram(this));for(var b=0,c=this.trendData.length;b<c;b++)setTimeout(function(b){for(var c=this.trendData[b],d=0,e=c.length;d<e;d++)a[b].initializeChart(c[d])}.bind(this,b),1);this.refreshSize()}},TrendPage.prototype.saveToLocalStorage=function(){var a=this.trendName||prompt("Please enter diagram name to save","diagram_"+(new Date).toLocaleString());null!==a&&(this.storeTrend({name:a,setting:this.getSetting()}),this.trendName=a)},TrendPage.prototype.openTrendFromLocalStorage=function(a){var b=this.retrieveTrends()[a];b&&(this.reset(!0),this.trendData=[],b.diagrams.forEach(function(a){this.useLive=a.useLive,this.usePoint=a.usePoint,this.useDataInterpolated=a.usePoint;var b=[];for(var c in a.tagDataIndex)b.push(c);this.trendData.push(b)}.bind(this)),this.createDiagrams(),$("#"+this.tbRealtimeId).prop("checked",this.useLive).button("refresh"),$("#"+this.tbDataInterpolatedId).prop("checked",this.useDataInterpolated).button("refresh"),$("#"+this.tbDataPointId).prop("checked",this.usPoint).button("refresh"),this.trendName=a)},TrendPage.prototype.getSetting=function(){var a={diagrams:[]};return this.diagramList.forEach(function(b){a.diagrams.push(b.getSetting())}),a},TrendPage.prototype.storeTrend=function(a){var b=this.retrieveTrends();"undefined"!=typeof Storage&&(b[a.name]=a.setting),this.storeTrends(b)},TrendPage.prototype.storeTrends=function(a){"undefined"!=typeof Storage&&localStorage.setItem(this.trendListName,JSON.stringify(a))},TrendPage.prototype.deleteTrend=function(){if(this.trendName&&confirm("Do you want to delete this trend from browser local storage?")){var a=this.retrieveTrends();"undefined"!=typeof Storage&&(delete a[this.trendName],this.storeTrends(a)),this.reset()}},TrendPage.prototype.retrieveTrends=function(){if("undefined"!=typeof Storage)return JSON.parse(localStorage.getItem(this.trendListName))||{}},TrendPage.prototype.save=function(){var a=(new Date).toLocaleString(),b="trend_html_",c="trend_data_",d=[{name:b+a,ext:".html",text:this.getExportSVG()},{name:c+a,ext:".txt",text:this.getExportData()}];$.when($.get("/lib/css/c3.css")).done(function(a){d.push({name:"c3",ext:".css",text:a}),this.saveNext(d)}.bind(this))},TrendPage.prototype.saveNext=function(a){a.forEach(function(a){var b=this.getBlob(a.text);saveAs(b,a.name+a.ext)}.bind(this))},TrendPage.prototype.getExportSVG=function(){var a='<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="c3.css"></head><body>';return this.diagramList.forEach(function(b){a+=b.getExportSVG()}),a+="</body></html>"},TrendPage.prototype.getExportData=function(){var a={time:new Date,diagrams:[]};return this.diagramList.forEach(function(b){a.diagrams.push(b.getExportData())}),JSON.stringify(a)},TrendPage.prototype.getBlob=function(a){return new Blob([a],{type:"text/plain;charset=utf-8"})},TrendPage.prototype.reset=function(a){this.diagramList.forEach(function(a){a.reset()}),this.diagramList=[],this.diagrams.empty(),a||new Diagram(this)},TrendPage.prototype.refreshSize=function(){var a=parseInt(this.diagramsElement.clientHeight/this.diagramList.length);this.diagramList.forEach(function(b){b.refreshSize(a)})},emosWS.TrendPage=TrendPage;function UserRight(a){this.def={act_ur:20,apt_ur:150,esm_ur:50,ext_ur:50,psa_ur:20,act_gr:50,apt_gr:50,esm_gr:50,ext_gr:50,psa_gr:50,sys_sr:20},this.rights=JSON.parse(a)}UserRight.prototype.hasRight=function(a,b){return"1"===this.rights[a].charAt(b)},UserRight.prototype.hasPaintShopRight=function(a){return 0===a||this.hasRight("psa_ur",a-1)};function LoginDialog(){this.userName=null,this.status=null,this.message={status:"out"},this.usernameHTML=null,this.passwordHTML=null,this.loginHTML=null,this.logoffHTML=null,this.statusHTML=null,this.iframeHTML=null,this.accessToken=null,this.userright=null,this.profile=null,this.loginDate=null,this.wscookie=null,this.LCTokenKey="emosLoginKey",this.GET_USER_INFO="GETUSERINFO",this.USER_INFO="USERINFO",this.listeners=[],this.ui=null,this.authWindow=null,this.langs={70:"de",71:"en",72:"es",73:"pt_PT",74:"fr",75:"zh_CN",76:"en",77:"en"},this.createGUI(),this.init(),window.LoginDialog=this}LoginDialog.prototype.getLanguage=function(){return this.langs[emosWS.getLanguage()]||"en"},LoginDialog.prototype.createGUI=function(){try{var a=(new Date).getUTCMilliseconds(),b=a+"iframe",c=$("<div id='"+a+"'> <iframe id='"+b+"' class='emoslogin' src=''></iframe></div>");$("body").append(c),this.iframeHTML=document.getElementById(b),this.ui=$("#"+a).dialog({autoOpen:!1,width:500,height:500,open:function(){$(this).siblings(".ui-dialog-titlebar").removeClass("ui-widget-header"),$(this).css("overflow","hidden")},dialogClass:"noTitleStuff"})}catch(a){console.log("Login createGUI() failed: "+a)}},LoginDialog.prototype.register=function(a){this.listeners.forEach(function(a){}),this.listeners.push(a)},LoginDialog.prototype.retrieveAccessToken=function(){if("undefined"!=typeof Storage){
var a=localStorage.getItem(this.LCTokenKey);if(a)return new AccessToken(JSON.parse(localStorage.getItem(this.LCTokenKey)))}return null},LoginDialog.prototype.onLocalStorageChange=function(a){a.key===this.LCTokenKey&&(!this.accessToken&&a.newValue?setTimeout(function(){this.loginByKey(this.retrieveAccessToken())}.bind(this),1):"PASSED"!==this.status||a.newValue||this.logoff())},LoginDialog.prototype.removeAccessToken=function(){return"undefined"!=typeof Storage&&delete localStorage[this.LCTokenKey],null},LoginDialog.prototype.setAccessToken=function(a){this.accessToken=a||this.accessToken,"undefined"!=typeof Storage&&localStorage.setItem(this.LCTokenKey,a.toString())},LoginDialog.prototype.init=function(){emosWS.addEventListener("authentication",this.onMessage.bind(this)),emosWS.addEventListener("UserRight",function(){}),emosWS.addEventListener("language",function(){this.ui.dialog("isOpen")&&(this.ui.dialog("close"),this.showUI())}.bind(this)),this.loginByKey(this.retrieveAccessToken()),window.addEventListener("storage",this.onLocalStorageChange.bind(this),!1),window.addEventListener("message",function(a){var b=JSON.parse(a.data);switch(b.type){case this.GET_USER_INFO:this.iframeHTML.contentWindow.postMessage(JSON.stringify({type:this.USER_INFO,UserName:this.userName,UserRight:this.userright,LoginDate:this.loginDate,Profiles:this.profile,WebSocketServer:emosWS.getWSHostname(),CasServer:emosWS.Cas.casServerURL}),"*")}}.bind(this),!1)},LoginDialog.prototype.login=function(){var a=this.usernameHTML.value,b=this.passwordHTML.value;""!==a&&""!==b&&emosWS.sendLogin(a,b,this.onMessage.bind(this))},LoginDialog.prototype.loginByKey=function(a){a&&emosWS.sendLoginByKey(a.getToken(),this.onMessage.bind(this))},LoginDialog.prototype.loginByCasKey=function(a){a&&emosWS.sendLoginByKey(a,this.onMessage.bind(this))},LoginDialog.prototype.logoff=function(){emosWS.sendLogoff()},LoginDialog.prototype.onMessage=function(a){try{switch(this.status=a.status,this.status){case"PASSED":this.onPassed(a);break;case"FAILED":console.log("Authentication failed"),this.onFailed(a);break;case"LOGOFF":this.onLogoff()}}catch(a){console.log("LoginDialog onMessage failed: "+a)}},LoginDialog.prototype.onAccesToken=function(a){var b=new AccessToken(a);this.accessToken&&b.equals(this.accessToken)||(this.ui&&this.ui.dialog("close"),this.setAccessToken(b),this.loginByKey(b),emosWS.propagateMessage(JSON.stringify(a)))},LoginDialog.prototype.onLogoff=function(){this.userright=null,this.loginDate=null,this.userName="",this.removeAccessToken(),this.accessToken=null,emosWS.Cas.onLogoff(),this.ui&&this.ui.dialog("close"),this.listeners.forEach(function(a){a.onLogoff()}),this.message={status:"out"},emosWS.dispatchEvent({type:"UserRight",message:this.message})},LoginDialog.prototype.onPassed=function(a){this.status="PASSED",this.userName=a.username,"undefined"==typeof displayName||"undefined"==typeof a[displayName]||(this.userName=a[displayName]===displayName||""===a[displayName]?a.username:a[displayName]),this.userright=new UserRight(a.userright),this.profile=JSON.parse(a.profile),this.loginDate=a.logindate,emosWS.Cas.onPassed(a),console.log("Authentication succesful! username = "+this.userName+" / key = "+this.accessToken),this.ui&&this.ui.dialog("close"),this.listeners.forEach(function(a){a.onPassed(this.userName)}.bind(this)),this.message={status:"in",username:this.userName,userright:this.userright},emosWS.dispatchEvent({type:"UserRight",message:this.message})},LoginDialog.prototype.onFailed=function(a){this.status="FAILED",emosWS.Cas.onFailed(a)},LoginDialog.prototype.show=function(){var a="PASSED"===this.status;if(a)confirm("Do you want to sign out?")&&this.logoff();else{var b=function(a,b,c,d){c+=32,d+=96;var e=(screen.width-c)/2,f=(screen.height-d)/2;e<0&&(c=screen.width,e=0),f<0&&(d=screen.height,f=0);var g=window.open(a,b,"width="+c+", height="+d+", left="+e+", top="+f+", location=no, menubar=no, status=no, toolbar=no, scrollbars=no, resizable=no");return g.resizeTo(c,d),g.moveTo(e,f),g.focus(),g},c=420,d=750;this.authWindow&&this.authWindow.close(),this.authWindow=b(emosWS.Cas.casLoginURL,"_blank",c,d),this.authWindow.focus()}},LoginDialog.prototype.getStatus=function(){return this.message},LoginDialog.prototype.showUI=function(){this.ui.dialog("isOpen")||(this.ui.dialog("open"),this.iframeHTML.src=emosWS.Cas.casLoginURL+"&locale="+this.getLanguage())},LoginDialog.prototype.showDialog=function(){var a="PASSED"===this.status;a?confirm("Do you want to sign out?")&&this.logoff():this.showUI()},LoginDialog.prototype.checkInit=function(){emosWS.animationData.stillInit&&emosWS.addEventListener("UserRight",emosWS.animationData.callback.datachangeListener.bind(emosWS.animationData.callback),!0)},LoginDialog.prototype.hasRight=function(a,b){return this.checkInit(),!!this.userright&&this.userright.hasRight(a.toLowerCase(),b)},LoginDialog.prototype.hasPaintShopRight=function(a){return this.checkInit(),this.userright?this.userright.hasPaintShopRight(a):0===a},emosWS.LoginDialog=LoginDialog;function Login(a){ForeignObject.call(this,a),this.loginDialog=window.LoginDialog,this.loginDialog.register(this)}Login.prototype=Object.create(ForeignObject.prototype),Login.prototype.constructor=Login,Login.prototype.renderMore=function(){try{var a=$('<div class="ForeignObject LoginText" id="'+this.elementId+'"></div>');this.divJElement.append(a),this.element=document.getElementById(this.elementId),this.element.addEventListener("click",function(){this.loginDialog.show(this)}.bind(this),!1)}catch(a){console.log("Login renderMore() failed: "+a)}},Login.prototype.onLogoff=function(){this.loggedIn=!1,this.element.innerHTML=""},Login.prototype.onPassed=function(a){this.loggedIn=!0,this.element.innerHTML=a},emosWS.Login=Login;function HTMLElements(a){this.useHTMLElement="1"!==a.domType,this.html=a.html||"",this.js=JSON.parse(a.js)||[],this.css=JSON.parse(a.css)||[],this.onready=a.onready,ForeignObject.call(this,a)}HTMLElements.prototype=Object.create(ForeignObject.prototype),HTMLElements.prototype.constructor=HTMLElements,HTMLElements.prototype.renderMore=function(){try{""!==this.html&&($(this.divElement).append($('<div id="'+this.elementId+'"> '+this.html+"</div>")),this.element=this.getElement());var a=function(){this.onready&&this.onready()}.bind(this);0===this.js.length&&0===this.css.length?a():(emosWS.require({js:this.js},a),this.css.forEach(function(a){var b=emosWS.attr.svg.createElementNS("http://www.w3.org/1999/xhtml","link");b.setAttribute("href",a),b.setAttribute("type","text/css"),b.setAttribute("rel","stylesheet"),this.divElement.appendChild(b)}.bind(this)))}catch(a){console.error(a)}},emosWS.HTMLElements=HTMLElements});
//# sourceMappingURL=durr.emos.min.map